import{R as e,W as t,am as k,an as l,X as f,I as s,Y as p,r as d,m as h,T as b,ao as V,ap as A,aq as D,J as G}from"./vendor.25eb60fb.js";import{u as m,c as K}from"./index.22863799.js";import{C as M}from"./index.6c8aecb8.js";var O=n=>{const{formConfig:c,onFinish:E,configLoading:o}=n;return e.createElement("div",{className:"swagger-config"},e.createElement(t,{name:"form_config",form:c,onFinish:E,labelCol:{span:10}},e.createElement("div",{className:"form-item-title"},"JSON\u6A21\u62DF\u6570\u636E\u76F8\u5173\uFF1A"),e.createElement(t.Item,{name:"json_checked",valuePropName:"checked",label:"\u751F\u6210JSON\u6A21\u62DF\u6570\u636E"},e.createElement(k,null)),e.createElement("div",{className:"form-item-title"},"MockJS\u76F8\u5173\uFF1A"),e.createElement(t.Item,{name:"mock_checked",valuePropName:"checked",label:"\u751F\u6210MockJS\u6A21\u62DF\u6570\u636E"},e.createElement(k,null)),e.createElement(t.Item,{name:"mock_fileType",label:"mock\u6587\u4EF6\u7C7B\u578B",initialValue:"js",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},e.createElement(l.Group,{buttonStyle:"solid"},e.createElement(l.Button,{value:"ts"},"TypeScript"),e.createElement(l.Button,{value:"js"},"JavaScript"))),e.createElement("div",{className:"form-item-title"},"API\u76F8\u5173\uFF1A"),e.createElement(t.Item,{name:"requestLibPath",label:"requestLibPath",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],tooltip:{title:"request\u7684\u5BFC\u5165\u8BF7\u6C42\u5934",icon:e.createElement(f,null)}},e.createElement(s,null)),e.createElement(t.Item,{name:"api_fileType",label:"\u751F\u6210\u6587\u4EF6\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},e.createElement(l.Group,{buttonStyle:"solid"},e.createElement(l.Button,{value:"ts"},"TypeScript"),e.createElement(l.Button,{value:"js"},"JavaScript"))),e.createElement(t.Item,{name:"outputFileType",label:"\u591A\u6587\u4EF6",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],tooltip:{title:"\u5BFC\u51FA\u7684\u591A\u4E2Aapi\u662F\u5426\u5408\u5E76\u6210\u4E00\u4E2A\u6587\u4EF6",icon:e.createElement(f,null)}},e.createElement(l.Group,{buttonStyle:"solid"},e.createElement(l.Button,{value:"merge"},"\u5408\u5E76"),e.createElement(l.Button,{value:"none"},"\u4E0D\u5408\u5E76"))),e.createElement(t.Item,{noStyle:!0,shouldUpdate:!0},({getFieldValue:F})=>F("outputFileType")==="merge"?e.createElement(t.Item,{name:"outputFileName",label:"\u5BFC\u51FA\u6587\u4EF6\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],initialValue:"serve.ts",shouldUpdate:!0},e.createElement(s,null)):null),e.createElement(t.Item,{name:"filterPathPrefix",label:"\u9700\u8981\u8FC7\u6EE4\u7684api\u524D\u7F00",tooltip:{title:"\u6B64\u914D\u7F6E/crm/api/getList\u53EF\u8FC7\u6EE4\u4E3A /getList",icon:e.createElement(f,null)}},e.createElement(s,{placeholder:"\u4F8B\u5982\uFF1Aapi"})),e.createElement(t.Item,{style:{paddingLeft:208}},e.createElement(p,{type:"primary",htmlType:"submit",loading:o},"\u4FDD\u5B58"))))},Z=({data:n})=>{const[c]=t.useForm(),[E,o]=d.exports.useState(""),{loading:F,request:g}=m("/api/config/savePrivateConfig",{lazy:!0});d.exports.useEffect(()=>{n&&n&&c.setFieldsValue(n)},[n]);const r=i=>{g(i).then(B=>{h.success("\u4FDD\u5B58\u5B8C\u6210"),o(i.access_token)})};return e.createElement("div",{className:"swagger-config",style:{width:550}},e.createElement(t,{name:"form_config",form:c,onFinish:r,labelCol:{span:10}},e.createElement("div",{className:"info",style:{padding:"5px 0 10px 25px"}},e.createElement("p",{style:{color:"#ff0000"}},"\u58F0\u660E\uFF1A\u8BE5\u9879\u76EE\u6240\u6709\u914D\u7F6E\u90FD\u662F\u672C\u5730\u5B58\u50A8\uFF0C\u4E0D\u4F1A\u4E0A\u4F20\u4EFB\u4F55\u6570\u636E\uFF01"),e.createElement("p",null,"\u56E0github\u7684\u4E0B\u8F7D\u6587\u4EF6api\u6709\u6B21\u6570\u9650\u5236\uFF0C\u53EF\u914D\u7F6Eaccess_token\u65E0\u9650\u5236\u4E0B\u8F7D\u3002 ",e.createElement("br",null),e.createElement("a",{href:"https://api.github.com/users/octocat",target:"_blank"},"\u3010\u67E5\u8BE2\u662F\u5426\u9650\u5236\u3011")," ","\xA0\xA0\xA0",e.createElement("a",{href:`https://api.github.com/rate_limit?access_token=${E||n&&n.access_token||""}`,target:"_blank"},"\u3010\u67E5\u770B\u6211\u7684\u6B21\u6570\u3011")," ","\xA0\xA0\xA0",e.createElement("a",{href:"https://www.yuque.com/qqhh/cuq2ci/hzv2kt",target:"_blank"},"\u3010\u5982\u4F55\u914D\u7F6Etoken\u3011"))),e.createElement(t.Item,{name:"access_token",label:"github \u7684 access_token",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}]},e.createElement(s,null)),e.createElement(t.Item,{style:{paddingLeft:208}},e.createElement(p,{type:"primary",htmlType:"submit",loading:F},"\u4FDD\u5B58"))))};const{TabPane:y}=b;var W=()=>{const[n]=t.useForm(),[c]=t.useForm(),[E]=t.useForm(),{query:o}=K(),[F,g]=d.exports.useState("1"),{data:r,request:i}=m("/api/config/get"),{request:B,loading:v}=m("/api/config/swagger/add",{lazy:!0}),{request:C}=m("/api/config/swagger/remove",{lazy:!0}),{request:q,loading:w}=m("/api/swagger/saveConfig",{lazy:!0}),{request:I,loading:S}=m("/api/block/pushItem",{lazy:!0}),{request:x}=m("/api/block/removeItem",{lazy:!0});d.exports.useEffect(()=>{o&&o.key&&g(o.key)},[]),d.exports.useEffect(()=>{r&&r.swaggerConfig&&E.setFieldsValue(r.swaggerConfig)},[r]);const _=a=>{B(a).then(u=>{n.resetFields(),i()})},T=(a,u)=>{const J=new RegExp(/^[A-Za-z]+:\/\/[A-Za-z0-9-_]+.[A-Za-z0-9-_%&\\?\\/.:=]+$/);return u&&J.test(u)?Promise.resolve():Promise.reject(new Error("\u8BF7\u8F93\u5165\u4E00\u4E2A\u6B63\u786E\u7684\u94FE\u63A5"))},N=a=>{C({id:a.id}).then(u=>{i()})},P=[{title:"\u540D\u79F0",dataIndex:"name",key:"name",width:100},{title:"\u94FE\u63A5",dataIndex:"href",key:"href",width:200},{title:"\u64CD\u4F5C",width:70,render:(a,u)=>u.default?null:e.createElement("a",{onClick:()=>N(u),key:u.id},"\u5220\u9664")}],z=a=>{q(a).then(u=>{h.success("\u4FDD\u5B58\u6210\u529F")})},L=a=>{x({id:a.id}).then(u=>{i()})},j=[{title:"\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u94FE\u63A5",dataIndex:"href",key:"href"},{title:"\u9ED8\u8BA4",dataIndex:"default",key:"default",render:(a,u)=>String(a)==="1"?e.createElement("span",{key:u.id},"\u662F"):e.createElement("span",{key:u.id},"\u5426")},{title:"\u64CD\u4F5C",render:(a,u)=>u.default?e.createElement("span",{key:u.id},"\u65E0"):e.createElement("a",{onClick:()=>L(u),key:u.id},"\u5220\u9664")}],R=a=>{I(a).then(u=>{h.success("\u4FDD\u5B58\u6210\u529F"),c.resetFields(),i()})};return e.createElement(M,{isMain:!0,title:"\u914D\u7F6E",className:"ui-config-content"},e.createElement("div",{className:"scroll-body ui-config-container ui-content-container"},e.createElement(b,{className:"tabs-oumi",type:"card",activeKey:F,onChange:a=>g(a)},e.createElement(y,{tab:"Swagger",key:"1"},e.createElement(V,null,e.createElement(A,{span:11},e.createElement("h3",null,"API\u5BFC\u51FA\u914D\u7F6E"),e.createElement(O,{formConfig:E,onFinish:z,configLoading:w})),e.createElement(A,{span:13},e.createElement("h3",null,"Swagger\u5217\u8868"),e.createElement(t,{name:"form_add",form:n,layout:"inline",onFinish:_},e.createElement(t.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Swagger\u540D\u79F0"}]},e.createElement(s,null)),e.createElement(t.Item,{name:"href",label:"\u94FE\u63A5",rules:[{required:!0,validator:T,message:"\u8BF7\u8F93\u5165\u4E00\u4E2A\u6B63\u786E\u7684\u94FE\u63A5"}]},e.createElement(s,null)),e.createElement(t.Item,null,e.createElement(p,{type:"primary",htmlType:"submit",loading:v},"\u65B0\u589E"))),e.createElement("div",{style:{width:700,marginTop:50}},e.createElement(D,{rowKey:"id",title:()=>"\u6211\u7684 Swagger",bordered:!0,dataSource:r&&r.swagger?r.swagger:[],columns:P,pagination:!1}))))),e.createElement(y,{tab:"\u8D44\u4EA7\u914D\u7F6E",key:"2"},e.createElement("h3",null,"\u8D44\u4EA7\u5217\u8868"),e.createElement(t,{name:"form_block",form:c,layout:"inline",onFinish:R},e.createElement(t.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D44\u4EA7\u540D\u79F0"}]},e.createElement(s,null)),e.createElement(t.Item,{name:"href",label:"\u8D44\u4EA7\u8DEF\u5F84",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E00\u4E2A\u6B63\u786E\u7684\u8D44\u4EA7\u8DEF\u5F84"}]},e.createElement(s,null)),e.createElement(t.Item,null,e.createElement(G,null,e.createElement(p,{type:"primary",htmlType:"submit",loading:S},"\u65B0\u589E"),e.createElement("a",{href:"https://www.yuque.com/qqhh/cuq2ci/vpg4rw",target:"_blank"},"\u5982\u4F55\u914D\u7F6E\uFF1F")))),e.createElement("div",{style:{width:800,marginTop:50}},e.createElement(D,{rowKey:"id",title:()=>"\u8D44\u4EA7\u5217\u8868",bordered:!0,dataSource:r&&r.blocks?r.blocks:[],columns:j,pagination:!1}))),e.createElement(y,{tab:"\u79C1\u6709\u914D\u7F6E",key:"3"},e.createElement(Z,{data:r&&r.private})))))};export{W as default};
