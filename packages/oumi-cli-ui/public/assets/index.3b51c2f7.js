var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,s=(e,t)=>{for(var a in t||(t={}))c.call(t,a)&&l(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&l(e,a,t[a]);return e};import{G as o,g as i,u as m,R as d,e as p}from"./vendor.a57ebf69.js";import{I as u,u as v,S as f,L as h,i as E}from"./index.4c92c9ef.js";import{T as g,C as b}from"./index.1e29c4af.js";import{F as N,a as j,b as x}from"./FolderOutlined.a13ee49e.js";var y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},O=function(e,t){return o.exports.createElement(u,Object.assign({},e,{ref:t,icon:y}))};O.displayName="ArrowLeftOutlined";var z=o.exports.forwardRef(O),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},w=function(e,t){return o.exports.createElement(u,Object.assign({},e,{ref:t,icon:P}))};w.displayName="CodeOutlined";var k=o.exports.forwardRef(w),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 757.4h-53.8c-4.2 0-7.7 3.5-7.7 7.7v61.8H197.1V197.1h629.8v61.8c0 4.2 3.5 7.7 7.7 7.7h53.8c4.2 0 7.7-3.4 7.7-7.7V158.7c0-17-13.7-30.7-30.7-30.7H158.7c-17 0-30.7 13.7-30.7 30.7v706.6c0 17 13.7 30.7 30.7 30.7h706.6c17 0 30.7-13.7 30.7-30.7V765.1c0-4.3-3.5-7.7-7.7-7.7zm18.6-251.7L765 393.7c-5.3-4.2-13-.4-13 6.3v76H438c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"export",theme:"outlined"},I=function(e,t){return o.exports.createElement(u,Object.assign({},e,{ref:t,icon:H}))};I.displayName="ExportOutlined";var V=o.exports.forwardRef(I),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M280 752h80c4.4 0 8-3.6 8-8V280c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8zm192-280h80c4.4 0 8-3.6 8-8V280c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8v184c0 4.4 3.6 8 8 8zm192 72h80c4.4 0 8-3.6 8-8V280c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8v256c0 4.4 3.6 8 8 8zm216-432H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"project",theme:"outlined"},L=function(e,t){return o.exports.createElement(u,Object.assign({},e,{ref:t,icon:C}))};L.displayName="ProjectOutlined";var q=o.exports.forwardRef(L),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"},A=function(e,t){return o.exports.createElement(u,Object.assign({},e,{ref:t,icon:M}))};A.displayName="UnorderedListOutlined";var S=o.exports.forwardRef(A);const F=i`
  mutation fileOpenInEditor($input: OpenInEditorInput!) {
    fileOpenInEditor(input: $input)
  }
`;i`
  query lastImportPath {
    lastImportPath
  }
`;const{TabPane:R}=g,B=({projectList:e=[],removeProject:t,goDashboard:a})=>{const[r,{data:c,error:n,loading:l}]=p(F);return d.createElement("section",{className:"project-select-list container-center tabs-content-auto"},e&&e.map((e=>d.createElement("div",{className:"project-select-list-item",key:e.id},d.createElement("div",{className:"content"},d.createElement("div",{className:"content-icon"},d.createElement(q,{style:{fontSize:22}})),d.createElement("div",{className:"content-left",onClick:()=>a({id:e.id})},d.createElement("div",{className:"name"},e.name),d.createElement("div",{className:"path"},e.name)),d.createElement("div",{className:"content-right"},d.createElement("span",{className:"open",onClick:()=>(e=>{l||r({variables:{input:{file:e.path}}})})(e)},d.createElement(k,null)," 在编辑器中打开 ",l&&d.createElement(h,null)),d.createElement("span",{className:"delete",onClick:()=>t(e)},d.createElement(b,null))))))),e&&0===e.length&&d.createElement("div",{className:"empty flex-center"},"没有项目哦，去导入吧~"))},D=({projectData:e,requestImportToProject:t,requestFiles:a})=>{const{currentPath:r=[],isPackage:c=!1,files:n=[]}=e||{};return d.createElement("div",{className:"project-import container-center tabs-content-auto"},d.createElement("div",{className:"toolbar"},d.createElement("div",{className:"back flex-center",onClick:()=>{const e=[...r];e.pop(),e.length>1&&a({rootPathArr:e})}},d.createElement(z,null)),d.createElement("div",{className:"current-path"},r.map(((e,t)=>d.createElement("div",{key:e,className:"path-part flex-center",onClick:()=>((e,t)=>{if(t===r.length-1||!e)return;const c=[...r].splice(0,t+1);a({rootPathArr:c})})(e,t)},e))))),d.createElement("div",{className:"folders"},d.createElement(T,{files:n,goNextFile:e=>{const t=[...r,e];a({rootPathArr:t})}})),d.createElement("div",{className:"import-btn"},d.createElement("button",{className:""+(c?"":"disabled"),onClick:()=>{c&&t({importPath:r})}},d.createElement(N,null)," 导入这个文件夹")))},T=({files:e,goNextFile:r})=>d.createElement("div",null,e&&e.map((e=>d.createElement("div",{className:"folder-explorer-item",key:e,onClick:()=>r(e)},d.createElement("div",{className:"icon flex-center"},(()=>{const r={fontSize:18},c=(n=s({},r),t(n,a({color:"#168bff"})));var n;return e.includes(".json")?d.createElement(j,{style:s({},r)}):d.createElement(x,{style:c})})()),d.createElement("div",{className:"folder-name"},e)))),e&&0===e.length&&d.createElement("div",{className:"empty flex-center"},"该目录没有文件~"));export default()=>{const[e,t]=o.exports.useState("1"),a=m(),{request:r,data:c,loading:n}=v("/api/user/folder",{errorMsg:!1}),{request:l,data:i=[],loading:p}=v("/api/project/list"),{request:u,loading:h}=v("/api/project/dashboard",{lazy:!0,onSuccess:()=>{a.push("/")}}),{request:b,loading:N}=v("/api/project/remove",{lazy:!0,onSuccess:()=>{j()}}),j=e=>{l(e)};return d.createElement("section",{className:"ui-container"},d.createElement("div",{className:"title"},"Aimi UI 项目管理器"),d.createElement("div",{className:"ui-tabs"},d.createElement(g,{defaultActiveKey:"1",activeKey:e,onChange:e=>t(e)},d.createElement(R,{key:"1",tab:d.createElement("span",null,d.createElement(S,null),"项目")},d.createElement(B,{projectList:i,removeProject:b,goDashboard:u})),d.createElement(R,{key:"2",tab:d.createElement("span",null,d.createElement(V,null),"导入")},d.createElement(D,{requestImportToProject:e=>{E.post("/api/project/import",s({},e)).then((e=>{j(),t("1")}))},projectData:c,requestFiles:e=>{r(e)}}))),(n||p)&&d.createElement("div",{className:"loading flex-center"},d.createElement(f,null))))};
