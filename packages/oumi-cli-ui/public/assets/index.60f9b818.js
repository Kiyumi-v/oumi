var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,c=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))o.call(t,r)&&s(e,r,t[r]);return e},l=(e,n)=>t(e,r(n));import{R as i,S as p,a as m,G as u,b as d,c as E,u as f,d as h,e as b,f as g,L as x,H as _,M as y,g as j,h as v,i as k,A as O,j as S,B as P,k as C}from"./vendor.a178a0ed.js";let w;const D={},L=function(e,t){if(!t||0===t.length)return e();if(void 0===w){const e=document.createElement("link").relList;w=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in D)return;D[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":w,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))};function T(e){var t;return(t=class extends i.Component{constructor(){super(...arguments),this.state={Component:t.Component}}componentDidMount(){this.state.Component||e().then((({default:e})=>{t.Component=e,this.setState({Component:e})}))}render(){const{Component:e}=this.state;return e?i.createElement(e,c({},this.props)):i.createElement("div",{style:{padding:20}},"页面加载中...")}}).Component=null,t}function I(e,t={},r={}){return e?i.createElement(p,c({},r),e.map(((e,r)=>i.createElement(m,{key:e.key||r,path:e.path,exact:e.exact,strict:e.strict,render:r=>e.render?e.render(l(c(c({},r),t),{route:e})):i.createElement(e.component,l(c(c({},r),t),{route:e}))})))):null}const A=u.create({timeout:15e3});A.interceptors.response.use((e=>{if(e&&e.data&&!0===e.data.success)return e.data.data;const{config:t,data:r}=e,n=r&&r.msg?r.msg:"系统繁忙~";return!t||void 0!==t.errorMsg&&!0!==t.errorMsg||(d.destroy(),d.error(n)),Promise.reject(e.data)}),(e=>Promise.reject(e)));const M=(e,t)=>{const{params:r,methods:n="post",lazy:a=!1,errorMsg:o=!0,onSuccess:s,onError:l}=t||{},[i,p]=E.exports.useState(a),[m]=E.exports.useState(u.CancelToken.source()),[d,f]=E.exports.useState(null),[h,b]=E.exports.useState(null),[g,x]=E.exports.useState(!1),_=E.exports.useCallback(((t,a)=>(x(!0),new Promise(((i,p)=>{A[n](e,c(c({},r),t),{errorMsg:o,cancelToken:m.token}).then((e=>{x(!1),b(e),"function"==typeof s&&s(e),a&&"function"==typeof a.onSuccess&&a.onSuccess(e),i(e)})).catch((e=>{x(!1),f(e),"function"==typeof l&&l(e),a&&"function"==typeof a.onError&&a.onError(e),p(e)}))})))),[r]);return E.exports.useEffect((()=>{!1===i&&_(),p(!0)}),[_,i,r]),{error:d,data:h,source:m,setData:b,loading:g,request:_}},N=()=>{const e=f(),t=h();return Object.assign(e,t),e.query=b.parse(e.search.substr(1)),e};var R=e=>{const t=g(),[r,n]=E.exports.useState(""),{data:a,error:o,request:s}=M("/api/dashboard/init",{errorMsg:!1,lazy:!0});E.exports.useEffect((()=>{s()}),[]),E.exports.useEffect((()=>{o&&t.replace("/project/select")}),[o]),E.exports.useEffect((()=>{const{location:e}=t;n(e.pathname)}),[t,t.location]);return o?i.createElement("div",{style:{padding:50}},i.createElement(x,{to:"/project/select"},"选择项目")):i.createElement("div",{className:"ui-slider"},i.createElement("header",{onClick:()=>{t.push("/project/select")}},i.createElement("div",{className:"icon",title:"Oumi 项目过滤器"},i.createElement(_,{style:{fontSize:18}})),i.createElement("div",{className:"project-name"},a&&a.name)),i.createElement("div",{className:"slider-list"},q.map((e=>i.createElement("div",{className:"slider-list-item "+(r===e.path?"active":""),key:e.path},i.createElement(x,{to:e.path},e.icon,e.name))))),i.createElement("div",{className:"contact-me"},i.createElement("a",{href:"mailto:345263463@qq.com"},i.createElement(y,null)," 向我反馈")))};const q=[{name:"任务",path:"/tasks",icon:i.createElement(v,null)},{name:"资产",path:"/blocks",icon:i.createElement(k,null)},{name:"Swagger",path:"/swagger",icon:i.createElement(O,null)},{name:"配置",path:"/config",icon:i.createElement(S,null)}],V=[{component:({route:e})=>{const t=g(),[r,n]=E.exports.useState(!1);return E.exports.useEffect((()=>{const{location:e}=t;n("/project/select"!==e.pathname)}),[t,t.location]),i.createElement(i.Fragment,null,r&&i.createElement(R,null),i.createElement("div",{className:"root-container"},I(e.routes)))},routes:[{path:"/",label:"首页",exact:!0,component:()=>i.createElement(j,{to:"/dashboard"})},{path:"/project/select",label:"选择项目",exact:!0,component:T((()=>L((()=>import("./index.58df9b2e.js")),["/assets/index.58df9b2e.js","/assets/index.11f3719d.css","/assets/vendor.a178a0ed.js"])))},{path:"/dashboard",label:"Dashboard",exact:!0,component:T((()=>L((()=>import("./index.55a7e812.js")),["/assets/index.55a7e812.js","/assets/vendor.a178a0ed.js","/assets/index.34c381ac.js","/assets/index.c44fabc9.css"])))},{path:"/swagger",label:"Swagger",exact:!0,component:T((()=>L((()=>import("./index.df997c23.js")),["/assets/index.df997c23.js","/assets/index.cacf812f.css","/assets/vendor.a178a0ed.js","/assets/index.34c381ac.js","/assets/index.c44fabc9.css"])))},{path:"/tasks",label:"Tasks",exact:!0,component:T((()=>L((()=>import("./index.302f93f5.js")),["/assets/index.302f93f5.js","/assets/index.23be9a6f.css","/assets/vendor.a178a0ed.js","/assets/index.34c381ac.js","/assets/index.c44fabc9.css"])))},{path:"/blocks",label:"Blocks",exact:!0,component:T((()=>L((()=>import("./index.b0c04213.js")),["/assets/index.b0c04213.js","/assets/index.d177f23e.css","/assets/vendor.a178a0ed.js","/assets/index.34c381ac.js","/assets/index.c44fabc9.css"])))},{path:"/config",label:"Config",exact:!0,component:T((()=>L((()=>import("./index.bfce1b92.js")),["/assets/index.bfce1b92.js","/assets/index.188218b6.css","/assets/vendor.a178a0ed.js","/assets/index.34c381ac.js","/assets/index.c44fabc9.css"])))}]}];function z(){return i.createElement(P,null,I(V))}C.render(i.createElement(z,null),document.getElementById("root"));export{N as a,A as i,M as u};
