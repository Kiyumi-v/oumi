import{r,R as e,J as b,K as x,D,N as I,O as m,P as K,Q as R,V as l}from"./vendor.25eb60fb.js";import{u as S}from"./index.22863799.js";let q=!1;const o="oumi-notices-cache",d={setKey(c){localStorage.setItem(o,c)},getKey(){return localStorage.getItem(o)},clear(){localStorage.removeItem(o)}};var k=r.exports.memo(c=>{const{title:E,children:p,className:f,isMain:i}=c,g="1.6.5",[s,u]=r.exports.useState(null),{data:a,loading:A,request:h}=S("/api/notices",{params:{version:g},lazy:!0});r.exports.useEffect(()=>{!i||(q=!0,h())},[i]),r.exports.useEffect(()=>{!a||u(d.getKey()===a.currentDate)},[a]);const n=r.exports.useMemo(()=>a?Array.isArray(a.notices)?a.notices.slice(0,3):[]:[],[a]),N=r.exports.useMemo(()=>!n||s||s===null?0:n.length,[n,s]),v=t=>{u(!0),d.setKey(a.currentDate),t.stopPropagation()},y=()=>e.createElement("div",{className:"notification-popup"},e.createElement(l,{className:s?"is-read":"",itemLayout:"horizontal",dataSource:n,renderItem:t=>e.createElement(l.Item,null,e.createElement(l.Item.Meta,{title:t.href?e.createElement("a",{href:t.href,target:"_blank"},t.title):t.title,description:t.description}),e.createElement("div",null,t.date))}),n.length>0&&e.createElement("div",{className:"bottom-btn",onClick:t=>v(t)},"\u6E05\u7A7A\u6D88\u606F"));return e.createElement("div",{className:"wrapper-container"},e.createElement("div",{className:"container-body"},e.createElement("div",{className:"header"},e.createElement("h2",null,E),e.createElement("div",{className:"right-menu"},e.createElement(b,null,e.createElement(x,{count:N,offset:[-10,6]},e.createElement(D,{overlay:y,placement:"bottomRight",trigger:["click"]},e.createElement("span",{className:"icon icon-radius"},e.createElement(I,null)))),e.createElement("span",{className:"icon icon-radius"},e.createElement(m,{title:"\u6211\u8981\u52A0\u5165\u5F00\u6E90"},e.createElement("a",{href:"https://github.com/dasheng667/oumi",target:"_blank"},e.createElement(K,null)))),e.createElement("span",{className:"icon icon-radius"},e.createElement(m,{title:"\u5411\u6211\u53CD\u9988"},e.createElement("a",{href:"mailto:345263463@qq.com"},e.createElement(R,null))))))),e.createElement("div",{className:`container-main ${f||""}`},p)))});export{k as C};
