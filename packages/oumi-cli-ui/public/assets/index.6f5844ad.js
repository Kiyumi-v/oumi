import{r as e,R as t,J as a,K as r,D as n,N as c,O as l,P as s,Q as o,V as m}from"./vendor.4b163024.js";import{u as i}from"./index.13f2bf2c.js";let u=!1;const E={setKey(e){localStorage.setItem("oumi-notices-cache",e)},getKey:()=>localStorage.getItem("oumi-notices-cache"),clear(){localStorage.removeItem("oumi-notices-cache")}};var d=e.exports.memo((d=>{const{title:p,children:h,className:g,isMain:f}=d,[v,N]=e.exports.useState(null),{data:y,loading:b,request:x}=i("/api/notices",{params:{version:"1.5.5"},lazy:!0});e.exports.useEffect((()=>{f&&(u=!0,x())}),[f]),e.exports.useEffect((()=>{y&&N(E.getKey()===y.currentDate)}),[y]);const I=e.exports.useMemo((()=>y&&Array.isArray(y.notices)?y.notices.slice(0,3):[]),[y]),K=e.exports.useMemo((()=>!I||v||null===v?0:I.length),[I,v]);return t.createElement("div",{className:"wrapper-container"},t.createElement("div",{className:"container-body"},t.createElement("div",{className:"header"},t.createElement("h2",null,p),t.createElement("div",{className:"right-menu"},t.createElement(a,null,t.createElement(r,{count:K,offset:[-10,6]},t.createElement(n,{overlay:()=>t.createElement("div",{className:"notification-popup"},t.createElement(m,{className:v?"is-read":"",itemLayout:"horizontal",dataSource:I,renderItem:e=>t.createElement(m.Item,null,t.createElement(m.Item.Meta,{title:e.href?t.createElement("a",{href:e.href,target:"_blank"},e.title):e.title,description:e.description}),t.createElement("div",null,e.date))}),I.length>0&&t.createElement("div",{className:"bottom-btn",onClick:e=>(e=>{N(!0),E.setKey(y.currentDate),e.stopPropagation()})(e)},"清空消息")),placement:"bottomRight",trigger:["click"]},t.createElement("span",{className:"icon icon-radius"},t.createElement(c,null)))),t.createElement("span",{className:"icon icon-radius"},t.createElement(l,{title:"我要加入开源"},t.createElement("a",{href:"https://github.com/dasheng91/oumi",target:"_blank"},t.createElement(s,null)))),t.createElement("span",{className:"icon icon-radius"},t.createElement(l,{title:"向我反馈"},t.createElement("a",{href:"mailto:345263463@qq.com"},t.createElement(o,null))))))),t.createElement("div",{className:`container-main ${g||""}`},h)))}));export{d as C};
