var Mr=Object.defineProperty,Ar=Object.defineProperties;var Rr=Object.getOwnPropertyDescriptors;var dr=Object.getOwnPropertySymbols;var Tr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable;var pr=($,Y,Q)=>Y in $?Mr($,Y,{enumerable:!0,configurable:!0,writable:!0,value:Q}):$[Y]=Q,Ae=($,Y)=>{for(var Q in Y||(Y={}))Tr.call(Y,Q)&&pr($,Q,Y[Q]);if(dr)for(var Q of dr(Y))Or.call(Y,Q)&&pr($,Q,Y[Q]);return $},Ot=($,Y)=>Ar($,Rr(Y));import{r as ve,R as Z,e as Br,I as Dr,ae as Pr,O as Ir,af as Hr,ag as Fr,ah as jr,g as vr,ai as Wr,Y as gr,aj as Ur,$ as qr}from"./vendor.25eb60fb.js";import{C as Nr}from"./index.6c8aecb8.js";import{b as zr}from"./index.22863799.js";import{u as Kr}from"./event.3f2c0b25.js";import{a as Vr,t as Gr}from"./index.03ffb951.js";var yr={exports:{}};(function($,Y){(function(Q,J){$.exports=J()})(self,function(){return(()=>{var Q={4567:function(I,a,v){var u,_=this&&this.__extends||(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])},u(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}u(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;var f=v(9042),h=v(6114),m=v(9924),p=v(3656),i=v(844),n=v(5596),l=v(9631),o=function(t){function e(r,s){var c=t.call(this)||this;c._terminal=r,c._renderService=s,c._liveRegionLineCount=0,c._charsToConsume=[],c._charsToAnnounce="",c._accessibilityTreeRoot=document.createElement("div"),c._accessibilityTreeRoot.setAttribute("role","document"),c._accessibilityTreeRoot.classList.add("xterm-accessibility"),c._accessibilityTreeRoot.tabIndex=0,c._rowContainer=document.createElement("div"),c._rowContainer.setAttribute("role","list"),c._rowContainer.classList.add("xterm-accessibility-tree"),c._rowElements=[];for(var d=0;d<c._terminal.rows;d++)c._rowElements[d]=c._createAccessibilityTreeNode(),c._rowContainer.appendChild(c._rowElements[d]);if(c._topBoundaryFocusListener=function(g){return c._onBoundaryFocus(g,0)},c._bottomBoundaryFocusListener=function(g){return c._onBoundaryFocus(g,1)},c._rowElements[0].addEventListener("focus",c._topBoundaryFocusListener),c._rowElements[c._rowElements.length-1].addEventListener("focus",c._bottomBoundaryFocusListener),c._refreshRowsDimensions(),c._accessibilityTreeRoot.appendChild(c._rowContainer),c._renderRowsDebouncer=new m.TimeBasedDebouncer(c._renderRows.bind(c)),c._refreshRows(),c._liveRegion=document.createElement("div"),c._liveRegion.classList.add("live-region"),c._liveRegion.setAttribute("aria-live","assertive"),c._accessibilityTreeRoot.appendChild(c._liveRegion),!c._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return c._terminal.element.insertAdjacentElement("afterbegin",c._accessibilityTreeRoot),c.register(c._renderRowsDebouncer),c.register(c._terminal.onResize(function(g){return c._onResize(g.rows)})),c.register(c._terminal.onRender(function(g){return c._refreshRows(g.start,g.end)})),c.register(c._terminal.onScroll(function(){return c._refreshRows()})),c.register(c._terminal.onA11yChar(function(g){return c._onChar(g)})),c.register(c._terminal.onLineFeed(function(){return c._onChar(`
`)})),c.register(c._terminal.onA11yTab(function(g){return c._onTab(g)})),c.register(c._terminal.onKey(function(g){return c._onKey(g.key)})),c.register(c._terminal.onBlur(function(){return c._clearLiveRegion()})),c.register(c._renderService.onDimensionsChange(function(){return c._refreshRowsDimensions()})),c._screenDprMonitor=new n.ScreenDprMonitor,c.register(c._screenDprMonitor),c._screenDprMonitor.setListener(function(){return c._refreshRowsDimensions()}),c.register((0,p.addDisposableDomListener)(window,"resize",function(){return c._refreshRowsDimensions()})),c}return _(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),(0,l.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(r,s){var c=r.target,d=this._rowElements[s===0?1:this._rowElements.length-2];if(c.getAttribute("aria-posinset")!==(s===0?"1":""+this._terminal.buffer.lines.length)&&r.relatedTarget===d){var g,b;if(s===0?(g=c,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(g=this._rowElements.shift(),b=c,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){var C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else C=this._createAccessibilityTreeNode(),this._rowElements.push(C),this._rowContainer.appendChild(C);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}},e.prototype._onResize=function(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var r=document.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r},e.prototype._onTab=function(r){for(var s=0;s<r;s++)this._onChar(" ")},e.prototype._onChar=function(r){var s=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),h.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){s._accessibilityTreeRoot.appendChild(s._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,h.isMac&&(0,l.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(r){this._clearLiveRegion(),this._charsToConsume.push(r)},e.prototype._refreshRows=function(r,s){this._renderRowsDebouncer.refresh(r,s,this._terminal.rows)},e.prototype._renderRows=function(r,s){for(var c=this._terminal.buffer,d=c.lines.length.toString(),g=r;g<=s;g++){var b=c.translateBufferLineToString(c.ydisp+g,!0),C=(c.ydisp+g+1).toString(),y=this._rowElements[g];y&&(b.length===0?y.innerText="\xA0":y.textContent=b,y.setAttribute("aria-posinset",C),y.setAttribute("aria-setsize",d))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}},e.prototype._refreshRowDimensions=function(r){r.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(i.Disposable);a.AccessibilityManager=o},3614:(I,a)=>{function v(h){return h.replace(/\r?\n/g,"\r")}function u(h,m){return m?"[200~"+h+"[201~":h}function _(h,m,p){h=u(h=v(h),p.decPrivateModes.bracketedPasteMode),p.triggerDataEvent(h,!0),m.value=""}function f(h,m,p){var i=p.getBoundingClientRect(),n=h.clientX-i.left-10,l=h.clientY-i.top-10;m.style.width="20px",m.style.height="20px",m.style.left=n+"px",m.style.top=l+"px",m.style.zIndex="1000",m.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=v,a.bracketTextForPaste=u,a.copyHandler=function(h,m){h.clipboardData&&h.clipboardData.setData("text/plain",m.selectionText),h.preventDefault()},a.handlePasteEvent=function(h,m,p){h.stopPropagation(),h.clipboardData&&_(h.clipboardData.getData("text/plain"),m,p)},a.paste=_,a.moveTextAreaUnderMouseCursor=f,a.rightClickHandler=function(h,m,p,i,n){f(h,m,p),n&&i.rightClickSelect(h),m.value=i.selectionText,m.select()}},4774:(I,a)=>{var v,u,_,f;function h(p){var i=p.toString(16);return i.length<2?"0"+i:i}function m(p,i){return p<i?(i+.05)/(p+.05):(p+.05)/(i+.05)}Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=void 0,function(p){p.toCss=function(i,n,l,o){return o!==void 0?"#"+h(i)+h(n)+h(l)+h(o):"#"+h(i)+h(n)+h(l)},p.toRgba=function(i,n,l,o){return o===void 0&&(o=255),(i<<24|n<<16|l<<8|o)>>>0}}(v=a.channels||(a.channels={})),(u=a.color||(a.color={})).blend=function(p,i){var n=(255&i.rgba)/255;if(n===1)return{css:i.css,rgba:i.rgba};var l=i.rgba>>24&255,o=i.rgba>>16&255,t=i.rgba>>8&255,e=p.rgba>>24&255,r=p.rgba>>16&255,s=p.rgba>>8&255,c=e+Math.round((l-e)*n),d=r+Math.round((o-r)*n),g=s+Math.round((t-s)*n);return{css:v.toCss(c,d,g),rgba:v.toRgba(c,d,g)}},u.isOpaque=function(p){return(255&p.rgba)==255},u.ensureContrastRatio=function(p,i,n){var l=f.ensureContrastRatio(p.rgba,i.rgba,n);if(l)return f.toColor(l>>24&255,l>>16&255,l>>8&255)},u.opaque=function(p){var i=(255|p.rgba)>>>0,n=f.toChannels(i),l=n[0],o=n[1],t=n[2];return{css:v.toCss(l,o,t),rgba:i}},u.opacity=function(p,i){var n=Math.round(255*i),l=f.toChannels(p.rgba),o=l[0],t=l[1],e=l[2];return{css:v.toCss(o,t,e,n),rgba:v.toRgba(o,t,e,n)}},u.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]},(a.css||(a.css={})).toColor=function(p){switch(p.length){case 7:return{css:p,rgba:(parseInt(p.slice(1),16)<<8|255)>>>0};case 9:return{css:p,rgba:parseInt(p.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(p){function i(n,l,o){var t=n/255,e=l/255,r=o/255;return .2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}p.relativeLuminance=function(n){return i(n>>16&255,n>>8&255,255&n)},p.relativeLuminance2=i}(_=a.rgb||(a.rgb={})),function(p){function i(l,o,t){for(var e=l>>24&255,r=l>>16&255,s=l>>8&255,c=o>>24&255,d=o>>16&255,g=o>>8&255,b=m(_.relativeLuminance2(c,g,d),_.relativeLuminance2(e,r,s));b<t&&(c>0||d>0||g>0);)c-=Math.max(0,Math.ceil(.1*c)),d-=Math.max(0,Math.ceil(.1*d)),g-=Math.max(0,Math.ceil(.1*g)),b=m(_.relativeLuminance2(c,g,d),_.relativeLuminance2(e,r,s));return(c<<24|d<<16|g<<8|255)>>>0}function n(l,o,t){for(var e=l>>24&255,r=l>>16&255,s=l>>8&255,c=o>>24&255,d=o>>16&255,g=o>>8&255,b=m(_.relativeLuminance2(c,g,d),_.relativeLuminance2(e,r,s));b<t&&(c<255||d<255||g<255);)c=Math.min(255,c+Math.ceil(.1*(255-c))),d=Math.min(255,d+Math.ceil(.1*(255-d))),g=Math.min(255,g+Math.ceil(.1*(255-g))),b=m(_.relativeLuminance2(c,g,d),_.relativeLuminance2(e,r,s));return(c<<24|d<<16|g<<8|255)>>>0}p.ensureContrastRatio=function(l,o,t){var e=_.relativeLuminance(l>>8),r=_.relativeLuminance(o>>8);if(m(e,r)<t)return r<e?i(l,o,t):n(l,o,t)},p.reduceLuminance=i,p.increaseLuminance=n,p.toChannels=function(l){return[l>>24&255,l>>16&255,l>>8&255,255&l]},p.toColor=function(l,o,t){return{css:v.toCss(l,o,t),rgba:v.toRgba(l,o,t)}}}(f=a.rgba||(a.rgba={})),a.toPaddedHex=h,a.contrastRatio=m},7239:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;var v=function(){function u(){this._color={},this._rgba={}}return u.prototype.clear=function(){this._color={},this._rgba={}},u.prototype.setCss=function(_,f,h){this._rgba[_]||(this._rgba[_]={}),this._rgba[_][f]=h},u.prototype.getCss=function(_,f){return this._rgba[_]?this._rgba[_][f]:void 0},u.prototype.setColor=function(_,f,h){this._color[_]||(this._color[_]={}),this._color[_][f]=h},u.prototype.getColor=function(_,f){return this._color[_]?this._color[_][f]:void 0},u}();a.ColorContrastCache=v},5680:function(I,a,v){var u=this&&this.__spreadArray||function(o,t,e){if(e||arguments.length===2)for(var r,s=0,c=t.length;s<c;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return o.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(a,"__esModule",{value:!0}),a.ColorManager=a.DEFAULT_ANSI_COLORS=void 0;var _=v(4774),f=v(7239),h=_.css.toColor("#ffffff"),m=_.css.toColor("#000000"),p=_.css.toColor("#ffffff"),i=_.css.toColor("#000000"),n={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var o=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],e=0;e<216;e++){var r=t[e/36%6|0],s=t[e/6%6|0],c=t[e%6];o.push({css:_.channels.toCss(r,s,c),rgba:_.channels.toRgba(r,s,c)})}for(e=0;e<24;e++){var d=8+10*e;o.push({css:_.channels.toCss(d,d,d),rgba:_.channels.toRgba(d,d,d)})}return o}());var l=function(){function o(t,e){this.allowTransparency=e;var r=t.createElement("canvas");r.width=1,r.height=1;var s=r.getContext("2d");if(!s)throw new Error("Could not get rendering context");this._ctx=s,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new f.ColorContrastCache,this.colors={foreground:h,background:m,cursor:p,cursorAccent:i,selectionTransparent:n,selectionOpaque:_.color.blend(m,n),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return o.prototype.onOptionsChange=function(t){t==="minimumContrastRatio"&&this._contrastCache.clear()},o.prototype.setTheme=function(t){t===void 0&&(t={}),this.colors.foreground=this._parseColor(t.foreground,h),this.colors.background=this._parseColor(t.background,m),this.colors.cursor=this._parseColor(t.cursor,p,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,i,!0),this.colors.selectionTransparent=this._parseColor(t.selection,n,!0),this.colors.selectionOpaque=_.color.blend(this.colors.background,this.colors.selectionTransparent),_.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=_.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,a.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,a.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,a.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,a.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,a.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,a.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,a.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,a.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,a.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,a.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,a.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,a.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,a.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,a.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,a.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},o.prototype.restoreColor=function(t){if(t!==void 0)switch(t){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[t]=this._restoreColors.ansi[t]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},o.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:u([],this.colors.ansi,!0)}},o.prototype._parseColor=function(t,e,r){if(r===void 0&&(r=this.allowTransparency),t===void 0)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+t+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var s=this._ctx.getImageData(0,0,1,1).data;if(s[3]!==255){if(!r)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var c=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(S){return Number(S)}),d=c[0],g=c[1],b=c[2],C=c[3],y=Math.round(255*C);return{rgba:_.channels.toRgba(d,g,b,y),css:t}}return{css:this._ctx.fillStyle,rgba:_.channels.toRgba(s[0],s[1],s[2],s[3])}},o}();a.ColorManager=l},9631:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.removeElementFromParent=void 0,a.removeElementFromParent=function(){for(var v,u=[],_=0;_<arguments.length;_++)u[_]=arguments[_];for(var f=0,h=u;f<h.length;f++){var m=h[f];(v=m==null?void 0:m.parentElement)===null||v===void 0||v.removeChild(m)}}},3656:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(v,u,_,f){v.addEventListener(u,_,f);var h=!1;return{dispose:function(){h||(h=!0,v.removeEventListener(u,_,f))}}}},3551:function(I,a,v){var u=this&&this.__decorate||function(i,n,l,o){var t,e=arguments.length,r=e<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,n,l,o);else for(var s=i.length-1;s>=0;s--)(t=i[s])&&(r=(e<3?t(r):e>3?t(n,l,r):t(n,l))||r);return e>3&&r&&Object.defineProperty(n,l,r),r},_=this&&this.__param||function(i,n){return function(l,o){n(l,o,i)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseZone=a.Linkifier=void 0;var f=v(8460),h=v(2585),m=function(){function i(n,l,o){this._bufferService=n,this._logService=l,this._unicodeService=o,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(i.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),i.prototype.attachToDom=function(n,l){this._element=n,this._mouseZoneManager=l},i.prototype.linkifyRows=function(n,l){var o=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=n,this._rowsToLinkify.end=l):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,n),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,l)),this._mouseZoneManager.clearAll(n,l),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return o._linkifyRows()},i._timeBeforeLatency))},i.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var n=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var l=n.ydisp+this._rowsToLinkify.start;if(!(l>=n.lines.length)){for(var o=n.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,t=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,l,o,t,t);e.hasNext();)for(var r=e.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},i.prototype.registerLinkMatcher=function(n,l,o){if(o===void 0&&(o={}),!l)throw new Error("handler must be defined");var t={id:this._nextLinkMatcherId++,regex:n,handler:l,matchIndex:o.matchIndex,validationCallback:o.validationCallback,hoverTooltipCallback:o.tooltipCallback,hoverLeaveCallback:o.leaveCallback,willLinkActivate:o.willLinkActivate,priority:o.priority||0};return this._addLinkMatcherToList(t),t.id},i.prototype._addLinkMatcherToList=function(n){if(this._linkMatchers.length!==0){for(var l=this._linkMatchers.length-1;l>=0;l--)if(n.priority<=this._linkMatchers[l].priority)return void this._linkMatchers.splice(l+1,0,n);this._linkMatchers.splice(0,0,n)}else this._linkMatchers.push(n)},i.prototype.deregisterLinkMatcher=function(n){for(var l=0;l<this._linkMatchers.length;l++)if(this._linkMatchers[l].id===n)return this._linkMatchers.splice(l,1),!0;return!1},i.prototype._doLinkifyRow=function(n,l,o){for(var t,e=this,r=new RegExp(o.regex.source,(o.regex.flags||"")+"g"),s=-1,c=function(){var g=t[typeof o.matchIndex!="number"?0:o.matchIndex];if(!g)return d._logService.debug("match found without corresponding matchIndex",t,o),"break";if(s=l.indexOf(g,s+1),r.lastIndex=s+g.length,s<0)return"break";var b=d._bufferService.buffer.stringIndexToBufferIndex(n,s);if(b[0]<0)return"break";var C=d._bufferService.buffer.lines.get(b[0]);if(!C)return"break";var y=C.getFg(b[1]),S=y?y>>9&511:void 0;o.validationCallback?o.validationCallback(g,function(x){e._rowsTimeoutId||x&&e._addLink(b[1],b[0]-e._bufferService.buffer.ydisp,g,o,S)}):d._addLink(b[1],b[0]-d._bufferService.buffer.ydisp,g,o,S)},d=this;(t=r.exec(l))!==null&&c()!=="break";);},i.prototype._addLink=function(n,l,o,t,e){var r=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(o),c=n%this._bufferService.cols,d=l+Math.floor(n/this._bufferService.cols),g=(c+s)%this._bufferService.cols,b=d+Math.floor((c+s)/this._bufferService.cols);g===0&&(g=this._bufferService.cols,b--),this._mouseZoneManager.add(new p(c+1,d+1,g+1,b+1,function(C){if(t.handler)return t.handler(C,o);var y=window.open();y?(y.opener=null,y.location.href=o):console.warn("Opening link blocked as opener could not be cleared")},function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(c,d,g,b,e)),r._element.classList.add("xterm-cursor-pointer")},function(C){r._onLinkTooltip.fire(r._createLinkHoverEvent(c,d,g,b,e)),t.hoverTooltipCallback&&t.hoverTooltipCallback(C,o,{start:{x:c,y:d},end:{x:g,y:b}})},function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(c,d,g,b,e)),r._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()},function(C){return!t.willLinkActivate||t.willLinkActivate(C,o)}))}},i.prototype._createLinkHoverEvent=function(n,l,o,t,e){return{x1:n,y1:l,x2:o,y2:t,cols:this._bufferService.cols,fg:e}},i._timeBeforeLatency=200,i=u([_(0,h.IBufferService),_(1,h.ILogService),_(2,h.IUnicodeService)],i)}();a.Linkifier=m;var p=function(i,n,l,o,t,e,r,s,c){this.x1=i,this.y1=n,this.x2=l,this.y2=o,this.clickCallback=t,this.hoverCallback=e,this.tooltipCallback=r,this.leaveCallback=s,this.willLinkActivate=c};a.MouseZone=p},6465:function(I,a,v){var u,_=this&&this.__extends||(u=function(o,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},u(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}u(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(o,t,e,r){var s,c=arguments.length,d=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,e,r);else for(var g=o.length-1;g>=0;g--)(s=o[g])&&(d=(c<3?s(d):c>3?s(t,e,d):s(t,e))||d);return c>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier2=void 0;var m=v(2585),p=v(8460),i=v(844),n=v(3656),l=function(o){function t(e){var r=o.call(this)||this;return r._bufferService=e,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new p.EventEmitter),r._onHideLinkUnderline=r.register(new p.EventEmitter),r.register((0,i.getDisposeArrayDisposable)(r._linkCacheDisposables)),r}return _(t,o),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var r=this;return this._linkProviders.push(e),{dispose:function(){var s=r._linkProviders.indexOf(e);s!==-1&&r._linkProviders.splice(s,1)}}},t.prototype.attachToDom=function(e,r,s){var c=this;this._element=e,this._mouseService=r,this._renderService=s,this.register((0,n.addDisposableDomListener)(this._element,"mouseleave",function(){c._isMouseOut=!0,c._clearCurrentLink()})),this.register((0,n.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);if(r){this._isMouseOut=!1;for(var s=e.composedPath(),c=0;c<s.length;c++){var d=s[c];if(d.classList.contains("xterm"))break;if(d.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._onHover(r),this._lastBufferCell=r)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,r){var s,c=this;this._activeProviderReplies&&r||((s=this._activeProviderReplies)===null||s===void 0||s.forEach(function(g){g==null||g.forEach(function(b){b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var d=!1;this._linkProviders.forEach(function(g,b){var C;r?((C=c._activeProviderReplies)===null||C===void 0?void 0:C.get(b))&&(d=c._checkLinkProviderResult(b,e,d)):g.provideLinks(e.y,function(y){var S,x;if(!c._isMouseOut){var E=y==null?void 0:y.map(function(B){return{link:B}});(S=c._activeProviderReplies)===null||S===void 0||S.set(b,E),d=c._checkLinkProviderResult(b,e,d),((x=c._activeProviderReplies)===null||x===void 0?void 0:x.size)===c._linkProviders.length&&c._removeIntersectingLinks(e.y,c._activeProviderReplies)}})})},t.prototype._removeIntersectingLinks=function(e,r){for(var s=new Set,c=0;c<r.size;c++){var d=r.get(c);if(d)for(var g=0;g<d.length;g++)for(var b=d[g],C=b.link.range.start.y<e?0:b.link.range.start.x,y=b.link.range.end.y>e?this._bufferService.cols:b.link.range.end.x,S=C;S<=y;S++){if(s.has(S)){d.splice(g--,1);break}s.add(S)}}},t.prototype._checkLinkProviderResult=function(e,r,s){var c,d=this;if(!this._activeProviderReplies)return s;for(var g=this._activeProviderReplies.get(e),b=!1,C=0;C<e;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(b=!0);if(!b&&g){var y=g.find(function(x){return d._linkAtPosition(x.link,r)});y&&(s=!0,this._handleNewLink(y))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(C=0;C<this._activeProviderReplies.size;C++){var S=(c=this._activeProviderReplies.get(C))===null||c===void 0?void 0:c.find(function(x){return d._linkAtPosition(x.link,r)});if(S){s=!0,this._handleNewLink(S);break}}return s},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);r&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!r||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,i.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var r=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(e.link,s)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var c,d;return(d=(c=r._currentLink)===null||c===void 0?void 0:c.state)===null||d===void 0?void 0:d.decorations.pointerCursor},set:function(c){var d,g;((d=r._currentLink)===null||d===void 0?void 0:d.state)&&r._currentLink.state.decorations.pointerCursor!==c&&(r._currentLink.state.decorations.pointerCursor=c,r._currentLink.state.isHovered&&((g=r._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:function(){var c,d;return(d=(c=r._currentLink)===null||c===void 0?void 0:c.state)===null||d===void 0?void 0:d.decorations.underline},set:function(c){var d,g,b;((d=r._currentLink)===null||d===void 0?void 0:d.state)&&((b=(g=r._currentLink)===null||g===void 0?void 0:g.state)===null||b===void 0?void 0:b.decorations.underline)!==c&&(r._currentLink.state.decorations.underline=c,r._currentLink.state.isHovered&&r._fireUnderlineEvent(e.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(c){var d=c.start===0?0:c.start+1+r._bufferService.buffer.ydisp;r._clearCurrentLink(d,c.end+1+r._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,r,s){var c;((c=this._currentLink)===null||c===void 0?void 0:c.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(s,r.text)},t.prototype._fireUnderlineEvent=function(e,r){var s=e.range,c=this._bufferService.buffer.ydisp,d=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-c-1,s.end.x,s.end.y-c-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(d)},t.prototype._linkLeave=function(e,r,s){var c;((c=this._currentLink)===null||c===void 0?void 0:c.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(s,r.text)},t.prototype._linkAtPosition=function(e,r){var s=e.range.start.y===e.range.end.y,c=e.range.start.y<r.y,d=e.range.end.y>r.y;return(s&&e.range.start.x<=r.x&&e.range.end.x>=r.x||c&&e.range.end.x>=r.x||d&&e.range.start.x<=r.x||c&&d)&&e.range.start.y<=r.y&&e.range.end.y>=r.y},t.prototype._positionFromMouseEvent=function(e,r,s){var c=s.getCoords(e,r,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,r,s,c,d){return{x1:e,y1:r,x2:s,y2:c,cols:this._bufferService.cols,fg:d}},f([h(0,m.IBufferService)],t)}(i.Disposable);a.Linkifier2=l},9042:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(I,a,v){var u,_=this&&this.__extends||(u=function(o,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},u(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}u(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(o,t,e,r){var s,c=arguments.length,d=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,e,r);else for(var g=o.length-1;g>=0;g--)(s=o[g])&&(d=(c<3?s(d):c>3?s(t,e,d):s(t,e))||d);return c>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseZoneManager=void 0;var m=v(844),p=v(3656),i=v(4725),n=v(2585),l=function(o){function t(e,r,s,c,d,g){var b=o.call(this)||this;return b._element=e,b._screenElement=r,b._bufferService=s,b._mouseService=c,b._selectionService=d,b._optionsService=g,b._zones=[],b._areZonesActive=!1,b._lastHoverCoords=[void 0,void 0],b._initialSelectionLength=0,b.register((0,p.addDisposableDomListener)(b._element,"mousedown",function(C){return b._onMouseDown(C)})),b._mouseMoveListener=function(C){return b._onMouseMove(C)},b._mouseLeaveListener=function(C){return b._onMouseLeave(C)},b._clickListener=function(C){return b._onClick(C)},b}return _(t,o),t.prototype.dispose=function(){o.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},t.prototype.clearAll=function(e,r){if(this._zones.length!==0){e&&r||(e=0,r=this._bufferService.rows-1);for(var s=0;s<this._zones.length;s++){var c=this._zones[s];(c.y1>e&&c.y1<=r+1||c.y2>e&&c.y2<=r+1||c.y1<e&&c.y2>r+1)&&(this._currentZone&&this._currentZone===c&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(s--,1))}this._zones.length===0&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var r=this,s=this._findZoneEventAt(e);s!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),s&&(this._currentZone=s,s.hoverCallback&&s.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return r._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var r=this._findZoneEventAt(e);r==null||r.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var r=this._findZoneEventAt(e);(r==null?void 0:r.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var r=this._findZoneEventAt(e),s=this._getSelectionLength();r&&s===this._initialSelectionLength&&(r.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var r=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(r)for(var s=r[0],c=r[1],d=0;d<this._zones.length;d++){var g=this._zones[d];if(g.y1===g.y2){if(c===g.y1&&s>=g.x1&&s<g.x2)return g}else if(c===g.y1&&s>=g.x1||c===g.y2&&s<g.x2||c>g.y1&&c<g.y2)return g}},f([h(2,n.IBufferService),h(3,i.IMouseService),h(4,i.ISelectionService),h(5,n.IOptionsService)],t)}(m.Disposable);a.MouseZoneManager=l},6193:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0;var v=function(){function u(_){this._renderCallback=_}return u.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},u.prototype.refresh=function(_,f,h){var m=this;this._rowCount=h,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return m._innerRefresh()}))},u.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(_,f)}},u}();a.RenderDebouncer=v},5596:function(I,a,v){var u,_=this&&this.__extends||(u=function(h,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,i){p.__proto__=i}||function(p,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(p[n]=i[n])},u(h,m)},function(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function p(){this.constructor=h}u(h,m),h.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScreenDprMonitor=void 0;var f=function(h){function m(){var p=h!==null&&h.apply(this,arguments)||this;return p._currentDevicePixelRatio=window.devicePixelRatio,p}return _(m,h),m.prototype.setListener=function(p){var i=this;this._listener&&this.clearListener(),this._listener=p,this._outerListener=function(){i._listener&&(i._listener(window.devicePixelRatio,i._currentDevicePixelRatio),i._updateDpr())},this._updateDpr()},m.prototype.dispose=function(){h.prototype.dispose.call(this),this.clearListener()},m.prototype._updateDpr=function(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},m.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},m}(v(844).Disposable);a.ScreenDprMonitor=f},3236:function(I,a,v){var u,_=this&&this.__extends||(u=function(X,L){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var F in R)Object.prototype.hasOwnProperty.call(R,F)&&(A[F]=R[F])},u(X,L)},function(X,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function A(){this.constructor=X}u(X,L),X.prototype=L===null?Object.create(L):(A.prototype=L.prototype,new A)});Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;var f=v(2950),h=v(1680),m=v(3614),p=v(2584),i=v(5435),n=v(3525),l=v(3551),o=v(9312),t=v(6114),e=v(3656),r=v(9042),s=v(357),c=v(6954),d=v(4567),g=v(1296),b=v(7399),C=v(8460),y=v(8437),S=v(5680),x=v(3230),E=v(4725),B=v(428),M=v(8934),w=v(6465),k=v(5114),T=v(8969),D=v(4774),j=v(4269),W=v(5941),V=typeof window!="undefined"?window.document:null,G=function(X){function L(A){A===void 0&&(A={});var R=X.call(this,A)||this;return R.browser=t,R._keyDownHandled=!1,R._keyPressHandled=!1,R._unprocessedDeadKey=!1,R._onCursorMove=new C.EventEmitter,R._onKey=new C.EventEmitter,R._onRender=new C.EventEmitter,R._onSelectionChange=new C.EventEmitter,R._onTitleChange=new C.EventEmitter,R._onBell=new C.EventEmitter,R._onFocus=new C.EventEmitter,R._onBlur=new C.EventEmitter,R._onA11yCharEmitter=new C.EventEmitter,R._onA11yTabEmitter=new C.EventEmitter,R._setup(),R.linkifier=R._instantiationService.createInstance(l.Linkifier),R.linkifier2=R.register(R._instantiationService.createInstance(w.Linkifier2)),R.register(R._inputHandler.onRequestBell(function(){return R.bell()})),R.register(R._inputHandler.onRequestRefreshRows(function(F,O){return R.refresh(F,O)})),R.register(R._inputHandler.onRequestSendFocus(function(){return R._reportFocus()})),R.register(R._inputHandler.onRequestReset(function(){return R.reset()})),R.register(R._inputHandler.onRequestWindowsOptionsReport(function(F){return R._reportWindowsOptions(F)})),R.register(R._inputHandler.onColor(function(F){return R._handleColorEvent(F)})),R.register((0,C.forwardEvent)(R._inputHandler.onCursorMove,R._onCursorMove)),R.register((0,C.forwardEvent)(R._inputHandler.onTitleChange,R._onTitleChange)),R.register((0,C.forwardEvent)(R._inputHandler.onA11yChar,R._onA11yCharEmitter)),R.register((0,C.forwardEvent)(R._inputHandler.onA11yTab,R._onA11yTabEmitter)),R.register(R._bufferService.onResize(function(F){return R._afterResize(F.cols,F.rows)})),R}return _(L,X),Object.defineProperty(L.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),L.prototype._handleColorEvent=function(A){var R,F;if(this._colorManager){for(var O=0,U=A;O<U.length;O++){var z=U[O],ee=void 0,re="";switch(z.index){case 256:ee="foreground",re="10";break;case 257:ee="background",re="11";break;case 258:ee="cursor",re="12";break;default:ee="ansi",re="4;"+z.index}if(ee)switch(z.type){case 0:var oe=D.color.toColorRGB(ee==="ansi"?this._colorManager.colors.ansi[z.index]:this._colorManager.colors[ee]);this.coreService.triggerDataEvent(p.C0.ESC+"]"+re+";"+(0,W.toRgbString)(oe)+p.C0.BEL);break;case 1:ee==="ansi"?this._colorManager.colors.ansi[z.index]=D.rgba.toColor.apply(D.rgba,z.color):this._colorManager.colors[ee]=D.rgba.toColor.apply(D.rgba,z.color);break;case 2:this._colorManager.restoreColor(z.index)}}(R=this._renderService)===null||R===void 0||R.setColors(this._colorManager.colors),(F=this.viewport)===null||F===void 0||F.onThemeChange(this._colorManager.colors)}},L.prototype.dispose=function(){var A,R,F;this._isDisposed||(X.prototype.dispose.call(this),(A=this._renderService)===null||A===void 0||A.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(F=(R=this.element)===null||R===void 0?void 0:R.parentNode)===null||F===void 0||F.removeChild(this.element))},L.prototype._setup=function(){X.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(L.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),L.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},L.prototype._updateOptions=function(A){var R,F,O,U;switch(X.prototype._updateOptions.call(this,A),A){case"fontFamily":case"fontSize":(R=this._renderService)===null||R===void 0||R.clear(),(F=this._charSizeService)===null||F===void 0||F.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(O=this.viewport)===null||O===void 0||O.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new d.AccessibilityManager(this,this._renderService)):((U=this._accessibilityManager)===null||U===void 0||U.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},L.prototype._onTextAreaFocus=function(A){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[I"),this.updateCursorStyle(A),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},L.prototype.blur=function(){var A;return(A=this.textarea)===null||A===void 0?void 0:A.blur()},L.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},L.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var A=this.buffer.ybase+this.buffer.y,R=this.buffer.lines.get(A);if(R){var F=Math.min(this.buffer.x,this.cols-1),O=this._renderService.dimensions.actualCellHeight,U=R.getWidth(F),z=this._renderService.dimensions.actualCellWidth*U,ee=this.buffer.y*this._renderService.dimensions.actualCellHeight,re=F*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=re+"px",this.textarea.style.top=ee+"px",this.textarea.style.width=z+"px",this.textarea.style.height=O+"px",this.textarea.style.lineHeight=O+"px",this.textarea.style.zIndex="-5"}}},L.prototype._initGlobal=function(){var A=this;this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",function(F){A.hasSelection()&&(0,m.copyHandler)(F,A._selectionService)}));var R=function(F){return(0,m.handlePasteEvent)(F,A.textarea,A.coreService)};this.register((0,e.addDisposableDomListener)(this.textarea,"paste",R)),this.register((0,e.addDisposableDomListener)(this.element,"paste",R)),t.isFirefox?this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(F){F.button===2&&(0,m.rightClickHandler)(F,A.textarea,A.screenElement,A._selectionService,A.options.rightClickSelectsWord)})):this.register((0,e.addDisposableDomListener)(this.element,"contextmenu",function(F){(0,m.rightClickHandler)(F,A.textarea,A.screenElement,A._selectionService,A.options.rightClickSelectsWord)})),t.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",function(F){F.button===1&&(0,m.moveTextAreaUnderMouseCursor)(F,A.textarea,A.screenElement)}))},L.prototype._bindKeys=function(){var A=this;this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",function(R){return A._keyUp(R)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",function(R){return A._keyDown(R)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",function(R){return A._keyPress(R)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",function(){return A._compositionHelper.compositionstart()})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",function(R){return A._compositionHelper.compositionupdate(R)})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",function(){return A._compositionHelper.compositionend()})),this.register((0,e.addDisposableDomListener)(this.textarea,"input",function(R){return A._inputEvent(R)},!0)),this.register(this.onRender(function(){return A._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(R){return A._queueLinkification(R.start,R.end)}))},L.prototype.open=function(A){var R=this;if(!A)throw new Error("Terminal requires a parent element.");A.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=A.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),A.appendChild(this.element);var F=V.createDocumentFragment();this._viewportElement=V.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),F.appendChild(this._viewportElement),this._viewportScrollArea=V.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=V.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=V.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),F.appendChild(this.screenElement),this.textarea=V.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",r.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,e.addDisposableDomListener)(this.textarea,"focus",function(z){return R._onTextAreaFocus(z)})),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",function(){return R._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var O=this._instantiationService.createInstance(k.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,O),this._charSizeService=this._instantiationService.createInstance(B.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new S.ColorManager(V,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(z){return R._colorManager.onOptionsChange(z)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(j.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService);var U=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,U,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(z){return R._onRender.fire(z)})),this.onResize(function(z){return R._renderService.resize(z.cols,z.rows)}),this._compositionView=V.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(F),this._soundService=this._instantiationService.createInstance(s.SoundService),this._instantiationService.setService(E.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(M.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,function(z){return R.scrollLines(z,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return R.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){R._renderService.onCursorMove(),R._syncTextArea()})),this.register(this.onResize(function(){return R._renderService.onResize(R.cols,R.rows)})),this.register(this.onBlur(function(){return R._renderService.onBlur()})),this.register(this.onFocus(function(){return R._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return R.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(o.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(z){return R.scrollLines(z.amount,z.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return R._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(z){return R._renderService.onSelectionChanged(z.start,z.end,z.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(z){R.textarea.value=z,R.textarea.focus(),R.textarea.select()})),this.register(this._onScroll.event(function(z){R.viewport.syncScrollArea(),R._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",function(){return R._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(c.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return R._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(z){return R._selectionService.onMouseDown(z)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new d.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},L.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(n.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(g.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},L.prototype._setTheme=function(A){var R,F,O;this._theme=A,(R=this._colorManager)===null||R===void 0||R.setTheme(A),(F=this._renderService)===null||F===void 0||F.setColors(this._colorManager.colors),(O=this.viewport)===null||O===void 0||O.onThemeChange(this._colorManager.colors)},L.prototype.bindMouse=function(){var A=this,R=this,F=this.element;function O(q){var ne,ce,ue=R._mouseService.getRawByteCoords(q,R.screenElement,R.cols,R.rows);if(!ue)return!1;switch(q.overrideType||q.type){case"mousemove":ce=32,q.buttons===void 0?(ne=3,q.button!==void 0&&(ne=q.button<3?q.button:3)):ne=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":ce=0,ne=q.button<3?q.button:3;break;case"mousedown":ce=1,ne=q.button<3?q.button:3;break;case"wheel":q.deltaY!==0&&(ce=q.deltaY<0?0:1),ne=4;break;default:return!1}return!(ce===void 0||ne===void 0||ne>4)&&R.coreMouseService.triggerMouseEvent({col:ue.x-33,row:ue.y-33,button:ne,action:ce,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}var U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},z=function(q){return O(q),q.buttons||(A._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&A._document.removeEventListener("mousemove",U.mousedrag)),A.cancel(q)},ee=function(q){return O(q),A.cancel(q,!0)},re=function(q){q.buttons&&O(q)},oe=function(q){q.buttons||O(q)};this.register(this.coreMouseService.onProtocolChange(function(q){q?(A.optionsService.options.logLevel==="debug"&&A._logService.debug("Binding to mouse events:",A.coreMouseService.explainEvents(q)),A.element.classList.add("enable-mouse-events"),A._selectionService.disable()):(A._logService.debug("Unbinding from mouse events."),A.element.classList.remove("enable-mouse-events"),A._selectionService.enable()),8&q?U.mousemove||(F.addEventListener("mousemove",oe),U.mousemove=oe):(F.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&q?U.wheel||(F.addEventListener("wheel",ee,{passive:!1}),U.wheel=ee):(F.removeEventListener("wheel",U.wheel),U.wheel=null),2&q?U.mouseup||(U.mouseup=z):(A._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&q?U.mousedrag||(U.mousedrag=re):(A._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(F,"mousedown",function(q){if(q.preventDefault(),A.focus(),A.coreMouseService.areMouseEventsActive&&!A._selectionService.shouldForceSelection(q))return O(q),U.mouseup&&A._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&A._document.addEventListener("mousemove",U.mousedrag),A.cancel(q)})),this.register((0,e.addDisposableDomListener)(F,"wheel",function(q){if(!U.wheel){if(!A.buffer.hasScrollback){var ne=A.viewport.getLinesScrolled(q);if(ne===0)return;for(var ce=p.C0.ESC+(A.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B"),ue="",Ee=0;Ee<Math.abs(ne);Ee++)ue+=ce;return A.coreService.triggerDataEvent(ue,!0),A.cancel(q,!0)}return A.viewport.onWheel(q)?A.cancel(q):void 0}},{passive:!1})),this.register((0,e.addDisposableDomListener)(F,"touchstart",function(q){if(!A.coreMouseService.areMouseEventsActive)return A.viewport.onTouchStart(q),A.cancel(q)},{passive:!0})),this.register((0,e.addDisposableDomListener)(F,"touchmove",function(q){if(!A.coreMouseService.areMouseEventsActive)return A.viewport.onTouchMove(q)?void 0:A.cancel(q)},{passive:!1}))},L.prototype.refresh=function(A,R){var F;(F=this._renderService)===null||F===void 0||F.refreshRows(A,R)},L.prototype._queueLinkification=function(A,R){var F;(F=this.linkifier)===null||F===void 0||F.linkifyRows(A,R)},L.prototype.updateCursorStyle=function(A){var R;((R=this._selectionService)===null||R===void 0?void 0:R.shouldColumnSelect(A))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},L.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},L.prototype.scrollLines=function(A,R,F){F===void 0&&(F=0),X.prototype.scrollLines.call(this,A,R,F),this.refresh(0,this.rows-1)},L.prototype.paste=function(A){(0,m.paste)(A,this.textarea,this.coreService)},L.prototype.attachCustomKeyEventHandler=function(A){this._customKeyEventHandler=A},L.prototype.registerLinkMatcher=function(A,R,F){var O=this.linkifier.registerLinkMatcher(A,R,F);return this.refresh(0,this.rows-1),O},L.prototype.deregisterLinkMatcher=function(A){this.linkifier.deregisterLinkMatcher(A)&&this.refresh(0,this.rows-1)},L.prototype.registerLinkProvider=function(A){return this.linkifier2.registerLinkProvider(A)},L.prototype.registerCharacterJoiner=function(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var R=this._characterJoinerService.register(A);return this.refresh(0,this.rows-1),R},L.prototype.deregisterCharacterJoiner=function(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(A)&&this.refresh(0,this.rows-1)},Object.defineProperty(L.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),L.prototype.addMarker=function(A){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+A)},L.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},L.prototype.select=function(A,R,F){this._selectionService.setSelection(A,R,F)},L.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},L.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},L.prototype.clearSelection=function(){var A;(A=this._selectionService)===null||A===void 0||A.clearSelection()},L.prototype.selectAll=function(){var A;(A=this._selectionService)===null||A===void 0||A.selectAll()},L.prototype.selectLines=function(A,R){var F;(F=this._selectionService)===null||F===void 0||F.selectLines(A,R)},L.prototype._keyDown=function(A){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(!this._compositionHelper.keydown(A))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;A.key!=="Dead"&&A.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var R=(0,b.evaluateKeyboardEvent)(A,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(A),R.type===3||R.type===2){var F=this.rows-1;return this.scrollLines(R.type===2?-F:F),this.cancel(A,!0)}return R.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,A)||(R.cancel&&this.cancel(A,!0),!R.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(R.key!==p.C0.ETX&&R.key!==p.C0.CR||(this.textarea.value=""),this._onKey.fire({key:R.key,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(R.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(A,!0))))},L.prototype._isThirdLevelShift=function(A,R){var F=A.isMac&&!this.options.macOptionIsMeta&&R.altKey&&!R.ctrlKey&&!R.metaKey||A.isWindows&&R.altKey&&R.ctrlKey&&!R.metaKey||A.isWindows&&R.getModifierState("AltGraph");return R.type==="keypress"?F:F&&(!R.keyCode||R.keyCode>47)},L.prototype._keyUp=function(A){this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1||(function(R){return R.keyCode===16||R.keyCode===17||R.keyCode===18}(A)||this.focus(),this.updateCursorStyle(A),this._keyPressHandled=!1)},L.prototype._keyPress=function(A){var R;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(this.cancel(A),A.charCode)R=A.charCode;else if(A.which===null||A.which===void 0)R=A.keyCode;else{if(A.which===0||A.charCode===0)return!1;R=A.which}return!(!R||(A.altKey||A.ctrlKey||A.metaKey)&&!this._isThirdLevelShift(this.browser,A)||(R=String.fromCharCode(R),this._onKey.fire({key:R,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(R,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},L.prototype._inputEvent=function(A){if(A.data&&A.inputType==="insertText"&&!A.composed&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var R=A.data;return this.coreService.triggerDataEvent(R,!0),this.cancel(A),!0}return!1},L.prototype.bell=function(){var A;this._soundBell()&&((A=this._soundService)===null||A===void 0||A.playBellSound()),this._onBell.fire()},L.prototype.resize=function(A,R){A!==this.cols||R!==this.rows?X.prototype.resize.call(this,A,R):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},L.prototype._afterResize=function(A,R){var F,O;(F=this._charSizeService)===null||F===void 0||F.measure(),(O=this.viewport)===null||O===void 0||O.syncScrollArea(!0)},L.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var A=1;A<this.rows;A++)this.buffer.lines.push(this.buffer.getBlankLine(y.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},L.prototype.reset=function(){var A,R;this.options.rows=this.rows,this.options.cols=this.cols;var F=this._customKeyEventHandler;this._setup(),X.prototype.reset.call(this),(A=this._selectionService)===null||A===void 0||A.reset(),this._customKeyEventHandler=F,this.refresh(0,this.rows-1),(R=this.viewport)===null||R===void 0||R.syncScrollArea()},L.prototype.clearTextureAtlas=function(){var A;(A=this._renderService)===null||A===void 0||A.clearTextureAtlas()},L.prototype._reportFocus=function(){var A;((A=this.element)===null||A===void 0?void 0:A.classList.contains("focus"))?this.coreService.triggerDataEvent(p.C0.ESC+"[I"):this.coreService.triggerDataEvent(p.C0.ESC+"[O")},L.prototype._reportWindowsOptions=function(A){if(this._renderService)switch(A){case i.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var R=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),F=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(p.C0.ESC+"[4;"+F+";"+R+"t");break;case i.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var O=this._renderService.dimensions.scaledCellWidth.toFixed(0),U=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(p.C0.ESC+"[6;"+U+";"+O+"t")}},L.prototype.cancel=function(A,R){if(this.options.cancelEvents||R)return A.preventDefault(),A.stopPropagation(),!1},L.prototype._visualBell=function(){return!1},L.prototype._soundBell=function(){return this.options.bellStyle==="sound"},L}(T.CoreTerminal);a.Terminal=G},9924:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0;var v=function(){function u(_,f){f===void 0&&(f=1e3),this._renderCallback=_,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return u.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},u.prototype.refresh=function(_,f,h){var m=this;this._rowCount=h,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;var p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){var i=p-this._lastRefreshMs,n=this._debounceThresholdMS-i;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){m._lastRefreshMs=Date.now(),m._innerRefresh(),m._additionalRefreshRequested=!1,m._refreshTimeoutID=void 0},n)}},u.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(_,f)}},u}();a.TimeBasedDebouncer=v},1680:function(I,a,v){var u,_=this&&this.__extends||(u=function(o,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},u(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}u(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(o,t,e,r){var s,c=arguments.length,d=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,e,r);else for(var g=o.length-1;g>=0;g--)(s=o[g])&&(d=(c<3?s(d):c>3?s(t,e,d):s(t,e))||d);return c>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;var m=v(844),p=v(3656),i=v(4725),n=v(2585),l=function(o){function t(e,r,s,c,d,g,b,C){var y=o.call(this)||this;return y._scrollLines=e,y._viewportElement=r,y._scrollArea=s,y._element=c,y._bufferService=d,y._optionsService=g,y._charSizeService=b,y._renderService=C,y.scrollBarWidth=0,y._currentRowHeight=0,y._currentScaledCellHeight=0,y._lastRecordedBufferLength=0,y._lastRecordedViewportHeight=0,y._lastRecordedBufferHeight=0,y._lastTouchY=0,y._lastScrollTop=0,y._lastHadScrollBar=!1,y._wheelPartialScroll=0,y._refreshAnimationFrame=null,y._ignoreNextScrollEvent=!1,y.scrollBarWidth=y._viewportElement.offsetWidth-y._scrollArea.offsetWidth||15,y._lastHadScrollBar=!0,y.register((0,p.addDisposableDomListener)(y._viewportElement,"scroll",y._onScroll.bind(y))),y._activeBuffer=y._bufferService.buffer,y.register(y._bufferService.buffers.onBufferActivate(function(S){return y._activeBuffer=S.activeBuffer})),y._renderDimensions=y._renderService.dimensions,y.register(y._renderService.onDimensionsChange(function(S){return y._renderDimensions=S})),setTimeout(function(){return y.syncScrollArea()},0),y}return _(t,o),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var r=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return r._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var s=window.getComputedStyle(this._element),c=parseInt(s.paddingLeft)+parseInt(s.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?c:0)).toString()+"px",this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(e):this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(r)}},t.prototype._bubbleScroll=function(e,r){var s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&s<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var r=this._getPixelsScrolled(e);return r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},t.prototype._getPixelsScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r},t.prototype.getLinesScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r},t.prototype._applyScrollModifier=function(e,r){var s=this._optionsService.options.fastScrollModifier;return s==="alt"&&r.altKey||s==="ctrl"&&r.ctrlKey||s==="shift"&&r.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var r=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},f([h(4,n.IBufferService),h(5,n.IOptionsService),h(6,i.ICharSizeService),h(7,i.IRenderService)],t)}(m.Disposable);a.Viewport=l},2950:function(I,a,v){var u=this&&this.__decorate||function(p,i,n,l){var o,t=arguments.length,e=t<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(p,i,n,l);else for(var r=p.length-1;r>=0;r--)(o=p[r])&&(e=(t<3?o(e):t>3?o(i,n,e):o(i,n))||e);return t>3&&e&&Object.defineProperty(i,n,e),e},_=this&&this.__param||function(p,i){return function(n,l){i(n,l,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;var f=v(4725),h=v(2585),m=function(){function p(i,n,l,o,t,e){this._textarea=i,this._compositionView=n,this._bufferService=l,this._optionsService=o,this._coreService=t,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(p.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),p.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},p.prototype.compositionupdate=function(i){var n=this;this._compositionView.textContent=i.data,this.updateCompositionElements(),setTimeout(function(){n._compositionPosition.end=n._textarea.value.length},0)},p.prototype.compositionend=function(){this._finalizeComposition(!0)},p.prototype.keydown=function(i){if(this._isComposing||this._isSendingComposition){if(i.keyCode===229||i.keyCode===16||i.keyCode===17||i.keyCode===18)return!1;this._finalizeComposition(!1)}return i.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},p.prototype._finalizeComposition=function(i){var n=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,i){var l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(n._isSendingComposition){n._isSendingComposition=!1;var t;l.start+=n._dataAlreadySent.length,(t=n._isComposing?n._textarea.value.substring(l.start,l.end):n._textarea.value.substring(l.start)).length>0&&n._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;var o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}},p.prototype._handleAnyTextareaChanges=function(){var i=this,n=this._textarea.value;setTimeout(function(){if(!i._isComposing){var l=i._textarea.value.replace(n,"");l.length>0&&(i._dataAlreadySent=l,i._coreService.triggerDataEvent(l,!0))}},0)},p.prototype.updateCompositionElements=function(i){var n=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.actualCellHeight,t=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=l*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var r=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}i||setTimeout(function(){return n.updateCompositionElements(!0)},0)}},u([_(2,h.IBufferService),_(3,h.IOptionsService),_(4,h.ICoreService),_(5,f.IRenderService)],p)}();a.CompositionHelper=m},9806:(I,a)=>{function v(u,_){var f=_.getBoundingClientRect();return[u.clientX-f.left,u.clientY-f.top]}Object.defineProperty(a,"__esModule",{value:!0}),a.getRawByteCoords=a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=v,a.getCoords=function(u,_,f,h,m,p,i,n){if(m){var l=v(u,_);if(l)return l[0]=Math.ceil((l[0]+(n?p/2:0))/p),l[1]=Math.ceil(l[1]/i),l[0]=Math.min(Math.max(l[0],1),f+(n?1:0)),l[1]=Math.min(Math.max(l[1],1),h),l}},a.getRawByteCoords=function(u){if(u)return{x:u[0]+32,y:u[1]+32}}},9504:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;var u=v(2584);function _(n,l,o,t){var e=n-f(o,n),r=l-f(o,l),s=Math.abs(e-r)-function(c,d,g){for(var b=0,C=c-f(g,c),y=d-f(g,d),S=0;S<Math.abs(C-y);S++){var x=h(c,d)==="A"?-1:1,E=g.buffer.lines.get(C+x*S);(E==null?void 0:E.isWrapped)&&b++}return b}(n,l,o);return i(s,p(h(n,l),t))}function f(n,l){for(var o=0,t=n.buffer.lines.get(l),e=t==null?void 0:t.isWrapped;e&&l>=0&&l<n.rows;)o++,e=(t=n.buffer.lines.get(--l))==null?void 0:t.isWrapped;return o}function h(n,l){return n>l?"A":"B"}function m(n,l,o,t,e,r){for(var s=n,c=l,d="";s!==o||c!==t;)s+=e?1:-1,e&&s>r.cols-1?(d+=r.buffer.translateBufferLineToString(c,!1,n,s),s=0,n=0,c++):!e&&s<0&&(d+=r.buffer.translateBufferLineToString(c,!1,0,n+1),n=s=r.cols-1,c--);return d+r.buffer.translateBufferLineToString(c,!1,n,s)}function p(n,l){var o=l?"O":"[";return u.C0.ESC+o+n}function i(n,l){n=Math.floor(n);for(var o="",t=0;t<n;t++)o+=l;return o}a.moveToCellSequence=function(n,l,o,t){var e,r=o.buffer.x,s=o.buffer.y;if(!o.buffer.hasScrollback)return function(d,g,b,C,y,S){return _(g,C,y,S).length===0?"":i(m(d,g,d,g-f(y,g),!1,y).length,p("D",S))}(r,s,0,l,o,t)+_(s,l,o,t)+function(d,g,b,C,y,S){var x;x=_(g,C,y,S).length>0?C-f(y,C):g;var E=C,B=function(M,w,k,T,D,j){var W;return W=_(k,T,D,j).length>0?T-f(D,T):w,M<k&&W<=T||M>=k&&W<T?"C":"D"}(d,g,b,C,y,S);return i(m(d,x,b,E,B==="C",y).length,p(B,S))}(r,s,n,l,o,t);if(s===l)return e=r>n?"D":"C",i(Math.abs(r-n),p(e,t));e=s>l?"D":"C";var c=Math.abs(s-l);return i(function(d,g){return g.cols-d}(s>l?n:r,o)+(c-1)*o.cols+1+((s>l?r:n)-1),p(e,t))}},1546:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseRenderLayer=void 0;var u=v(643),_=v(8803),f=v(1420),h=v(3734),m=v(1752),p=v(4774),i=v(9631),n=v(8978),l=function(){function o(t,e,r,s,c,d,g,b){this._container=t,this._alpha=s,this._colors=c,this._rendererId=d,this._bufferService=g,this._optionsService=b,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return o.prototype.dispose=function(){var t;(0,i.removeElementFromParent)(this._canvas),(t=this._charAtlas)===null||t===void 0||t.dispose()},o.prototype._initCanvas=function(){this._ctx=(0,m.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},o.prototype.onOptionsChanged=function(){},o.prototype.onBlur=function(){},o.prototype.onFocus=function(){},o.prototype.onCursorMove=function(){},o.prototype.onGridChanged=function(t,e){},o.prototype.onSelectionChanged=function(t,e,r){},o.prototype.setColors=function(t){this._refreshCharAtlas(t)},o.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},o.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,f.acquireCharAtlas)(this._optionsService.options,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},o.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},o.prototype.clearTextureAtlas=function(){var t;(t=this._charAtlas)===null||t===void 0||t.clear()},o.prototype._fillCells=function(t,e,r,s){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,s*this._scaledCellHeight)},o.prototype._fillMiddleLineAtCells=function(t,e,r){r===void 0&&(r=1);var s=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-s-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillBottomLineAtCells=function(t,e,r){r===void 0&&(r=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillLeftLineAtCell=function(t,e,r){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},o.prototype._strokeRectAtCell=function(t,e,r,s){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,s*this._scaledCellHeight-window.devicePixelRatio)},o.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},o.prototype._clearCells=function(t,e,r,s){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,s*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,s*this._scaledCellHeight))},o.prototype._fillCharTrueColor=function(t,e,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipRow(r);var s=!1;this._optionsService.options.customGlyphs!==!1&&(s=(0,n.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),s||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},o.prototype._drawChars=function(t,e,r){var s,c,d,g=this._getContrastColor(t);g||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,e,r,g):(t.isInverse()?(c=t.isBgDefault()?_.INVERTED_DEFAULT_COLOR:t.getBgColor(),d=t.isFgDefault()?_.INVERTED_DEFAULT_COLOR:t.getFgColor()):(d=t.isBgDefault()?u.DEFAULT_COLOR:t.getBgColor(),c=t.isFgDefault()?u.DEFAULT_COLOR:t.getFgColor()),c+=this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&c<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||u.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||u.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=d,this._currentGlyphIdentifier.fg=c,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),((s=this._charAtlas)===null||s===void 0?void 0:s.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(t,e,r))},o.prototype._drawUncachedChars=function(t,e,r,s){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline=_.TEXT_BASELINE,t.isInverse())if(s)this._ctx.fillStyle=s.css;else if(t.isBgDefault())this._ctx.fillStyle=p.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var c=t.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&c<8&&(c+=8),this._ctx.fillStyle=this._colors.ansi[c].css}else if(s)this._ctx.fillStyle=s.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var d=t.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&d<8&&(d+=8),this._ctx.fillStyle=this._colors.ansi[d].css}this._clipRow(r),t.isDim()&&(this._ctx.globalAlpha=_.DIM_OPACITY);var g=!1;this._optionsService.options.customGlyphs!==!1&&(g=(0,n.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),g||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},o.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},o.prototype._getFont=function(t,e){return(e?"italic":"")+" "+(t?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},o.prototype._getContrastColor=function(t){if(this._optionsService.options.minimumContrastRatio!==1){var e=this._colors.contrastCache.getColor(t.bg,t.fg);if(e!==void 0)return e||void 0;var r=t.getFgColor(),s=t.getFgColorMode(),c=t.getBgColor(),d=t.getBgColorMode(),g=!!t.isInverse(),b=!!t.isInverse();if(g){var C=r;r=c,c=C;var y=s;s=d,d=y}var S=this._resolveBackgroundRgba(d,c,g),x=this._resolveForegroundRgba(s,r,g,b),E=p.rgba.ensureContrastRatio(S,x,this._optionsService.options.minimumContrastRatio);if(E){var B={css:p.channels.toCss(E>>24&255,E>>16&255,E>>8&255),rgba:E};return this._colors.contrastCache.setColor(t.bg,t.fg,B),B}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},o.prototype._resolveBackgroundRgba=function(t,e,r){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},o.prototype._resolveForegroundRgba=function(t,e,r,s){switch(t){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&s&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},o}();a.BaseRenderLayer=l},2512:function(I,a,v){var u,_=this&&this.__extends||(u=function(e,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])},u(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=e}u(e,r),e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}),f=this&&this.__decorate||function(e,r,s,c){var d,g=arguments.length,b=g<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,s):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,r,s,c);else for(var C=e.length-1;C>=0;C--)(d=e[C])&&(b=(g<3?d(b):g>3?d(r,s,b):d(r,s))||b);return g>3&&b&&Object.defineProperty(r,s,b),b},h=this&&this.__param||function(e,r){return function(s,c){r(s,c,e)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CursorRenderLayer=void 0;var m=v(1546),p=v(511),i=v(2585),n=v(4725),l=600,o=function(e){function r(s,c,d,g,b,C,y,S,x){var E=e.call(this,s,"cursor",c,!0,d,g,C,y)||this;return E._onRequestRedraw=b,E._coreService=S,E._coreBrowserService=x,E._cell=new p.CellData,E._state={x:0,y:0,isFocused:!1,style:"",width:0},E._cursorRenderers={bar:E._renderBarCursor.bind(E),block:E._renderBlockCursor.bind(E),underline:E._renderUnderlineCursor.bind(E)},E}return _(r,e),r.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},r.prototype.resize=function(s){e.prototype.resize.call(this,s),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){var s;this._clearCursor(),(s=this._cursorBlinkStateManager)===null||s===void 0||s.restartBlinkAnimation(),this.onOptionsChanged()},r.prototype.onBlur=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var s,c=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new t(this._coreBrowserService.isFocused,function(){c._render(!0)})):((s=this._cursorBlinkStateManager)===null||s===void 0||s.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.restartBlinkAnimation()},r.prototype.onGridChanged=function(s,c){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(s){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var c=this._bufferService.buffer.ybase+this._bufferService.buffer.y,d=c-this._bufferService.buffer.ydisp;if(d<0||d>=this._bufferService.rows)this._clearCursor();else{var g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(c).loadCell(g,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var b=this._optionsService.options.cursorStyle;return b&&b!=="block"?this._cursorRenderers[b](g,d,this._cell):this._renderBlurCursor(g,d,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=d,this._state.isFocused=!1,this._state.style=b,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===g&&this._state.y===d&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](g,d,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=d,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(s,c,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(s,c,this._optionsService.options.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(s,c,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(s,c,d.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(d,s,c),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(s,c,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(s,c),this._ctx.restore()},r.prototype._renderBlurCursor=function(s,c,d){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(s,c,d.getWidth(),1),this._ctx.restore()},f([h(5,i.IBufferService),h(6,i.IOptionsService),h(7,i.ICoreService),h(8,n.ICoreBrowserService)],r)}(m.BaseRenderLayer);a.CursorRenderLayer=o;var t=function(){function e(r,s){this._renderCallback=s,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},e.prototype._restartInterval=function(r){var s=this;r===void 0&&(r=l),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(s._animationTimeRestarted){var c=l-(Date.now()-s._animationTimeRestarted);if(s._animationTimeRestarted=void 0,c>0)return void s._restartInterval(c)}s.isCursorVisible=!1,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0}),s._blinkInterval=window.setInterval(function(){if(s._animationTimeRestarted){var d=l-(Date.now()-s._animationTimeRestarted);return s._animationTimeRestarted=void 0,void s._restartInterval(d)}s.isCursorVisible=!s.isCursorVisible,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0})},l)},r)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(I,a,v)=>{var u,_,f,h,m,p,i,n,l,o,t,e,r,s,c,d,g,b,C,y,S,x,E,B,M,w,k,T,D,j,W,V,G,X,L,A,R,F,O,U,z,ee,re,oe,q,ne,ce,ue,Ee,Bt,Dt,Pt,It,Ht,Ft,jt,Wt,Ut,qt,Nt,zt,Kt,Pe,Ie,He,Fe,je,We,Ue,qe,Ne,ze,Ke,Ve,Ge,Xe,Ye,Ze,Je,$e,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,_t,dt,pt,vt,gt,yt,mt,St,Ct,bt,wt,Lt,Et,xt,kt,Mt,At,Rt,Vt,Gt,Xt,Yt,Zt,Jt,$t,Qt,er,tr,rr,ir,nr,or,sr,ar;Object.defineProperty(a,"__esModule",{value:!0}),a.tryDrawCustomChar=a.boxDrawingDefinitions=a.blockElementDefinitions=void 0;var ur=v(1752);a.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Lr={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};a.boxDrawingDefinitions={"\u2500":(u={},u[1]="M0,.5 L1,.5",u),"\u2501":(_={},_[3]="M0,.5 L1,.5",_),"\u2502":(f={},f[1]="M.5,0 L.5,1",f),"\u2503":(h={},h[3]="M.5,0 L.5,1",h),"\u250C":(m={},m[1]="M0.5,1 L.5,.5 L1,.5",m),"\u250F":(p={},p[3]="M0.5,1 L.5,.5 L1,.5",p),"\u2510":(i={},i[1]="M0,.5 L.5,.5 L.5,1",i),"\u2513":(n={},n[3]="M0,.5 L.5,.5 L.5,1",n),"\u2514":(l={},l[1]="M.5,0 L.5,.5 L1,.5",l),"\u2517":(o={},o[3]="M.5,0 L.5,.5 L1,.5",o),"\u2518":(t={},t[1]="M.5,0 L.5,.5 L0,.5",t),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(r={},r[1]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"\u2523":(s={},s[3]="M.5,0 L.5,1 M.5,.5 L1,.5",s),"\u2524":(c={},c[1]="M.5,0 L.5,1 M.5,.5 L0,.5",c),"\u252B":(d={},d[3]="M.5,0 L.5,1 M.5,.5 L0,.5",d),"\u252C":(g={},g[1]="M0,.5 L1,.5 M.5,.5 L.5,1",g),"\u2533":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"\u2534":(C={},C[1]="M0,.5 L1,.5 M.5,.5 L.5,0",C),"\u253B":(y={},y[3]="M0,.5 L1,.5 M.5,.5 L.5,0",y),"\u253C":(S={},S[1]="M0,.5 L1,.5 M.5,0 L.5,1",S),"\u254B":(x={},x[3]="M0,.5 L1,.5 M.5,0 L.5,1",x),"\u2574":(E={},E[1]="M.5,.5 L0,.5",E),"\u2578":(B={},B[3]="M.5,.5 L0,.5",B),"\u2575":(M={},M[1]="M.5,.5 L.5,0",M),"\u2579":(w={},w[3]="M.5,.5 L.5,0",w),"\u2576":(k={},k[1]="M.5,.5 L1,.5",k),"\u257A":(T={},T[3]="M.5,.5 L1,.5",T),"\u2577":(D={},D[1]="M.5,.5 L.5,1",D),"\u257B":(j={},j[3]="M.5,.5 L.5,1",j),"\u2550":(W={},W[1]=function(H,P){return"M0,"+(.5-P)+" L1,"+(.5-P)+" M0,"+(.5+P)+" L1,"+(.5+P)},W),"\u2551":(V={},V[1]=function(H,P){return"M"+(.5-H)+",0 L"+(.5-H)+",1 M"+(.5+H)+",0 L"+(.5+H)+",1"},V),"\u2552":(G={},G[1]=function(H,P){return"M.5,1 L.5,"+(.5-P)+" L1,"+(.5-P)+" M.5,"+(.5+P)+" L1,"+(.5+P)},G),"\u2553":(X={},X[1]=function(H,P){return"M"+(.5-H)+",1 L"+(.5-H)+",.5 L1,.5 M"+(.5+H)+",.5 L"+(.5+H)+",1"},X),"\u2554":(L={},L[1]=function(H,P){return"M1,"+(.5-P)+" L"+(.5-H)+","+(.5-P)+" L"+(.5-H)+",1 M1,"+(.5+P)+" L"+(.5+H)+","+(.5+P)+" L"+(.5+H)+",1"},L),"\u2555":(A={},A[1]=function(H,P){return"M0,"+(.5-P)+" L.5,"+(.5-P)+" L.5,1 M0,"+(.5+P)+" L.5,"+(.5+P)},A),"\u2556":(R={},R[1]=function(H,P){return"M"+(.5+H)+",1 L"+(.5+H)+",.5 L0,.5 M"+(.5-H)+",.5 L"+(.5-H)+",1"},R),"\u2557":(F={},F[1]=function(H,P){return"M0,"+(.5+P)+" L"+(.5-H)+","+(.5+P)+" L"+(.5-H)+",1 M0,"+(.5-P)+" L"+(.5+H)+","+(.5-P)+" L"+(.5+H)+",1"},F),"\u2558":(O={},O[1]=function(H,P){return"M.5,0 L.5,"+(.5+P)+" L1,"+(.5+P)+" M.5,"+(.5-P)+" L1,"+(.5-P)},O),"\u2559":(U={},U[1]=function(H,P){return"M1,.5 L"+(.5-H)+",.5 L"+(.5-H)+",0 M"+(.5+H)+",.5 L"+(.5+H)+",0"},U),"\u255A":(z={},z[1]=function(H,P){return"M1,"+(.5-P)+" L"+(.5+H)+","+(.5-P)+" L"+(.5+H)+",0 M1,"+(.5+P)+" L"+(.5-H)+","+(.5+P)+" L"+(.5-H)+",0"},z),"\u255B":(ee={},ee[1]=function(H,P){return"M0,"+(.5+P)+" L.5,"+(.5+P)+" L.5,0 M0,"+(.5-P)+" L.5,"+(.5-P)},ee),"\u255C":(re={},re[1]=function(H,P){return"M0,.5 L"+(.5+H)+",.5 L"+(.5+H)+",0 M"+(.5-H)+",.5 L"+(.5-H)+",0"},re),"\u255D":(oe={},oe[1]=function(H,P){return"M0,"+(.5-P)+" L"+(.5-H)+","+(.5-P)+" L"+(.5-H)+",0 M0,"+(.5+P)+" L"+(.5+H)+","+(.5+P)+" L"+(.5+H)+",0"},oe),"\u255E":(q={},q[1]=function(H,P){return"M.5,0 L.5,1 M.5,"+(.5-P)+" L1,"+(.5-P)+" M.5,"+(.5+P)+" L1,"+(.5+P)},q),"\u255F":(ne={},ne[1]=function(H,P){return"M"+(.5-H)+",0 L"+(.5-H)+",1 M"+(.5+H)+",0 L"+(.5+H)+",1 M"+(.5+H)+",.5 L1,.5"},ne),"\u2560":(ce={},ce[1]=function(H,P){return"M"+(.5-H)+",0 L"+(.5-H)+",1 M1,"+(.5+P)+" L"+(.5+H)+","+(.5+P)+" L"+(.5+H)+",1 M1,"+(.5-P)+" L"+(.5+H)+","+(.5-P)+" L"+(.5+H)+",0"},ce),"\u2561":(ue={},ue[1]=function(H,P){return"M.5,0 L.5,1 M0,"+(.5-P)+" L.5,"+(.5-P)+" M0,"+(.5+P)+" L.5,"+(.5+P)},ue),"\u2562":(Ee={},Ee[1]=function(H,P){return"M0,.5 L"+(.5-H)+",.5 M"+(.5-H)+",0 L"+(.5-H)+",1 M"+(.5+H)+",0 L"+(.5+H)+",1"},Ee),"\u2563":(Bt={},Bt[1]=function(H,P){return"M"+(.5+H)+",0 L"+(.5+H)+",1 M0,"+(.5+P)+" L"+(.5-H)+","+(.5+P)+" L"+(.5-H)+",1 M0,"+(.5-P)+" L"+(.5-H)+","+(.5-P)+" L"+(.5-H)+",0"},Bt),"\u2564":(Dt={},Dt[1]=function(H,P){return"M0,"+(.5-P)+" L1,"+(.5-P)+" M0,"+(.5+P)+" L1,"+(.5+P)+" M.5,"+(.5+P)+" L.5,1"},Dt),"\u2565":(Pt={},Pt[1]=function(H,P){return"M0,.5 L1,.5 M"+(.5-H)+",.5 L"+(.5-H)+",1 M"+(.5+H)+",.5 L"+(.5+H)+",1"},Pt),"\u2566":(It={},It[1]=function(H,P){return"M0,"+(.5-P)+" L1,"+(.5-P)+" M0,"+(.5+P)+" L"+(.5-H)+","+(.5+P)+" L"+(.5-H)+",1 M1,"+(.5+P)+" L"+(.5+H)+","+(.5+P)+" L"+(.5+H)+",1"},It),"\u2567":(Ht={},Ht[1]=function(H,P){return"M.5,0 L.5,"+(.5-P)+" M0,"+(.5-P)+" L1,"+(.5-P)+" M0,"+(.5+P)+" L1,"+(.5+P)},Ht),"\u2568":(Ft={},Ft[1]=function(H,P){return"M0,.5 L1,.5 M"+(.5-H)+",.5 L"+(.5-H)+",0 M"+(.5+H)+",.5 L"+(.5+H)+",0"},Ft),"\u2569":(jt={},jt[1]=function(H,P){return"M0,"+(.5+P)+" L1,"+(.5+P)+" M0,"+(.5-P)+" L"+(.5-H)+","+(.5-P)+" L"+(.5-H)+",0 M1,"+(.5-P)+" L"+(.5+H)+","+(.5-P)+" L"+(.5+H)+",0"},jt),"\u256A":(Wt={},Wt[1]=function(H,P){return"M.5,0 L.5,1 M0,"+(.5-P)+" L1,"+(.5-P)+" M0,"+(.5+P)+" L1,"+(.5+P)},Wt),"\u256B":(Ut={},Ut[1]=function(H,P){return"M0,.5 L1,.5 M"+(.5-H)+",0 L"+(.5-H)+",1 M"+(.5+H)+",0 L"+(.5+H)+",1"},Ut),"\u256C":(qt={},qt[1]=function(H,P){return"M0,"+(.5+P)+" L"+(.5-H)+","+(.5+P)+" L"+(.5-H)+",1 M1,"+(.5+P)+" L"+(.5+H)+","+(.5+P)+" L"+(.5+H)+",1 M0,"+(.5-P)+" L"+(.5-H)+","+(.5-P)+" L"+(.5-H)+",0 M1,"+(.5-P)+" L"+(.5+H)+","+(.5-P)+" L"+(.5+H)+",0"},qt),"\u2571":(Nt={},Nt[1]="M1,0 L0,1",Nt),"\u2572":(zt={},zt[1]="M0,0 L1,1",zt),"\u2573":(Kt={},Kt[1]="M1,0 L0,1 M0,0 L1,1",Kt),"\u257C":(Pe={},Pe[1]="M.5,.5 L0,.5",Pe[3]="M.5,.5 L1,.5",Pe),"\u257D":(Ie={},Ie[1]="M.5,.5 L.5,0",Ie[3]="M.5,.5 L.5,1",Ie),"\u257E":(He={},He[1]="M.5,.5 L1,.5",He[3]="M.5,.5 L0,.5",He),"\u257F":(Fe={},Fe[1]="M.5,.5 L.5,1",Fe[3]="M.5,.5 L.5,0",Fe),"\u250D":(je={},je[1]="M.5,.5 L.5,1",je[3]="M.5,.5 L1,.5",je),"\u250E":(We={},We[1]="M.5,.5 L1,.5",We[3]="M.5,.5 L.5,1",We),"\u2511":(Ue={},Ue[1]="M.5,.5 L.5,1",Ue[3]="M.5,.5 L0,.5",Ue),"\u2512":(qe={},qe[1]="M.5,.5 L0,.5",qe[3]="M.5,.5 L.5,1",qe),"\u2515":(Ne={},Ne[1]="M.5,.5 L.5,0",Ne[3]="M.5,.5 L1,.5",Ne),"\u2516":(ze={},ze[1]="M.5,.5 L1,.5",ze[3]="M.5,.5 L.5,0",ze),"\u2519":(Ke={},Ke[1]="M.5,.5 L.5,0",Ke[3]="M.5,.5 L0,.5",Ke),"\u251A":(Ve={},Ve[1]="M.5,.5 L0,.5",Ve[3]="M.5,.5 L.5,0",Ve),"\u251D":(Ge={},Ge[1]="M.5,0 L.5,1",Ge[3]="M.5,.5 L1,.5",Ge),"\u251E":(Xe={},Xe[1]="M0.5,1 L.5,.5 L1,.5",Xe[3]="M.5,.5 L.5,0",Xe),"\u251F":(Ye={},Ye[1]="M.5,0 L.5,.5 L1,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2520":(Ze={},Ze[1]="M.5,.5 L1,.5",Ze[3]="M.5,0 L.5,1",Ze),"\u2521":(Je={},Je[1]="M.5,.5 L.5,1",Je[3]="M.5,0 L.5,.5 L1,.5",Je),"\u2522":($e={},$e[1]="M.5,.5 L.5,0",$e[3]="M0.5,1 L.5,.5 L1,.5",$e),"\u2525":(Qe={},Qe[1]="M.5,0 L.5,1",Qe[3]="M.5,.5 L0,.5",Qe),"\u2526":(et={},et[1]="M0,.5 L.5,.5 L.5,1",et[3]="M.5,.5 L.5,0",et),"\u2527":(tt={},tt[1]="M.5,0 L.5,.5 L0,.5",tt[3]="M.5,.5 L.5,1",tt),"\u2528":(rt={},rt[1]="M.5,.5 L0,.5",rt[3]="M.5,0 L.5,1",rt),"\u2529":(it={},it[1]="M.5,.5 L.5,1",it[3]="M.5,0 L.5,.5 L0,.5",it),"\u252A":(nt={},nt[1]="M.5,.5 L.5,0",nt[3]="M0,.5 L.5,.5 L.5,1",nt),"\u252D":(ot={},ot[1]="M0.5,1 L.5,.5 L1,.5",ot[3]="M.5,.5 L0,.5",ot),"\u252E":(st={},st[1]="M0,.5 L.5,.5 L.5,1",st[3]="M.5,.5 L1,.5",st),"\u252F":(at={},at[1]="M.5,.5 L.5,1",at[3]="M0,.5 L1,.5",at),"\u2530":(ct={},ct[1]="M0,.5 L1,.5",ct[3]="M.5,.5 L.5,1",ct),"\u2531":(lt={},lt[1]="M.5,.5 L1,.5",lt[3]="M0,.5 L.5,.5 L.5,1",lt),"\u2532":(ht={},ht[1]="M.5,.5 L0,.5",ht[3]="M0.5,1 L.5,.5 L1,.5",ht),"\u2535":(ut={},ut[1]="M.5,0 L.5,.5 L1,.5",ut[3]="M.5,.5 L0,.5",ut),"\u2536":(ft={},ft[1]="M.5,0 L.5,.5 L0,.5",ft[3]="M.5,.5 L1,.5",ft),"\u2537":(_t={},_t[1]="M.5,.5 L.5,0",_t[3]="M0,.5 L1,.5",_t),"\u2538":(dt={},dt[1]="M0,.5 L1,.5",dt[3]="M.5,.5 L.5,0",dt),"\u2539":(pt={},pt[1]="M.5,.5 L1,.5",pt[3]="M.5,0 L.5,.5 L0,.5",pt),"\u253A":(vt={},vt[1]="M.5,.5 L0,.5",vt[3]="M.5,0 L.5,.5 L1,.5",vt),"\u253D":(gt={},gt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",gt[3]="M.5,.5 L0,.5",gt),"\u253E":(yt={},yt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",yt[3]="M.5,.5 L1,.5",yt),"\u253F":(mt={},mt[1]="M.5,0 L.5,1",mt[3]="M0,.5 L1,.5",mt),"\u2540":(St={},St[1]="M0,.5 L1,.5 M.5,.5 L.5,1",St[3]="M.5,.5 L.5,0",St),"\u2541":(Ct={},Ct[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ct[3]="M.5,.5 L.5,1",Ct),"\u2542":(bt={},bt[1]="M0,.5 L1,.5",bt[3]="M.5,0 L.5,1",bt),"\u2543":(wt={},wt[1]="M0.5,1 L.5,.5 L1,.5",wt[3]="M.5,0 L.5,.5 L0,.5",wt),"\u2544":(Lt={},Lt[1]="M0,.5 L.5,.5 L.5,1",Lt[3]="M.5,0 L.5,.5 L1,.5",Lt),"\u2545":(Et={},Et[1]="M.5,0 L.5,.5 L1,.5",Et[3]="M0,.5 L.5,.5 L.5,1",Et),"\u2546":(xt={},xt[1]="M.5,0 L.5,.5 L0,.5",xt[3]="M0.5,1 L.5,.5 L1,.5",xt),"\u2547":(kt={},kt[1]="M.5,.5 L.5,1",kt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",kt),"\u2548":(Mt={},Mt[1]="M.5,.5 L.5,0",Mt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Mt),"\u2549":(At={},At[1]="M.5,.5 L1,.5",At[3]="M.5,0 L.5,1 M.5,.5 L0,.5",At),"\u254A":(Rt={},Rt[1]="M.5,.5 L0,.5",Rt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Rt),"\u254C":(Vt={},Vt[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Vt),"\u254D":(Gt={},Gt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Gt),"\u2504":(Xt={},Xt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Xt),"\u2505":(Yt={},Yt[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Yt),"\u2508":(Zt={},Zt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Zt),"\u2509":(Jt={},Jt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Jt),"\u254E":($t={},$t[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",$t),"\u254F":(Qt={},Qt[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Qt),"\u2506":(er={},er[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",er),"\u2507":(tr={},tr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",tr),"\u250A":(rr={},rr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",rr),"\u250B":(ir={},ir[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",ir),"\u256D":(nr={},nr[1]="C.5,1,.5,.5,1,.5",nr),"\u256E":(or={},or[1]="C.5,1,.5,.5,0,.5",or),"\u256F":(sr={},sr[1]="C.5,0,.5,.5,0,.5",sr),"\u2570":(ar={},ar[1]="C.5,0,.5,.5,1,.5",ar)},a.tryDrawCustomChar=function(H,P,fe,Re,Te,ie){var _e=a.blockElementDefinitions[P];if(_e)return function(se,pe,Be,De,xe,ke){for(var le=0;le<pe.length;le++){var ae=pe[le],te=xe/8,ge=ke/8;se.fillRect(Be+ae.x*te,De+ae.y*ge,ae.w*te,ae.h*ge)}}(H,_e,fe,Re,Te,ie),!0;var de=Lr[P];if(de)return function(se,pe,Be,De,xe,ke){var le,ae=fr.get(pe);ae||(ae=new Map,fr.set(pe,ae));var te=se.fillStyle;if(typeof te!="string")throw new Error('Unexpected fillStyle type "'+te+'"');var ge=ae.get(te);if(!ge){var he=pe[0].length,Se=pe.length,Ce=document.createElement("canvas");Ce.width=he,Ce.height=Se;var Tt=(0,ur.throwIfFalsy)(Ce.getContext("2d")),ye=new ImageData(he,Se),Me=void 0,be=void 0,cr=void 0,lr=void 0;if(te.startsWith("#"))Me=parseInt(te.substr(1,2),16),be=parseInt(te.substr(3,2),16),cr=parseInt(te.substr(5,2),16),lr=te.length>7&&parseInt(te.substr(7,2),16)||1;else{if(!te.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+te+'" when drawing pattern glyph');Me=(le=te.substring(5,te.length-1).split(",").map(function(kr){return parseFloat(kr)}))[0],be=le[1],cr=le[2],lr=le[3]}for(var we=0;we<Se;we++)for(var Le=0;Le<he;Le++)ye.data[4*(we*he+Le)]=Me,ye.data[4*(we*he+Le)+1]=be,ye.data[4*(we*he+Le)+2]=cr,ye.data[4*(we*he+Le)+3]=pe[we][Le]*(255*lr);Tt.putImageData(ye,0,0),ge=(0,ur.throwIfFalsy)(se.createPattern(Ce,null)),ae.set(te,ge)}se.fillStyle=ge,se.fillRect(Be,De,xe,ke)}(H,de,fe,Re,Te,ie),!0;var Oe=a.boxDrawingDefinitions[P];return!!Oe&&(function(se,pe,Be,De,xe,ke){se.strokeStyle=se.fillStyle;for(var le=0,ae=Object.entries(pe);le<ae.length;le++){var te=ae[le],ge=te[0],he=te[1];se.beginPath(),se.lineWidth=window.devicePixelRatio*Number.parseInt(ge);for(var Se=0,Ce=(typeof he=="function"?he(.15,.15/ke*xe):he).split(" ");Se<Ce.length;Se++){var Tt=Ce[Se],ye=Tt[0],Me=Er[ye];if(Me){var be=Tt.substring(1).split(",");be[0]&&be[1]&&Me(se,xr(be,xe,ke,Be,De))}else console.error('Could not find drawing instructions for "'+ye+'"')}se.stroke(),se.closePath()}}(H,Oe,fe,Re,Te,ie),!0)};var fr=new Map;function _r(H,P,fe){return fe===void 0&&(fe=0),Math.max(Math.min(H,P),fe)}var Er={C:function(H,P){return H.bezierCurveTo(P[0],P[1],P[2],P[3],P[4],P[5])},L:function(H,P){return H.lineTo(P[0],P[1])},M:function(H,P){return H.moveTo(P[0],P[1])}};function xr(H,P,fe,Re,Te){var ie=H.map(function(Oe){return parseFloat(Oe)||parseInt(Oe)});if(ie.length<2)throw new Error("Too few arguments for instruction");for(var _e=0;_e<ie.length;_e+=2)ie[_e]*=P,ie[_e]!==0&&(ie[_e]=_r(Math.round(ie[_e]+.5)-.5,P,0)),ie[_e]+=Re;for(var de=1;de<ie.length;de+=2)ie[de]*=fe,ie[de]!==0&&(ie[de]=_r(Math.round(ie[de]+.5)-.5,fe,0)),ie[de]+=Te;return ie}},3700:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GridCache=void 0;var v=function(){function u(){this.cache=[]}return u.prototype.resize=function(_,f){for(var h=0;h<_;h++){this.cache.length<=h&&this.cache.push([]);for(var m=this.cache[h].length;m<f;m++)this.cache[h].push(void 0);this.cache[h].length=f}this.cache.length=_},u.prototype.clear=function(){for(var _=0;_<this.cache.length;_++)for(var f=0;f<this.cache[_].length;f++)this.cache[_][f]=void 0},u}();a.GridCache=v},5098:function(I,a,v){var u,_=this&&this.__extends||(u=function(o,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},u(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}u(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(o,t,e,r){var s,c=arguments.length,d=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,e,r);else for(var g=o.length-1;g>=0;g--)(s=o[g])&&(d=(c<3?s(d):c>3?s(t,e,d):s(t,e))||d);return c>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.LinkRenderLayer=void 0;var m=v(1546),p=v(8803),i=v(2040),n=v(2585),l=function(o){function t(e,r,s,c,d,g,b,C){var y=o.call(this,e,"link",r,!0,s,c,b,C)||this;return d.onShowLinkUnderline(function(S){return y._onShowLinkUnderline(S)}),d.onHideLinkUnderline(function(S){return y._onHideLinkUnderline(S)}),g.onShowLinkUnderline(function(S){return y._onShowLinkUnderline(S)}),g.onHideLinkUnderline(function(S){return y._onHideLinkUnderline(S)}),y}return _(t,o),t.prototype.resize=function(e){o.prototype.resize.call(this,e),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===p.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,i.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var r=e.y1+1;r<e.y2;r++)this._fillBottomLineAtCells(0,r,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},f([h(6,n.IBufferService),h(7,n.IOptionsService)],t)}(m.BaseRenderLayer);a.LinkRenderLayer=l},3525:function(I,a,v){var u,_=this&&this.__extends||(u=function(d,g){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var y in C)Object.prototype.hasOwnProperty.call(C,y)&&(b[y]=C[y])},u(d,g)},function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function b(){this.constructor=d}u(d,g),d.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}),f=this&&this.__decorate||function(d,g,b,C){var y,S=arguments.length,x=S<3?g:C===null?C=Object.getOwnPropertyDescriptor(g,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(d,g,b,C);else for(var E=d.length-1;E>=0;E--)(y=d[E])&&(x=(S<3?y(x):S>3?y(g,b,x):y(g,b))||x);return S>3&&x&&Object.defineProperty(g,b,x),x},h=this&&this.__param||function(d,g){return function(b,C){g(b,C,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Renderer=void 0;var m=v(9596),p=v(4149),i=v(2512),n=v(5098),l=v(844),o=v(4725),t=v(2585),e=v(1420),r=v(8460),s=1,c=function(d){function g(b,C,y,S,x,E,B,M){var w=d.call(this)||this;w._colors=b,w._screenElement=C,w._bufferService=E,w._charSizeService=B,w._optionsService=M,w._id=s++,w._onRequestRedraw=new r.EventEmitter;var k=w._optionsService.options.allowTransparency;return w._renderLayers=[x.createInstance(m.TextRenderLayer,w._screenElement,0,w._colors,k,w._id),x.createInstance(p.SelectionRenderLayer,w._screenElement,1,w._colors,w._id),x.createInstance(n.LinkRenderLayer,w._screenElement,2,w._colors,w._id,y,S),x.createInstance(i.CursorRenderLayer,w._screenElement,3,w._colors,w._id,w._onRequestRedraw)],w.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},w._devicePixelRatio=window.devicePixelRatio,w._updateDimensions(),w.onOptionsChanged(),w}return _(g,d),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){for(var b=0,C=this._renderLayers;b<C.length;b++)C[b].dispose();d.prototype.dispose.call(this),(0,e.removeTerminalFromCache)(this._id)},g.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},g.prototype.setColors=function(b){this._colors=b;for(var C=0,y=this._renderLayers;C<y.length;C++){var S=y[C];S.setColors(this._colors),S.reset()}},g.prototype.onResize=function(b,C){this._updateDimensions();for(var y=0,S=this._renderLayers;y<S.length;y++)S[y].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},g.prototype.onBlur=function(){this._runOperation(function(b){return b.onBlur()})},g.prototype.onFocus=function(){this._runOperation(function(b){return b.onFocus()})},g.prototype.onSelectionChanged=function(b,C,y){y===void 0&&(y=!1),this._runOperation(function(S){return S.onSelectionChanged(b,C,y)})},g.prototype.onCursorMove=function(){this._runOperation(function(b){return b.onCursorMove()})},g.prototype.onOptionsChanged=function(){this._runOperation(function(b){return b.onOptionsChanged()})},g.prototype.clear=function(){this._runOperation(function(b){return b.reset()})},g.prototype._runOperation=function(b){for(var C=0,y=this._renderLayers;C<y.length;C++)b(y[C])},g.prototype.renderRows=function(b,C){for(var y=0,S=this._renderLayers;y<S.length;y++)S[y].onGridChanged(b,C)},g.prototype.clearTextureAtlas=function(){for(var b=0,C=this._renderLayers;b<C.length;b++)C[b].clearTextureAtlas()},g.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([h(4,t.IInstantiationService),h(5,t.IBufferService),h(6,o.ICharSizeService),h(7,t.IOptionsService)],g)}(l.Disposable);a.Renderer=c},1752:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.throwIfFalsy=void 0,a.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v}},4149:function(I,a,v){var u,_=this&&this.__extends||(u=function(n,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])},u(n,l)},function(n,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function o(){this.constructor=n}u(n,l),n.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}),f=this&&this.__decorate||function(n,l,o,t){var e,r=arguments.length,s=r<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,o):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,l,o,t);else for(var c=n.length-1;c>=0;c--)(e=n[c])&&(s=(r<3?e(s):r>3?e(l,o,s):e(l,o))||s);return r>3&&s&&Object.defineProperty(l,o,s),s},h=this&&this.__param||function(n,l){return function(o,t){l(o,t,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionRenderLayer=void 0;var m=v(1546),p=v(2585),i=function(n){function l(o,t,e,r,s,c){var d=n.call(this,o,"selection",t,!0,e,r,s,c)||this;return d._clearState(),d}return _(l,n),l.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},l.prototype.resize=function(o){n.prototype.resize.call(this,o),this._clearState()},l.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},l.prototype.onSelectionChanged=function(o,t,e){if(this._didStateChange(o,t,e,this._bufferService.buffer.ydisp))if(this._clearAll(),o&&t){var r=o[1]-this._bufferService.buffer.ydisp,s=t[1]-this._bufferService.buffer.ydisp,c=Math.max(r,0),d=Math.min(s,this._bufferService.rows-1);if(c>=this._bufferService.rows||d<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var g=o[0],b=t[0]-g,C=d-c+1;this._fillCells(g,c,b,C)}else{g=r===c?o[0]:0;var y=c===s?t[0]:this._bufferService.cols;this._fillCells(g,c,y-g,1);var S=Math.max(d-c-1,0);if(this._fillCells(0,c+1,this._bufferService.cols,S),c!==d){var x=s===d?t[0]:this._bufferService.cols;this._fillCells(0,d,x,1)}}this._state.start=[o[0],o[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},l.prototype._didStateChange=function(o,t,e,r){return!this._areCoordinatesEqual(o,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||e!==this._state.columnSelectMode||r!==this._state.ydisp},l.prototype._areCoordinatesEqual=function(o,t){return!(!o||!t)&&o[0]===t[0]&&o[1]===t[1]},f([h(4,p.IBufferService),h(5,p.IOptionsService)],l)}(m.BaseRenderLayer);a.SelectionRenderLayer=i},9596:function(I,a,v){var u,_=this&&this.__extends||(u=function(s,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(d[b]=g[b])},u(s,c)},function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=s}u(s,c),s.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}),f=this&&this.__decorate||function(s,c,d,g){var b,C=arguments.length,y=C<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,c,d,g);else for(var S=s.length-1;S>=0;S--)(b=s[S])&&(y=(C<3?b(y):C>3?b(c,d,y):b(c,d))||y);return C>3&&y&&Object.defineProperty(c,d,y),y},h=this&&this.__param||function(s,c){return function(d,g){c(d,g,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.TextRenderLayer=void 0;var m=v(3700),p=v(1546),i=v(3734),n=v(643),l=v(511),o=v(2585),t=v(4725),e=v(4269),r=function(s){function c(d,g,b,C,y,S,x,E){var B=s.call(this,d,"text",g,C,b,y,S,x)||this;return B._characterJoinerService=E,B._characterWidth=0,B._characterFont="",B._characterOverlapCache={},B._workCell=new l.CellData,B._state=new m.GridCache,B}return _(c,s),c.prototype.resize=function(d){s.prototype.resize.call(this,d);var g=this._getFont(!1,!1);this._characterWidth===d.scaledCharWidth&&this._characterFont===g||(this._characterWidth=d.scaledCharWidth,this._characterFont=g,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},c.prototype.reset=function(){this._state.clear(),this._clearAll()},c.prototype._forEachCell=function(d,g,b){for(var C=d;C<=g;C++)for(var y=C+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.lines.get(y),x=this._characterJoinerService.getJoinedCharacters(y),E=0;E<this._bufferService.cols;E++){S.loadCell(E,this._workCell);var B=this._workCell,M=!1,w=E;if(B.getWidth()!==0){if(x.length>0&&E===x[0][0]){M=!0;var k=x.shift();B=new e.JoinedCellData(this._workCell,S.translateToString(!0,k[0],k[1]),k[1]-k[0]),w=k[1]-1}!M&&this._isOverlapping(B)&&w<S.length-1&&S.getCodePoint(w+1)===n.NULL_CELL_CODE&&(B.content&=-12582913,B.content|=2<<22),b(B,E,C),E=w}}},c.prototype._drawBackground=function(d,g){var b=this,C=this._ctx,y=this._bufferService.cols,S=0,x=0,E=null;C.save(),this._forEachCell(d,g,function(B,M,w){var k=null;B.isInverse()?k=B.isFgDefault()?b._colors.foreground.css:B.isFgRGB()?"rgb("+i.AttributeData.toColorRGB(B.getFgColor()).join(",")+")":b._colors.ansi[B.getFgColor()].css:B.isBgRGB()?k="rgb("+i.AttributeData.toColorRGB(B.getBgColor()).join(",")+")":B.isBgPalette()&&(k=b._colors.ansi[B.getBgColor()].css),E===null&&(S=M,x=w),w!==x?(C.fillStyle=E||"",b._fillCells(S,x,y-S,1),S=M,x=w):E!==k&&(C.fillStyle=E||"",b._fillCells(S,x,M-S,1),S=M,x=w),E=k}),E!==null&&(C.fillStyle=E,this._fillCells(S,x,y-S,1)),C.restore()},c.prototype._drawForeground=function(d,g){var b=this;this._forEachCell(d,g,function(C,y,S){if(!C.isInvisible()&&(b._drawChars(C,y,S),C.isUnderline()||C.isStrikethrough())){if(b._ctx.save(),C.isInverse())if(C.isBgDefault())b._ctx.fillStyle=b._colors.background.css;else if(C.isBgRGB())b._ctx.fillStyle="rgb("+i.AttributeData.toColorRGB(C.getBgColor()).join(",")+")";else{var x=C.getBgColor();b._optionsService.options.drawBoldTextInBrightColors&&C.isBold()&&x<8&&(x+=8),b._ctx.fillStyle=b._colors.ansi[x].css}else if(C.isFgDefault())b._ctx.fillStyle=b._colors.foreground.css;else if(C.isFgRGB())b._ctx.fillStyle="rgb("+i.AttributeData.toColorRGB(C.getFgColor()).join(",")+")";else{var E=C.getFgColor();b._optionsService.options.drawBoldTextInBrightColors&&C.isBold()&&E<8&&(E+=8),b._ctx.fillStyle=b._colors.ansi[E].css}C.isStrikethrough()&&b._fillMiddleLineAtCells(y,S,C.getWidth()),C.isUnderline()&&b._fillBottomLineAtCells(y,S,C.getWidth()),b._ctx.restore()}})},c.prototype.onGridChanged=function(d,g){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,d,this._bufferService.cols,g-d+1),this._drawBackground(d,g),this._drawForeground(d,g))},c.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},c.prototype._isOverlapping=function(d){if(d.getWidth()!==1||d.getCode()<256)return!1;var g=d.getChars();if(this._characterOverlapCache.hasOwnProperty(g))return this._characterOverlapCache[g];this._ctx.save(),this._ctx.font=this._characterFont;var b=Math.floor(this._ctx.measureText(g).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[g]=b,b},f([h(5,o.IBufferService),h(6,o.IOptionsService),h(7,t.ICharacterJoinerService)],c)}(p.BaseRenderLayer);a.TextRenderLayer=r},9616:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseCharAtlas=void 0;var v=function(){function u(){this._didWarmUp=!1}return u.prototype.dispose=function(){},u.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},u.prototype._doWarmUp=function(){},u.prototype.clear=function(){},u.prototype.beginFrame=function(){},u}();a.BaseCharAtlas=v},1420:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.removeTerminalFromCache=a.acquireCharAtlas=void 0;var u=v(2040),_=v(1906),f=[];a.acquireCharAtlas=function(h,m,p,i,n){for(var l=(0,u.generateConfig)(i,n,h,p),o=0;o<f.length;o++){var t=(e=f[o]).ownedBy.indexOf(m);if(t>=0){if((0,u.configEquals)(e.config,l))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),f.splice(o,1)):e.ownedBy.splice(t,1);break}}for(o=0;o<f.length;o++){var e=f[o];if((0,u.configEquals)(e.config,l))return e.ownedBy.push(m),e.atlas}var r={atlas:new _.DynamicCharAtlas(document,l),config:l,ownedBy:[m]};return f.push(r),r.atlas},a.removeTerminalFromCache=function(h){for(var m=0;m<f.length;m++){var p=f[m].ownedBy.indexOf(h);if(p!==-1){f[m].ownedBy.length===1?(f[m].atlas.dispose(),f.splice(m,1)):f[m].ownedBy.splice(p,1);break}}}},2040:function(I,a,v){var u=this&&this.__spreadArray||function(f,h,m){if(m||arguments.length===2)for(var p,i=0,n=h.length;i<n;i++)!p&&i in h||(p||(p=Array.prototype.slice.call(h,0,i)),p[i]=h[i]);return f.concat(p||Array.prototype.slice.call(h))};Object.defineProperty(a,"__esModule",{value:!0}),a.is256Color=a.configEquals=a.generateConfig=void 0;var _=v(643);a.generateConfig=function(f,h,m,p){var i={foreground:p.foreground,background:p.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:u([],p.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:f,scaledCharHeight:h,fontFamily:m.fontFamily,fontSize:m.fontSize,fontWeight:m.fontWeight,fontWeightBold:m.fontWeightBold,allowTransparency:m.allowTransparency,colors:i}},a.configEquals=function(f,h){for(var m=0;m<f.colors.ansi.length;m++)if(f.colors.ansi[m].rgba!==h.colors.ansi[m].rgba)return!1;return f.devicePixelRatio===h.devicePixelRatio&&f.fontFamily===h.fontFamily&&f.fontSize===h.fontSize&&f.fontWeight===h.fontWeight&&f.fontWeightBold===h.fontWeightBold&&f.allowTransparency===h.allowTransparency&&f.scaledCharWidth===h.scaledCharWidth&&f.scaledCharHeight===h.scaledCharHeight&&f.colors.foreground===h.colors.foreground&&f.colors.background===h.colors.background},a.is256Color=function(f){return f<_.DEFAULT_COLOR}},8803:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR_ATLAS_CELL_SPACING=a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;var u=v(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=u.isFirefox?"bottom":"ideographic",a.CHAR_ATLAS_CELL_SPACING=1},1906:function(I,a,v){var u,_=this&&this.__extends||(u=function(g,b){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,y){C.__proto__=y}||function(C,y){for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(C[S]=y[S])},u(g,b)},function(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function C(){this.constructor=g}u(g,b),g.prototype=b===null?Object.create(b):(C.prototype=b.prototype,new C)});Object.defineProperty(a,"__esModule",{value:!0}),a.NoneCharAtlas=a.DynamicCharAtlas=a.getGlyphCacheKey=void 0;var f=v(8803),h=v(9616),m=v(5680),p=v(7001),i=v(6114),n=v(1752),l=v(4774),o=1024,t=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function r(g){return g.code<<21|g.bg<<12|g.fg<<3|(g.bold?0:4)+(g.dim?0:2)+(g.italic?0:1)}a.getGlyphCacheKey=r;var s=function(g){function b(C,y){var S=g.call(this)||this;S._config=y,S._drawToCacheCount=0,S._glyphsWaitingOnBitmap=[],S._bitmapCommitTimeout=null,S._bitmap=null,S._cacheCanvas=C.createElement("canvas"),S._cacheCanvas.width=o,S._cacheCanvas.height=t,S._cacheCtx=(0,n.throwIfFalsy)(S._cacheCanvas.getContext("2d",{alpha:!0}));var x=C.createElement("canvas");x.width=S._config.scaledCharWidth,x.height=S._config.scaledCharHeight,S._tmpCtx=(0,n.throwIfFalsy)(x.getContext("2d",{alpha:S._config.allowTransparency})),S._width=Math.floor(o/S._config.scaledCharWidth),S._height=Math.floor(t/S._config.scaledCharHeight);var E=S._width*S._height;return S._cacheMap=new p.LRUMap(E),S._cacheMap.prealloc(E),S}return _(b,g),b.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},b.prototype.beginFrame=function(){this._drawToCacheCount=0},b.prototype.clear=function(){if(this._cacheMap.size>0){var C=this._width*this._height;this._cacheMap=new p.LRUMap(C),this._cacheMap.prealloc(C)}this._cacheCtx.clearRect(0,0,o,t),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},b.prototype.draw=function(C,y,S,x){if(y.code===32)return!0;if(!this._canCache(y))return!1;var E=r(y),B=this._cacheMap.get(E);if(B!=null)return this._drawFromCache(C,B,S,x),!0;if(this._drawToCacheCount<100){var M;M=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var w=this._drawToCache(y,M);return this._cacheMap.set(E,w),this._drawFromCache(C,w,S,x),!0}return!1},b.prototype._canCache=function(C){return C.code<256},b.prototype._toCoordinateX=function(C){return C%this._width*this._config.scaledCharWidth},b.prototype._toCoordinateY=function(C){return Math.floor(C/this._width)*this._config.scaledCharHeight},b.prototype._drawFromCache=function(C,y,S,x){if(!y.isEmpty){var E=this._toCoordinateX(y.index),B=this._toCoordinateY(y.index);C.drawImage(y.inBitmap?this._bitmap:this._cacheCanvas,E,B,this._config.scaledCharWidth,this._config.scaledCharHeight,S,x,this._config.scaledCharWidth,this._config.scaledCharHeight)}},b.prototype._getColorFromAnsiIndex=function(C){return C<this._config.colors.ansi.length?this._config.colors.ansi[C]:m.DEFAULT_ANSI_COLORS[C]},b.prototype._getBackgroundColor=function(C){return this._config.allowTransparency?e:C.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:C.bg<256?this._getColorFromAnsiIndex(C.bg):this._config.colors.background},b.prototype._getForegroundColor=function(C){return C.fg===f.INVERTED_DEFAULT_COLOR?l.color.opaque(this._config.colors.background):C.fg<256?this._getColorFromAnsiIndex(C.fg):this._config.colors.foreground},b.prototype._drawToCache=function(C,y){this._drawToCacheCount++,this._tmpCtx.save();var S=this._getBackgroundColor(C);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var x=C.bold?this._config.fontWeightBold:this._config.fontWeight,E=C.italic?"italic":"";this._tmpCtx.font=E+" "+x+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(C).css,C.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(C.chars,0,this._config.scaledCharHeight);var B=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),M=!1;if(this._config.allowTransparency||(M=d(B,S)),M&&C.chars==="_"&&!this._config.allowTransparency)for(var w=1;w<=5&&(this._tmpCtx.fillText(C.chars,0,this._config.scaledCharHeight-w),M=d(B=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),S));w++);this._tmpCtx.restore();var k=this._toCoordinateX(y),T=this._toCoordinateY(y);this._cacheCtx.putImageData(B,k,T);var D={index:y,isEmpty:M,inBitmap:!1};return this._addGlyphToBitmap(D),D},b.prototype._addGlyphToBitmap=function(C){var y=this;!("createImageBitmap"in window)||i.isFirefox||i.isSafari||(this._glyphsWaitingOnBitmap.push(C),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return y._generateBitmap()},100)))},b.prototype._generateBitmap=function(){var C=this,y=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(S){C._bitmap=S;for(var x=0;x<y.length;x++)y[x].inBitmap=!0}),this._bitmapCommitTimeout=null},b}(h.BaseCharAtlas);a.DynamicCharAtlas=s;var c=function(g){function b(C,y){return g.call(this)||this}return _(b,g),b.prototype.draw=function(C,y,S,x){return!1},b}(h.BaseCharAtlas);function d(g,b){for(var C=!0,y=b.rgba>>>24,S=b.rgba>>>16&255,x=b.rgba>>>8&255,E=0;E<g.data.length;E+=4)g.data[E]===y&&g.data[E+1]===S&&g.data[E+2]===x?g.data[E+3]=0:C=!1;return C}a.NoneCharAtlas=c},7001:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LRUMap=void 0;var v=function(){function u(_){this.capacity=_,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return u.prototype._unlinkNode=function(_){var f=_.prev,h=_.next;_===this._head&&(this._head=h),_===this._tail&&(this._tail=f),f!==null&&(f.next=h),h!==null&&(h.prev=f)},u.prototype._appendNode=function(_){var f=this._tail;f!==null&&(f.next=_),_.prev=f,_.next=null,this._tail=_,this._head===null&&(this._head=_)},u.prototype.prealloc=function(_){for(var f=this._nodePool,h=0;h<_;h++)f.push({prev:null,next:null,key:null,value:null})},u.prototype.get=function(_){var f=this._map[_];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},u.prototype.peekValue=function(_){var f=this._map[_];return f!==void 0?f.value:null},u.prototype.peek=function(){var _=this._head;return _===null?null:_.value},u.prototype.set=function(_,f){var h=this._map[_];if(h!==void 0)h=this._map[_],this._unlinkNode(h),h.value=f;else if(this.size>=this.capacity)h=this._head,this._unlinkNode(h),delete this._map[h.key],h.key=_,h.value=f,this._map[_]=h;else{var m=this._nodePool;m.length>0?((h=m.pop()).key=_,h.value=f):h={prev:null,next:null,key:_,value:f},this._map[_]=h,this.size++}this._appendNode(h)},u}();a.LRUMap=v},1296:function(I,a,v){var u,_=this&&this.__extends||(u=function(C,y){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(S[E]=x[E])},u(C,y)},function(C,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function S(){this.constructor=C}u(C,y),C.prototype=y===null?Object.create(y):(S.prototype=y.prototype,new S)}),f=this&&this.__decorate||function(C,y,S,x){var E,B=arguments.length,M=B<3?y:x===null?x=Object.getOwnPropertyDescriptor(y,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(C,y,S,x);else for(var w=C.length-1;w>=0;w--)(E=C[w])&&(M=(B<3?E(M):B>3?E(y,S,M):E(y,S))||M);return B>3&&M&&Object.defineProperty(y,S,M),M},h=this&&this.__param||function(C,y){return function(S,x){y(S,x,C)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;var m=v(3787),p=v(8803),i=v(844),n=v(4725),l=v(2585),o=v(8460),t=v(4774),e=v(9631),r="xterm-dom-renderer-owner-",s="xterm-fg-",c="xterm-bg-",d="xterm-focus",g=1,b=function(C){function y(S,x,E,B,M,w,k,T,D,j){var W=C.call(this)||this;return W._colors=S,W._element=x,W._screenElement=E,W._viewportElement=B,W._linkifier=M,W._linkifier2=w,W._charSizeService=T,W._optionsService=D,W._bufferService=j,W._terminalClass=g++,W._rowElements=[],W._rowContainer=document.createElement("div"),W._rowContainer.classList.add("xterm-rows"),W._rowContainer.style.lineHeight="normal",W._rowContainer.setAttribute("aria-hidden","true"),W._refreshRowElements(W._bufferService.cols,W._bufferService.rows),W._selectionContainer=document.createElement("div"),W._selectionContainer.classList.add("xterm-selection"),W._selectionContainer.setAttribute("aria-hidden","true"),W.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},W._updateDimensions(),W._injectCss(),W._rowFactory=k.createInstance(m.DomRendererRowFactory,document,W._colors),W._element.classList.add(r+W._terminalClass),W._screenElement.appendChild(W._rowContainer),W._screenElement.appendChild(W._selectionContainer),W._linkifier.onShowLinkUnderline(function(V){return W._onLinkHover(V)}),W._linkifier.onHideLinkUnderline(function(V){return W._onLinkLeave(V)}),W._linkifier2.onShowLinkUnderline(function(V){return W._onLinkHover(V)}),W._linkifier2.onHideLinkUnderline(function(V){return W._onLinkLeave(V)}),W}return _(y,C),Object.defineProperty(y.prototype,"onRequestRedraw",{get:function(){return new o.EventEmitter().event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){this._element.classList.remove(r+this._terminalClass),(0,e.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),C.prototype.dispose.call(this)},y.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var S=0,x=this._rowElements;S<x.length;S++){var E=x[S];E.style.width=this.dimensions.canvasWidth+"px",E.style.height=this.dimensions.actualCellHeight+"px",E.style.lineHeight=this.dimensions.actualCellHeight+"px",E.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var B=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=B,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},y.prototype.setColors=function(S){this._colors=S,this._injectCss()},y.prototype._injectCss=function(){var S=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var x=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";x+=this._terminalSelector+" span:not(."+m.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+m.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+m.ITALIC_CLASS+" { font-style: italic;}",x+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",x+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",x+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_BLINK_CLASS+":not(."+m.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_BLINK_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",x+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(E,B){x+=S._terminalSelector+" ."+s+B+" { color: "+E.css+"; }"+S._terminalSelector+" ."+c+B+" { background-color: "+E.css+"; }"}),x+=this._terminalSelector+" ."+s+p.INVERTED_DEFAULT_COLOR+" { color: "+t.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+c+p.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=x},y.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},y.prototype._refreshRowElements=function(S,x){for(var E=this._rowElements.length;E<=x;E++){var B=document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>x;)this._rowContainer.removeChild(this._rowElements.pop())},y.prototype.onResize=function(S,x){this._refreshRowElements(S,x),this._updateDimensions()},y.prototype.onCharSizeChanged=function(){this._updateDimensions()},y.prototype.onBlur=function(){this._rowContainer.classList.remove(d)},y.prototype.onFocus=function(){this._rowContainer.classList.add(d)},y.prototype.onSelectionChanged=function(S,x,E){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(S&&x){var B=S[1]-this._bufferService.buffer.ydisp,M=x[1]-this._bufferService.buffer.ydisp,w=Math.max(B,0),k=Math.min(M,this._bufferService.rows-1);if(!(w>=this._bufferService.rows||k<0)){var T=document.createDocumentFragment();if(E)T.appendChild(this._createSelectionElement(w,S[0],x[0],k-w+1));else{var D=B===w?S[0]:0,j=w===M?x[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(w,D,j));var W=k-w-1;if(T.appendChild(this._createSelectionElement(w+1,0,this._bufferService.cols,W)),w!==k){var V=M===k?x[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(k,0,V))}}this._selectionContainer.appendChild(T)}}},y.prototype._createSelectionElement=function(S,x,E,B){B===void 0&&(B=1);var M=document.createElement("div");return M.style.height=B*this.dimensions.actualCellHeight+"px",M.style.top=S*this.dimensions.actualCellHeight+"px",M.style.left=x*this.dimensions.actualCellWidth+"px",M.style.width=this.dimensions.actualCellWidth*(E-x)+"px",M},y.prototype.onCursorMove=function(){},y.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},y.prototype.clear=function(){for(var S=0,x=this._rowElements;S<x.length;S++)x[S].innerText=""},y.prototype.renderRows=function(S,x){for(var E=this._bufferService.buffer.ybase+this._bufferService.buffer.y,B=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),M=this._optionsService.options.cursorBlink,w=S;w<=x;w++){var k=this._rowElements[w];k.innerText="";var T=w+this._bufferService.buffer.ydisp,D=this._bufferService.buffer.lines.get(T),j=this._optionsService.options.cursorStyle;k.appendChild(this._rowFactory.createRow(D,T,T===E,j,B,M,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(y.prototype,"_terminalSelector",{get:function(){return"."+r+this._terminalClass},enumerable:!1,configurable:!0}),y.prototype._onLinkHover=function(S){this._setCellUnderline(S.x1,S.x2,S.y1,S.y2,S.cols,!0)},y.prototype._onLinkLeave=function(S){this._setCellUnderline(S.x1,S.x2,S.y1,S.y2,S.cols,!1)},y.prototype._setCellUnderline=function(S,x,E,B,M,w){for(;S!==x||E!==B;){var k=this._rowElements[E];if(!k)return;var T=k.children[S];T&&(T.style.textDecoration=w?"underline":"none"),++S>=M&&(S=0,E++)}},f([h(6,l.IInstantiationService),h(7,n.ICharSizeService),h(8,l.IOptionsService),h(9,l.IBufferService)],y)}(i.Disposable);a.DomRenderer=b},3787:function(I,a,v){var u=this&&this.__decorate||function(e,r,s,c){var d,g=arguments.length,b=g<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,s):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,r,s,c);else for(var C=e.length-1;C>=0;C--)(d=e[C])&&(b=(g<3?d(b):g>3?d(r,s,b):d(r,s))||b);return g>3&&b&&Object.defineProperty(r,s,b),b},_=this&&this.__param||function(e,r){return function(s,c){r(s,c,e)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=a.CURSOR_STYLE_UNDERLINE_CLASS=a.CURSOR_STYLE_BAR_CLASS=a.CURSOR_STYLE_BLOCK_CLASS=a.CURSOR_BLINK_CLASS=a.CURSOR_CLASS=a.STRIKETHROUGH_CLASS=a.UNDERLINE_CLASS=a.ITALIC_CLASS=a.DIM_CLASS=a.BOLD_CLASS=void 0;var f=v(8803),h=v(643),m=v(511),p=v(2585),i=v(4774),n=v(4725),l=v(4269);a.BOLD_CLASS="xterm-bold",a.DIM_CLASS="xterm-dim",a.ITALIC_CLASS="xterm-italic",a.UNDERLINE_CLASS="xterm-underline",a.STRIKETHROUGH_CLASS="xterm-strikethrough",a.CURSOR_CLASS="xterm-cursor",a.CURSOR_BLINK_CLASS="xterm-cursor-blink",a.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",a.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",a.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var o=function(){function e(r,s,c,d,g){this._document=r,this._colors=s,this._characterJoinerService=c,this._optionsService=d,this._coreService=g,this._workCell=new m.CellData}return e.prototype.setColors=function(r){this._colors=r},e.prototype.createRow=function(r,s,c,d,g,b,C,y){for(var S=this._document.createDocumentFragment(),x=this._characterJoinerService.getJoinedCharacters(s),E=0,B=Math.min(r.length,y)-1;B>=0;B--)if(r.loadCell(B,this._workCell).getCode()!==h.NULL_CELL_CODE||c&&B===g){E=B+1;break}for(B=0;B<E;B++){r.loadCell(B,this._workCell);var M=this._workCell.getWidth();if(M!==0){var w=!1,k=B,T=this._workCell;if(x.length>0&&B===x[0][0]){w=!0;var D=x.shift();T=new l.JoinedCellData(this._workCell,r.translateToString(!0,D[0],D[1]),D[1]-D[0]),k=D[1]-1,M=T.getWidth()}var j=this._document.createElement("span");if(M>1&&(j.style.width=C*M+"px"),w&&(j.style.display="inline",g>=B&&g<=k&&(g=B)),!this._coreService.isCursorHidden&&c&&B===g)switch(j.classList.add(a.CURSOR_CLASS),b&&j.classList.add(a.CURSOR_BLINK_CLASS),d){case"bar":j.classList.add(a.CURSOR_STYLE_BAR_CLASS);break;case"underline":j.classList.add(a.CURSOR_STYLE_UNDERLINE_CLASS);break;default:j.classList.add(a.CURSOR_STYLE_BLOCK_CLASS)}T.isBold()&&j.classList.add(a.BOLD_CLASS),T.isItalic()&&j.classList.add(a.ITALIC_CLASS),T.isDim()&&j.classList.add(a.DIM_CLASS),T.isUnderline()&&j.classList.add(a.UNDERLINE_CLASS),T.isInvisible()?j.textContent=h.WHITESPACE_CELL_CHAR:j.textContent=T.getChars()||h.WHITESPACE_CELL_CHAR,T.isStrikethrough()&&j.classList.add(a.STRIKETHROUGH_CLASS);var W=T.getFgColor(),V=T.getFgColorMode(),G=T.getBgColor(),X=T.getBgColorMode(),L=!!T.isInverse();if(L){var A=W;W=G,G=A;var R=V;V=X,X=R}switch(V){case 16777216:case 33554432:T.isBold()&&W<8&&this._optionsService.options.drawBoldTextInBrightColors&&(W+=8),this._applyMinimumContrast(j,this._colors.background,this._colors.ansi[W])||j.classList.add("xterm-fg-"+W);break;case 50331648:var F=i.rgba.toColor(W>>16&255,W>>8&255,255&W);this._applyMinimumContrast(j,this._colors.background,F)||this._addStyle(j,"color:#"+t(W.toString(16),"0",6));break;default:this._applyMinimumContrast(j,this._colors.background,this._colors.foreground)||L&&j.classList.add("xterm-fg-"+f.INVERTED_DEFAULT_COLOR)}switch(X){case 16777216:case 33554432:j.classList.add("xterm-bg-"+G);break;case 50331648:this._addStyle(j,"background-color:#"+t(G.toString(16),"0",6));break;default:L&&j.classList.add("xterm-bg-"+f.INVERTED_DEFAULT_COLOR)}S.appendChild(j),B=k}}return S},e.prototype._applyMinimumContrast=function(r,s,c){if(this._optionsService.options.minimumContrastRatio===1)return!1;var d=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return d===void 0&&(d=i.color.ensureContrastRatio(s,c,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,d!=null?d:null)),!!d&&(this._addStyle(r,"color:"+d.css),!0)},e.prototype._addStyle=function(r,s){r.setAttribute("style",""+(r.getAttribute("style")||"")+s+";")},u([_(2,n.ICharacterJoinerService),_(3,p.IOptionsService),_(4,p.ICoreService)],e)}();function t(e,r,s){for(;e.length<s;)e=r+e;return e}a.DomRendererRowFactory=o},456:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0;var v=function(){function u(_){this._bufferService=_,this.isSelectAllActive=!1,this.selectionStartLength=0}return u.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(u.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var _=this.selectionStart[0]+this.selectionStartLength;return _>this._bufferService.cols?_%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)-1]:[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),u.prototype.areSelectionValuesReversed=function(){var _=this.selectionStart,f=this.selectionEnd;return!(!_||!f)&&(_[1]>f[1]||_[1]===f[1]&&_[0]>f[0])},u.prototype.onTrim=function(_){return this.selectionStart&&(this.selectionStart[1]-=_),this.selectionEnd&&(this.selectionEnd[1]-=_),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},u}();a.SelectionModel=v},428:function(I,a,v){var u=this&&this.__decorate||function(i,n,l,o){var t,e=arguments.length,r=e<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,n,l,o);else for(var s=i.length-1;s>=0;s--)(t=i[s])&&(r=(e<3?t(r):e>3?t(n,l,r):t(n,l))||r);return e>3&&r&&Object.defineProperty(n,l,r),r},_=this&&this.__param||function(i,n){return function(l,o){n(l,o,i)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;var f=v(2585),h=v(8460),m=function(){function i(n,l,o){this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=new h.EventEmitter,this._measureStrategy=new p(n,l,this._optionsService)}return Object.defineProperty(i.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),i.prototype.measure=function(){var n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())},u([_(2,f.IOptionsService)],i)}();a.CharSizeService=m;var p=function(){function i(n,l,o){this._document=n,this._parentElement=l,this._optionsService=o,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return i.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var n=this._measureElement.getBoundingClientRect();return n.width!==0&&n.height!==0&&(this._result.width=n.width,this._result.height=Math.ceil(n.height)),this._result},i}()},4269:function(I,a,v){var u,_=this&&this.__extends||(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])},u(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}u(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),f=this&&this.__decorate||function(t,e,r,s){var c,d=arguments.length,g=d<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,e,r,s);else for(var b=t.length-1;b>=0;b--)(c=t[b])&&(g=(d<3?c(g):d>3?c(e,r,g):c(e,r))||g);return d>3&&g&&Object.defineProperty(e,r,g),g},h=this&&this.__param||function(t,e){return function(r,s){e(r,s,t)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;var m=v(3734),p=v(643),i=v(511),n=v(2585),l=function(t){function e(r,s,c){var d=t.call(this)||this;return d.content=0,d.combinedData="",d.fg=r.fg,d.bg=r.bg,d.combinedData=s,d._width=c,d}return _(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(r){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(m.AttributeData);a.JoinedCellData=l;var o=function(){function t(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new i.CellData}return t.prototype.register=function(e){var r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id},t.prototype.deregister=function(e){for(var r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1},t.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];for(var s=[],c=r.translateToString(!0),d=0,g=0,b=0,C=r.getFg(0),y=r.getBg(0),S=0;S<r.getTrimmedLength();S++)if(r.loadCell(S,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==y){if(S-d>1)for(var x=this._getJoinedRanges(c,b,g,r,d),E=0;E<x.length;E++)s.push(x[E]);d=S,b=g,C=this._workCell.fg,y=this._workCell.bg}g+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-d>1)for(x=this._getJoinedRanges(c,b,g,r,d),E=0;E<x.length;E++)s.push(x[E]);return s},t.prototype._getJoinedRanges=function(e,r,s,c,d){var g=e.substring(r,s),b=[];try{b=this._characterJoiners[0].handler(g)}catch(x){console.error(x)}for(var C=1;C<this._characterJoiners.length;C++)try{for(var y=this._characterJoiners[C].handler(g),S=0;S<y.length;S++)t._mergeRanges(b,y[S])}catch(x){console.error(x)}return this._stringRangesToCellRanges(b,c,d),b},t.prototype._stringRangesToCellRanges=function(e,r,s){var c=0,d=!1,g=0,b=e[c];if(b){for(var C=s;C<this._bufferService.cols;C++){var y=r.getWidth(C),S=r.getString(C).length||p.WHITESPACE_CELL_CHAR.length;if(y!==0){if(!d&&b[0]<=g&&(b[0]=C,d=!0),b[1]<=g){if(b[1]=C,!(b=e[++c]))break;b[0]<=g?(b[0]=C,d=!0):d=!1}g+=S}}b&&(b[1]=this._bufferService.cols)}},t._mergeRanges=function(e,r){for(var s=!1,c=0;c<e.length;c++){var d=e[c];if(s){if(r[1]<=d[0])return e[c-1][1]=r[1],e;if(r[1]<=d[1])return e[c-1][1]=Math.max(r[1],d[1]),e.splice(c,1),e;e.splice(c,1),c--}else{if(r[1]<=d[0])return e.splice(c,0,r),e;if(r[1]<=d[1])return d[0]=Math.min(r[0],d[0]),e;r[0]<d[1]&&(d[0]=Math.min(r[0],d[0]),s=!0)}}return s?e[e.length-1][1]=r[1]:e.push(r),e},t=f([h(0,n.IBufferService)],t)}();a.CharacterJoinerService=o},5114:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;var v=function(){function u(_){this._textarea=_}return Object.defineProperty(u.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),u}();a.CoreBrowserService=v},8934:function(I,a,v){var u=this&&this.__decorate||function(p,i,n,l){var o,t=arguments.length,e=t<3?i:l===null?l=Object.getOwnPropertyDescriptor(i,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(p,i,n,l);else for(var r=p.length-1;r>=0;r--)(o=p[r])&&(e=(t<3?o(e):t>3?o(i,n,e):o(i,n))||e);return t>3&&e&&Object.defineProperty(i,n,e),e},_=this&&this.__param||function(p,i){return function(n,l){i(n,l,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;var f=v(4725),h=v(9806),m=function(){function p(i,n){this._renderService=i,this._charSizeService=n}return p.prototype.getCoords=function(i,n,l,o,t){return(0,h.getCoords)(i,n,l,o,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},p.prototype.getRawByteCoords=function(i,n,l,o){var t=this.getCoords(i,n,l,o);return(0,h.getRawByteCoords)(t)},u([_(0,f.IRenderService),_(1,f.ICharSizeService)],p)}();a.MouseService=m},3230:function(I,a,v){var u,_=this&&this.__extends||(u=function(r,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g])},u(r,s)},function(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function c(){this.constructor=r}u(r,s),r.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}),f=this&&this.__decorate||function(r,s,c,d){var g,b=arguments.length,C=b<3?s:d===null?d=Object.getOwnPropertyDescriptor(s,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(r,s,c,d);else for(var y=r.length-1;y>=0;y--)(g=r[y])&&(C=(b<3?g(C):b>3?g(s,c,C):g(s,c))||C);return b>3&&C&&Object.defineProperty(s,c,C),C},h=this&&this.__param||function(r,s){return function(c,d){s(c,d,r)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;var m=v(6193),p=v(8460),i=v(844),n=v(5596),l=v(3656),o=v(2585),t=v(4725),e=function(r){function s(c,d,g,b,C,y){var S=r.call(this)||this;if(S._renderer=c,S._rowCount=d,S._charSizeService=C,S._isPaused=!1,S._needsFullRefresh=!1,S._isNextRenderRedrawOnly=!0,S._needsSelectionRefresh=!1,S._canvasWidth=0,S._canvasHeight=0,S._selectionState={start:void 0,end:void 0,columnSelectMode:!1},S._onDimensionsChange=new p.EventEmitter,S._onRender=new p.EventEmitter,S._onRefreshRequest=new p.EventEmitter,S.register({dispose:function(){return S._renderer.dispose()}}),S._renderDebouncer=new m.RenderDebouncer(function(E,B){return S._renderRows(E,B)}),S.register(S._renderDebouncer),S._screenDprMonitor=new n.ScreenDprMonitor,S._screenDprMonitor.setListener(function(){return S.onDevicePixelRatioChange()}),S.register(S._screenDprMonitor),S.register(y.onResize(function(E){return S._fullRefresh()})),S.register(b.onOptionChange(function(){return S._renderer.onOptionsChanged()})),S.register(S._charSizeService.onCharSizeChange(function(){return S.onCharSizeChanged()})),S._renderer.onRequestRedraw(function(E){return S.refreshRows(E.start,E.end,!0)}),S.register((0,l.addDisposableDomListener)(window,"resize",function(){return S.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var x=new IntersectionObserver(function(E){return S._onIntersectionChange(E[E.length-1])},{threshold:0});x.observe(g),S.register({dispose:function(){return x.disconnect()}})}return S}return _(s,r),Object.defineProperty(s.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),s.prototype._onIntersectionChange=function(c){this._isPaused=c.isIntersecting===void 0?c.intersectionRatio===0:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},s.prototype.refreshRows=function(c,d,g){g===void 0&&(g=!1),this._isPaused?this._needsFullRefresh=!0:(g||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,d,this._rowCount))},s.prototype._renderRows=function(c,d){this._renderer.renderRows(c,d),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:c,end:d}),this._isNextRenderRedrawOnly=!0},s.prototype.resize=function(c,d){this._rowCount=d,this._fireOnCanvasResize()},s.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},s.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},s.prototype.dispose=function(){r.prototype.dispose.call(this)},s.prototype.setRenderer=function(c){var d=this;this._renderer.dispose(),this._renderer=c,this._renderer.onRequestRedraw(function(g){return d.refreshRows(g.start,g.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},s.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},s.prototype.clearTextureAtlas=function(){var c,d;(d=(c=this._renderer)===null||c===void 0?void 0:c.clearTextureAtlas)===null||d===void 0||d.call(c),this._fullRefresh()},s.prototype.setColors=function(c){this._renderer.setColors(c),this._fullRefresh()},s.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},s.prototype.onResize=function(c,d){this._renderer.onResize(c,d),this._fullRefresh()},s.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},s.prototype.onBlur=function(){this._renderer.onBlur()},s.prototype.onFocus=function(){this._renderer.onFocus()},s.prototype.onSelectionChanged=function(c,d,g){this._selectionState.start=c,this._selectionState.end=d,this._selectionState.columnSelectMode=g,this._renderer.onSelectionChanged(c,d,g)},s.prototype.onCursorMove=function(){this._renderer.onCursorMove()},s.prototype.clear=function(){this._renderer.clear()},f([h(3,o.IOptionsService),h(4,t.ICharSizeService),h(5,o.IBufferService)],s)}(i.Disposable);a.RenderService=e},9312:function(I,a,v){var u,_=this&&this.__extends||(u=function(b,C){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(y[x]=S[x])},u(b,C)},function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function y(){this.constructor=b}u(b,C),b.prototype=C===null?Object.create(C):(y.prototype=C.prototype,new y)}),f=this&&this.__decorate||function(b,C,y,S){var x,E=arguments.length,B=E<3?C:S===null?S=Object.getOwnPropertyDescriptor(C,y):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(b,C,y,S);else for(var M=b.length-1;M>=0;M--)(x=b[M])&&(B=(E<3?x(B):E>3?x(C,y,B):x(C,y))||B);return E>3&&B&&Object.defineProperty(C,y,B),B},h=this&&this.__param||function(b,C){return function(y,S){C(y,S,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;var m=v(6114),p=v(456),i=v(511),n=v(8460),l=v(4725),o=v(2585),t=v(9806),e=v(9504),r=v(844),s=v(4841),c=String.fromCharCode(160),d=new RegExp(c,"g"),g=function(b){function C(y,S,x,E,B,M,w,k){var T=b.call(this)||this;return T._element=y,T._screenElement=S,T._linkifier=x,T._bufferService=E,T._coreService=B,T._mouseService=M,T._optionsService=w,T._renderService=k,T._dragScrollAmount=0,T._enabled=!0,T._workCell=new i.CellData,T._mouseDownTimeStamp=0,T._oldHasSelection=!1,T._oldSelectionStart=void 0,T._oldSelectionEnd=void 0,T._onLinuxMouseSelection=T.register(new n.EventEmitter),T._onRedrawRequest=T.register(new n.EventEmitter),T._onSelectionChange=T.register(new n.EventEmitter),T._onRequestScrollLines=T.register(new n.EventEmitter),T._mouseMoveListener=function(D){return T._onMouseMove(D)},T._mouseUpListener=function(D){return T._onMouseUp(D)},T._coreService.onUserInput(function(){T.hasSelection&&T.clearSelection()}),T._trimListener=T._bufferService.buffer.lines.onTrim(function(D){return T._onTrim(D)}),T.register(T._bufferService.buffers.onBufferActivate(function(D){return T._onBufferActivate(D)})),T.enable(),T._model=new p.SelectionModel(T._bufferService),T._activeSelectionMode=0,T}return _(C,b),Object.defineProperty(C.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){this._removeMouseDownListeners()},C.prototype.reset=function(){this.clearSelection()},C.prototype.disable=function(){this.clearSelection(),this._enabled=!1},C.prototype.enable=function(){this._enabled=!0},Object.defineProperty(C.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"hasSelection",{get:function(){var y=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!y||!S||y[0]===S[0]&&y[1]===S[1])},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"selectionText",{get:function(){var y=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;if(!y||!S)return"";var x=this._bufferService.buffer,E=[];if(this._activeSelectionMode===3){if(y[0]===S[0])return"";for(var B=y[1];B<=S[1];B++){var M=x.translateBufferLineToString(B,!0,y[0],S[0]);E.push(M)}}else{var w=y[1]===S[1]?S[0]:void 0;for(E.push(x.translateBufferLineToString(y[1],!0,y[0],w)),B=y[1]+1;B<=S[1]-1;B++){var k=x.lines.get(B);M=x.translateBufferLineToString(B,!0),(k==null?void 0:k.isWrapped)?E[E.length-1]+=M:E.push(M)}y[1]!==S[1]&&(k=x.lines.get(S[1]),M=x.translateBufferLineToString(S[1],!0,0,S[0]),k&&k.isWrapped?E[E.length-1]+=M:E.push(M))}return E.map(function(T){return T.replace(d," ")}).join(m.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),C.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},C.prototype.refresh=function(y){var S=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return S._refresh()})),m.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},C.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},C.prototype._isClickInSelection=function(y){var S=this._getMouseBufferCoords(y),x=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(x&&E&&S)&&this._areCoordsInSelection(S,x,E)},C.prototype._areCoordsInSelection=function(y,S,x){return y[1]>S[1]&&y[1]<x[1]||S[1]===x[1]&&y[1]===S[1]&&y[0]>=S[0]&&y[0]<x[0]||S[1]<x[1]&&y[1]===x[1]&&y[0]<x[0]||S[1]<x[1]&&y[1]===S[1]&&y[0]>=S[0]},C.prototype._selectWordAtCursor=function(y,S){var x,E,B=(E=(x=this._linkifier.currentLink)===null||x===void 0?void 0:x.link)===null||E===void 0?void 0:E.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var M=this._getMouseBufferCoords(y);return!!M&&(this._selectWordAt(M,S),this._model.selectionEnd=void 0,!0)},C.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},C.prototype.selectLines=function(y,S){this._model.clearSelection(),y=Math.max(y,0),S=Math.min(S,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,S],this.refresh(),this._onSelectionChange.fire()},C.prototype._onTrim=function(y){this._model.onTrim(y)&&this.refresh()},C.prototype._getMouseBufferCoords=function(y){var S=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(S)return S[0]--,S[1]--,S[1]+=this._bufferService.buffer.ydisp,S},C.prototype._getMouseEventScrollAmount=function(y){var S=(0,t.getCoordsRelativeToElement)(y,this._screenElement)[1],x=this._renderService.dimensions.canvasHeight;return S>=0&&S<=x?0:(S>x&&(S-=x),S=Math.min(Math.max(S,-50),50),(S/=50)/Math.abs(S)+Math.round(14*S))},C.prototype.shouldForceSelection=function(y){return m.isMac?y.altKey&&this._optionsService.options.macOptionClickForcesSelection:y.shiftKey},C.prototype.onMouseDown=function(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._onIncrementalClick(y):y.detail===1?this._onSingleClick(y):y.detail===2?this._onDoubleClick(y):y.detail===3&&this._onTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}},C.prototype._addMouseDownListeners=function(){var y=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return y._dragScroll()},50)},C.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},C.prototype._onIncrementalClick=function(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))},C.prototype._onSingleClick=function(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),this._model.selectionStart){this._model.selectionEnd=void 0;var S=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);S&&S.length!==this._model.selectionStart[0]&&S.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},C.prototype._onDoubleClick=function(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)},C.prototype._onTripleClick=function(y){var S=this._getMouseBufferCoords(y);S&&(this._activeSelectionMode=2,this._selectLineAt(S[1]))},C.prototype.shouldColumnSelect=function(y){return y.altKey&&!(m.isMac&&this._optionsService.options.macOptionClickForcesSelection)},C.prototype._onMouseMove=function(y){if(y.stopImmediatePropagation(),this._model.selectionStart){var S=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var x=this._bufferService.buffer;if(this._model.selectionEnd[1]<x.lines.length){var E=x.lines.get(this._model.selectionEnd[1]);E&&E.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}S&&S[0]===this._model.selectionEnd[0]&&S[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},C.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}},C.prototype._onMouseUp=function(y){var S=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&S<500&&y.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var x=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(x&&x[0]!==void 0&&x[1]!==void 0){var E=(0,e.moveToCellSequence)(x[0]-1,x[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()},C.prototype._fireEventIfSelectionChanged=function(){var y=this._model.finalSelectionStart,S=this._model.finalSelectionEnd,x=!(!y||!S||y[0]===S[0]&&y[1]===S[1]);x?y&&S&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&S[0]===this._oldSelectionEnd[0]&&S[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,S,x)):this._oldHasSelection&&this._fireOnSelectionChange(y,S,x)},C.prototype._fireOnSelectionChange=function(y,S,x){this._oldSelectionStart=y,this._oldSelectionEnd=S,this._oldHasSelection=x,this._onSelectionChange.fire()},C.prototype._onBufferActivate=function(y){var S=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(function(x){return S._onTrim(x)})},C.prototype._convertViewportColToCharacterIndex=function(y,S){for(var x=S[0],E=0;S[0]>=E;E++){var B=y.loadCell(E,this._workCell).getChars().length;this._workCell.getWidth()===0?x--:B>1&&S[0]!==E&&(x+=B-1)}return x},C.prototype.setSelection=function(y,S,x){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,S],this._model.selectionStartLength=x,this.refresh()},C.prototype.rightClickSelect=function(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},C.prototype._getWordAt=function(y,S,x,E){if(x===void 0&&(x=!0),E===void 0&&(E=!0),!(y[0]>=this._bufferService.cols)){var B=this._bufferService.buffer,M=B.lines.get(y[1]);if(M){var w=B.translateBufferLineToString(y[1],!1),k=this._convertViewportColToCharacterIndex(M,y),T=k,D=y[0]-k,j=0,W=0,V=0,G=0;if(w.charAt(k)===" "){for(;k>0&&w.charAt(k-1)===" ";)k--;for(;T<w.length&&w.charAt(T+1)===" ";)T++}else{var X=y[0],L=y[0];M.getWidth(X)===0&&(j++,X--),M.getWidth(L)===2&&(W++,L++);var A=M.getString(L).length;for(A>1&&(G+=A-1,T+=A-1);X>0&&k>0&&!this._isCharWordSeparator(M.loadCell(X-1,this._workCell));){M.loadCell(X-1,this._workCell);var R=this._workCell.getChars().length;this._workCell.getWidth()===0?(j++,X--):R>1&&(V+=R-1,k-=R-1),k--,X--}for(;L<M.length&&T+1<w.length&&!this._isCharWordSeparator(M.loadCell(L+1,this._workCell));){M.loadCell(L+1,this._workCell);var F=this._workCell.getChars().length;this._workCell.getWidth()===2?(W++,L++):F>1&&(G+=F-1,T+=F-1),T++,L++}}T++;var O=k+D-j+V,U=Math.min(this._bufferService.cols,T-k+j+W-V-G);if(S||w.slice(k,T).trim()!==""){if(x&&O===0&&M.getCodePoint(0)!==32){var z=B.lines.get(y[1]-1);if(z&&M.isWrapped&&z.getCodePoint(this._bufferService.cols-1)!==32){var ee=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(ee){var re=this._bufferService.cols-ee.start;O-=re,U+=re}}}if(E&&O+U===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){var oe=B.lines.get(y[1]+1);if((oe==null?void 0:oe.isWrapped)&&oe.getCodePoint(0)!==32){var q=this._getWordAt([0,y[1]+1],!1,!1,!0);q&&(U+=q.length)}}return{start:O,length:U}}}}},C.prototype._selectWordAt=function(y,S){var x=this._getWordAt(y,S);if(x){for(;x.start<0;)x.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[x.start,y[1]],this._model.selectionStartLength=x.length}},C.prototype._selectToWordAt=function(y){var S=this._getWordAt(y,!0);if(S){for(var x=y[1];S.start<0;)S.start+=this._bufferService.cols,x--;if(!this._model.areSelectionValuesReversed())for(;S.start+S.length>this._bufferService.cols;)S.length-=this._bufferService.cols,x++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?S.start:S.start+S.length,x]}},C.prototype._isCharWordSeparator=function(y){return y.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(y.getChars())>=0},C.prototype._selectLineAt=function(y){var S=this._bufferService.buffer.getWrappedRangeForLine(y);this._model.selectionStart=[0,S.first],this._model.selectionEnd=[this._bufferService.cols,S.last],this._model.selectionStartLength=0},f([h(3,o.IBufferService),h(4,o.ICoreService),h(5,l.IMouseService),h(6,o.IOptionsService),h(7,l.IRenderService)],C)}(r.Disposable);a.SelectionService=g},4725:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ICharacterJoinerService=a.ISoundService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;var u=v(8343);a.ICharSizeService=(0,u.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),a.IMouseService=(0,u.createDecorator)("MouseService"),a.IRenderService=(0,u.createDecorator)("RenderService"),a.ISelectionService=(0,u.createDecorator)("SelectionService"),a.ISoundService=(0,u.createDecorator)("SoundService"),a.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService")},357:function(I,a,v){var u=this&&this.__decorate||function(m,p,i,n){var l,o=arguments.length,t=o<3?p:n===null?n=Object.getOwnPropertyDescriptor(p,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(m,p,i,n);else for(var e=m.length-1;e>=0;e--)(l=m[e])&&(t=(o<3?l(t):o>3?l(p,i,t):l(p,i))||t);return o>3&&t&&Object.defineProperty(p,i,t),t},_=this&&this.__param||function(m,p){return function(i,n){p(i,n,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SoundService=void 0;var f=v(2585),h=function(){function m(p){this._optionsService=p}return Object.defineProperty(m,"audioContext",{get:function(){if(!m._audioContext){var p=window.AudioContext||window.webkitAudioContext;if(!p)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;m._audioContext=new p}return m._audioContext},enumerable:!1,configurable:!0}),m.prototype.playBellSound=function(){var p=m.audioContext;if(p){var i=p.createBufferSource();p.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(n){i.buffer=n,i.connect(p.destination),i.start(0)})}},m.prototype._base64ToArrayBuffer=function(p){for(var i=window.atob(p),n=i.length,l=new Uint8Array(n),o=0;o<n;o++)l[o]=i.charCodeAt(o);return l.buffer},m.prototype._removeMimeType=function(p){return p.split(",")[1]},m=u([_(0,f.IOptionsService)],m)}();a.SoundService=h},6349:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;var u=v(8460),_=function(){function f(h){this._maxLength=h,this.onDeleteEmitter=new u.EventEmitter,this.onInsertEmitter=new u.EventEmitter,this.onTrimEmitter=new u.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(h){if(this._maxLength!==h){for(var m=new Array(h),p=0;p<Math.min(h,this.length);p++)m[p]=this._array[this._getCyclicIndex(p)];this._array=m,this._maxLength=h,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(h){if(h>this._length)for(var m=this._length;m<h;m++)this._array[m]=void 0;this._length=h},enumerable:!1,configurable:!0}),f.prototype.get=function(h){return this._array[this._getCyclicIndex(h)]},f.prototype.set=function(h,m){this._array[this._getCyclicIndex(h)]=m},f.prototype.push=function(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(h,m){for(var p=[],i=2;i<arguments.length;i++)p[i-2]=arguments[i];if(m){for(var n=h;n<this._length-m;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+m)];this._length-=m,this.onDeleteEmitter.fire({index:h,amount:m})}for(n=this._length-1;n>=h;n--)this._array[this._getCyclicIndex(n+p.length)]=this._array[this._getCyclicIndex(n)];for(n=0;n<p.length;n++)this._array[this._getCyclicIndex(h+n)]=p[n];if(p.length&&this.onInsertEmitter.fire({index:h,amount:p.length}),this._length+p.length>this._maxLength){var l=this._length+p.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=p.length},f.prototype.trimStart=function(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)},f.prototype.shiftElements=function(h,m,p){if(!(m<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(var i=m-1;i>=0;i--)this.set(h+i+p,this.get(h+i));var n=h+m+p-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(i=0;i<m;i++)this.set(h+i+p,this.get(h+i))}},f.prototype._getCyclicIndex=function(h){return(this._startIndex+h)%this._maxLength},f}();a.CircularList=_},1439:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function v(u,_){if(_===void 0&&(_=5),typeof u!="object")return u;var f=Array.isArray(u)?[]:{};for(var h in u)f[h]=_<=1?u[h]:u[h]&&v(u[h],_-1);return f}},8969:function(I,a,v){var u,_=this&&this.__extends||(u=function(y,S){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var B in E)Object.prototype.hasOwnProperty.call(E,B)&&(x[B]=E[B])},u(y,S)},function(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function x(){this.constructor=y}u(y,S),y.prototype=S===null?Object.create(S):(x.prototype=S.prototype,new x)});Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;var f=v(844),h=v(2585),m=v(4348),p=v(7866),i=v(744),n=v(7302),l=v(6975),o=v(8460),t=v(1753),e=v(3730),r=v(1480),s=v(7994),c=v(9282),d=v(5435),g=v(5981),b=!1,C=function(y){function S(x){var E=y.call(this)||this;return E._onBinary=new o.EventEmitter,E._onData=new o.EventEmitter,E._onLineFeed=new o.EventEmitter,E._onResize=new o.EventEmitter,E._onScroll=new o.EventEmitter,E._instantiationService=new m.InstantiationService,E.optionsService=new n.OptionsService(x),E._instantiationService.setService(h.IOptionsService,E.optionsService),E._bufferService=E.register(E._instantiationService.createInstance(i.BufferService)),E._instantiationService.setService(h.IBufferService,E._bufferService),E._logService=E._instantiationService.createInstance(p.LogService),E._instantiationService.setService(h.ILogService,E._logService),E.coreService=E.register(E._instantiationService.createInstance(l.CoreService,function(){return E.scrollToBottom()})),E._instantiationService.setService(h.ICoreService,E.coreService),E.coreMouseService=E._instantiationService.createInstance(t.CoreMouseService),E._instantiationService.setService(h.ICoreMouseService,E.coreMouseService),E._dirtyRowService=E._instantiationService.createInstance(e.DirtyRowService),E._instantiationService.setService(h.IDirtyRowService,E._dirtyRowService),E.unicodeService=E._instantiationService.createInstance(r.UnicodeService),E._instantiationService.setService(h.IUnicodeService,E.unicodeService),E._charsetService=E._instantiationService.createInstance(s.CharsetService),E._instantiationService.setService(h.ICharsetService,E._charsetService),E._inputHandler=new d.InputHandler(E._bufferService,E._charsetService,E.coreService,E._dirtyRowService,E._logService,E.optionsService,E.coreMouseService,E.unicodeService),E.register((0,o.forwardEvent)(E._inputHandler.onLineFeed,E._onLineFeed)),E.register(E._inputHandler),E.register((0,o.forwardEvent)(E._bufferService.onResize,E._onResize)),E.register((0,o.forwardEvent)(E.coreService.onData,E._onData)),E.register((0,o.forwardEvent)(E.coreService.onBinary,E._onBinary)),E.register(E.optionsService.onOptionChange(function(B){return E._updateOptions(B)})),E.register(E._bufferService.onScroll(function(B){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E.register(E._inputHandler.onScroll(function(B){E._onScroll.fire({position:E._bufferService.buffer.ydisp,source:0}),E._dirtyRowService.markRangeDirty(E._bufferService.buffer.scrollTop,E._bufferService.buffer.scrollBottom)})),E._writeBuffer=new g.WriteBuffer(function(B,M){return E._inputHandler.parse(B,M)}),E}return _(S,y),Object.defineProperty(S.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onScroll",{get:function(){var x=this;return this._onScrollApi||(this._onScrollApi=new o.EventEmitter,this.register(this._onScroll.event(function(E){var B;(B=x._onScrollApi)===null||B===void 0||B.fire(E.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"options",{get:function(){return this.optionsService.options},set:function(x){for(var E in x)this.optionsService.options[E]=x[E]},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){var x;this._isDisposed||(y.prototype.dispose.call(this),(x=this._windowsMode)===null||x===void 0||x.dispose(),this._windowsMode=void 0)},S.prototype.write=function(x,E){this._writeBuffer.write(x,E)},S.prototype.writeSync=function(x,E){this._logService.logLevel<=h.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(x,E)},S.prototype.resize=function(x,E){isNaN(x)||isNaN(E)||(x=Math.max(x,i.MINIMUM_COLS),E=Math.max(E,i.MINIMUM_ROWS),this._bufferService.resize(x,E))},S.prototype.scroll=function(x,E){E===void 0&&(E=!1),this._bufferService.scroll(x,E)},S.prototype.scrollLines=function(x,E,B){this._bufferService.scrollLines(x,E,B)},S.prototype.scrollPages=function(x){this._bufferService.scrollPages(x)},S.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},S.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},S.prototype.scrollToLine=function(x){this._bufferService.scrollToLine(x)},S.prototype.registerEscHandler=function(x,E){return this._inputHandler.registerEscHandler(x,E)},S.prototype.registerDcsHandler=function(x,E){return this._inputHandler.registerDcsHandler(x,E)},S.prototype.registerCsiHandler=function(x,E){return this._inputHandler.registerCsiHandler(x,E)},S.prototype.registerOscHandler=function(x,E){return this._inputHandler.registerOscHandler(x,E)},S.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},S.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},S.prototype._updateOptions=function(x){var E;switch(x){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((E=this._windowsMode)===null||E===void 0||E.dispose(),this._windowsMode=void 0)}},S.prototype._enableWindowsMode=function(){var x=this;if(!this._windowsMode){var E=[];E.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},function(){return(0,c.updateWindowsModeWrappedState)(x._bufferService),!1})),this._windowsMode={dispose:function(){for(var B=0,M=E;B<M.length;B++)M[B].dispose()}}}},S}(f.Disposable);a.CoreTerminal=C},8460:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.forwardEvent=a.EventEmitter=void 0;var v=function(){function u(){this._listeners=[],this._disposed=!1}return Object.defineProperty(u.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(f){return _._listeners.push(f),{dispose:function(){if(!_._disposed){for(var h=0;h<_._listeners.length;h++)if(_._listeners[h]===f)return void _._listeners.splice(h,1)}}}}),this._event},enumerable:!1,configurable:!0}),u.prototype.fire=function(_,f){for(var h=[],m=0;m<this._listeners.length;m++)h.push(this._listeners[m]);for(m=0;m<h.length;m++)h[m].call(void 0,_,f)},u.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},u}();a.EventEmitter=v,a.forwardEvent=function(u,_){return u(function(f){return _.fire(f)})}},5435:function(I,a,v){var u,_=this&&this.__extends||(u=function(B,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,k){w.__proto__=k}||function(w,k){for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(w[T]=k[T])},u(B,M)},function(B,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function w(){this.constructor=B}u(B,M),B.prototype=M===null?Object.create(M):(w.prototype=M.prototype,new w)});Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;var f,h=v(2584),m=v(7116),p=v(2015),i=v(844),n=v(8273),l=v(482),o=v(8437),t=v(8460),e=v(643),r=v(511),s=v(3734),c=v(2585),d=v(6242),g=v(6351),b=v(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function S(B,M){if(B>24)return M.setWinLines||!1;switch(B){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(f=a.WindowsOptionsReportType||(a.WindowsOptionsReportType={}));var x=function(){function B(M,w,k,T){this._bufferService=M,this._coreService=w,this._logService=k,this._optionsService=T,this._data=new Uint32Array(0)}return B.prototype.hook=function(M){this._data=new Uint32Array(0)},B.prototype.put=function(M,w,k){this._data=(0,n.concat)(this._data,M.subarray(w,k))},B.prototype.unhook=function(M){if(!M)return this._data=new Uint32Array(0),!0;var w=(0,l.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),w){case'"q':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r0"q'+h.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r61;1"p'+h.C0.ESC+"\\");break;case"r":var k=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+k+h.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(h.C0.ESC+"P1$r0m"+h.C0.ESC+"\\");break;case" q":var T={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];T-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+T+" q"+h.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",w),this._coreService.triggerDataEvent(h.C0.ESC+"P0$r"+h.C0.ESC+"\\")}return!0},B}(),E=function(B){function M(w,k,T,D,j,W,V,G,X){X===void 0&&(X=new p.EscapeSequenceParser);var L=B.call(this)||this;L._bufferService=w,L._charsetService=k,L._coreService=T,L._dirtyRowService=D,L._logService=j,L._optionsService=W,L._coreMouseService=V,L._unicodeService=G,L._parser=X,L._parseBuffer=new Uint32Array(4096),L._stringDecoder=new l.StringToUtf32,L._utf8Decoder=new l.Utf8ToUtf32,L._workCell=new r.CellData,L._windowTitle="",L._iconName="",L._windowTitleStack=[],L._iconNameStack=[],L._curAttrData=o.DEFAULT_ATTR_DATA.clone(),L._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),L._onRequestBell=new t.EventEmitter,L._onRequestRefreshRows=new t.EventEmitter,L._onRequestReset=new t.EventEmitter,L._onRequestSendFocus=new t.EventEmitter,L._onRequestSyncScrollBar=new t.EventEmitter,L._onRequestWindowsOptionsReport=new t.EventEmitter,L._onA11yChar=new t.EventEmitter,L._onA11yTab=new t.EventEmitter,L._onCursorMove=new t.EventEmitter,L._onLineFeed=new t.EventEmitter,L._onScroll=new t.EventEmitter,L._onTitleChange=new t.EventEmitter,L._onColor=new t.EventEmitter,L._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},L._specialColors=[256,257,258],L.register(L._parser),L._activeBuffer=L._bufferService.buffer,L.register(L._bufferService.buffers.onBufferActivate(function(O){return L._activeBuffer=O.activeBuffer})),L._parser.setCsiHandlerFallback(function(O,U){L._logService.debug("Unknown CSI code: ",{identifier:L._parser.identToString(O),params:U.toArray()})}),L._parser.setEscHandlerFallback(function(O){L._logService.debug("Unknown ESC code: ",{identifier:L._parser.identToString(O)})}),L._parser.setExecuteHandlerFallback(function(O){L._logService.debug("Unknown EXECUTE code: ",{code:O})}),L._parser.setOscHandlerFallback(function(O,U,z){L._logService.debug("Unknown OSC code: ",{identifier:O,action:U,data:z})}),L._parser.setDcsHandlerFallback(function(O,U,z){U==="HOOK"&&(z=z.toArray()),L._logService.debug("Unknown DCS code: ",{identifier:L._parser.identToString(O),action:U,payload:z})}),L._parser.setPrintHandler(function(O,U,z){return L.print(O,U,z)}),L._parser.registerCsiHandler({final:"@"},function(O){return L.insertChars(O)}),L._parser.registerCsiHandler({intermediates:" ",final:"@"},function(O){return L.scrollLeft(O)}),L._parser.registerCsiHandler({final:"A"},function(O){return L.cursorUp(O)}),L._parser.registerCsiHandler({intermediates:" ",final:"A"},function(O){return L.scrollRight(O)}),L._parser.registerCsiHandler({final:"B"},function(O){return L.cursorDown(O)}),L._parser.registerCsiHandler({final:"C"},function(O){return L.cursorForward(O)}),L._parser.registerCsiHandler({final:"D"},function(O){return L.cursorBackward(O)}),L._parser.registerCsiHandler({final:"E"},function(O){return L.cursorNextLine(O)}),L._parser.registerCsiHandler({final:"F"},function(O){return L.cursorPrecedingLine(O)}),L._parser.registerCsiHandler({final:"G"},function(O){return L.cursorCharAbsolute(O)}),L._parser.registerCsiHandler({final:"H"},function(O){return L.cursorPosition(O)}),L._parser.registerCsiHandler({final:"I"},function(O){return L.cursorForwardTab(O)}),L._parser.registerCsiHandler({final:"J"},function(O){return L.eraseInDisplay(O)}),L._parser.registerCsiHandler({prefix:"?",final:"J"},function(O){return L.eraseInDisplay(O)}),L._parser.registerCsiHandler({final:"K"},function(O){return L.eraseInLine(O)}),L._parser.registerCsiHandler({prefix:"?",final:"K"},function(O){return L.eraseInLine(O)}),L._parser.registerCsiHandler({final:"L"},function(O){return L.insertLines(O)}),L._parser.registerCsiHandler({final:"M"},function(O){return L.deleteLines(O)}),L._parser.registerCsiHandler({final:"P"},function(O){return L.deleteChars(O)}),L._parser.registerCsiHandler({final:"S"},function(O){return L.scrollUp(O)}),L._parser.registerCsiHandler({final:"T"},function(O){return L.scrollDown(O)}),L._parser.registerCsiHandler({final:"X"},function(O){return L.eraseChars(O)}),L._parser.registerCsiHandler({final:"Z"},function(O){return L.cursorBackwardTab(O)}),L._parser.registerCsiHandler({final:"`"},function(O){return L.charPosAbsolute(O)}),L._parser.registerCsiHandler({final:"a"},function(O){return L.hPositionRelative(O)}),L._parser.registerCsiHandler({final:"b"},function(O){return L.repeatPrecedingCharacter(O)}),L._parser.registerCsiHandler({final:"c"},function(O){return L.sendDeviceAttributesPrimary(O)}),L._parser.registerCsiHandler({prefix:">",final:"c"},function(O){return L.sendDeviceAttributesSecondary(O)}),L._parser.registerCsiHandler({final:"d"},function(O){return L.linePosAbsolute(O)}),L._parser.registerCsiHandler({final:"e"},function(O){return L.vPositionRelative(O)}),L._parser.registerCsiHandler({final:"f"},function(O){return L.hVPosition(O)}),L._parser.registerCsiHandler({final:"g"},function(O){return L.tabClear(O)}),L._parser.registerCsiHandler({final:"h"},function(O){return L.setMode(O)}),L._parser.registerCsiHandler({prefix:"?",final:"h"},function(O){return L.setModePrivate(O)}),L._parser.registerCsiHandler({final:"l"},function(O){return L.resetMode(O)}),L._parser.registerCsiHandler({prefix:"?",final:"l"},function(O){return L.resetModePrivate(O)}),L._parser.registerCsiHandler({final:"m"},function(O){return L.charAttributes(O)}),L._parser.registerCsiHandler({final:"n"},function(O){return L.deviceStatus(O)}),L._parser.registerCsiHandler({prefix:"?",final:"n"},function(O){return L.deviceStatusPrivate(O)}),L._parser.registerCsiHandler({intermediates:"!",final:"p"},function(O){return L.softReset(O)}),L._parser.registerCsiHandler({intermediates:" ",final:"q"},function(O){return L.setCursorStyle(O)}),L._parser.registerCsiHandler({final:"r"},function(O){return L.setScrollRegion(O)}),L._parser.registerCsiHandler({final:"s"},function(O){return L.saveCursor(O)}),L._parser.registerCsiHandler({final:"t"},function(O){return L.windowOptions(O)}),L._parser.registerCsiHandler({final:"u"},function(O){return L.restoreCursor(O)}),L._parser.registerCsiHandler({intermediates:"'",final:"}"},function(O){return L.insertColumns(O)}),L._parser.registerCsiHandler({intermediates:"'",final:"~"},function(O){return L.deleteColumns(O)}),L._parser.setExecuteHandler(h.C0.BEL,function(){return L.bell()}),L._parser.setExecuteHandler(h.C0.LF,function(){return L.lineFeed()}),L._parser.setExecuteHandler(h.C0.VT,function(){return L.lineFeed()}),L._parser.setExecuteHandler(h.C0.FF,function(){return L.lineFeed()}),L._parser.setExecuteHandler(h.C0.CR,function(){return L.carriageReturn()}),L._parser.setExecuteHandler(h.C0.BS,function(){return L.backspace()}),L._parser.setExecuteHandler(h.C0.HT,function(){return L.tab()}),L._parser.setExecuteHandler(h.C0.SO,function(){return L.shiftOut()}),L._parser.setExecuteHandler(h.C0.SI,function(){return L.shiftIn()}),L._parser.setExecuteHandler(h.C1.IND,function(){return L.index()}),L._parser.setExecuteHandler(h.C1.NEL,function(){return L.nextLine()}),L._parser.setExecuteHandler(h.C1.HTS,function(){return L.tabSet()}),L._parser.registerOscHandler(0,new d.OscHandler(function(O){return L.setTitle(O),L.setIconName(O),!0})),L._parser.registerOscHandler(1,new d.OscHandler(function(O){return L.setIconName(O)})),L._parser.registerOscHandler(2,new d.OscHandler(function(O){return L.setTitle(O)})),L._parser.registerOscHandler(4,new d.OscHandler(function(O){return L.setOrReportIndexedColor(O)})),L._parser.registerOscHandler(10,new d.OscHandler(function(O){return L.setOrReportFgColor(O)})),L._parser.registerOscHandler(11,new d.OscHandler(function(O){return L.setOrReportBgColor(O)})),L._parser.registerOscHandler(12,new d.OscHandler(function(O){return L.setOrReportCursorColor(O)})),L._parser.registerOscHandler(104,new d.OscHandler(function(O){return L.restoreIndexedColor(O)})),L._parser.registerOscHandler(110,new d.OscHandler(function(O){return L.restoreFgColor(O)})),L._parser.registerOscHandler(111,new d.OscHandler(function(O){return L.restoreBgColor(O)})),L._parser.registerOscHandler(112,new d.OscHandler(function(O){return L.restoreCursorColor(O)})),L._parser.registerEscHandler({final:"7"},function(){return L.saveCursor()}),L._parser.registerEscHandler({final:"8"},function(){return L.restoreCursor()}),L._parser.registerEscHandler({final:"D"},function(){return L.index()}),L._parser.registerEscHandler({final:"E"},function(){return L.nextLine()}),L._parser.registerEscHandler({final:"H"},function(){return L.tabSet()}),L._parser.registerEscHandler({final:"M"},function(){return L.reverseIndex()}),L._parser.registerEscHandler({final:"="},function(){return L.keypadApplicationMode()}),L._parser.registerEscHandler({final:">"},function(){return L.keypadNumericMode()}),L._parser.registerEscHandler({final:"c"},function(){return L.fullReset()}),L._parser.registerEscHandler({final:"n"},function(){return L.setgLevel(2)}),L._parser.registerEscHandler({final:"o"},function(){return L.setgLevel(3)}),L._parser.registerEscHandler({final:"|"},function(){return L.setgLevel(3)}),L._parser.registerEscHandler({final:"}"},function(){return L.setgLevel(2)}),L._parser.registerEscHandler({final:"~"},function(){return L.setgLevel(1)}),L._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return L.selectDefaultCharset()}),L._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return L.selectDefaultCharset()});var A=function(O){R._parser.registerEscHandler({intermediates:"(",final:O},function(){return L.selectCharset("("+O)}),R._parser.registerEscHandler({intermediates:")",final:O},function(){return L.selectCharset(")"+O)}),R._parser.registerEscHandler({intermediates:"*",final:O},function(){return L.selectCharset("*"+O)}),R._parser.registerEscHandler({intermediates:"+",final:O},function(){return L.selectCharset("+"+O)}),R._parser.registerEscHandler({intermediates:"-",final:O},function(){return L.selectCharset("-"+O)}),R._parser.registerEscHandler({intermediates:".",final:O},function(){return L.selectCharset("."+O)}),R._parser.registerEscHandler({intermediates:"/",final:O},function(){return L.selectCharset("/"+O)})},R=this;for(var F in m.CHARSETS)A(F);return L._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return L.screenAlignmentPattern()}),L._parser.setErrorHandler(function(O){return L._logService.error("Parsing error: ",O),O}),L._parser.registerDcsHandler({intermediates:"$",final:"q"},new x(L._bufferService,L._coreService,L._logService,L._optionsService)),L}return _(M,B),Object.defineProperty(M.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),M.prototype.dispose=function(){B.prototype.dispose.call(this)},M.prototype._preserveStack=function(w,k,T,D){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=k,this._parseStack.decodedLength=T,this._parseStack.position=D},M.prototype._logSlowResolvingAsync=function(w){this._logService.logLevel<=c.LogLevelEnum.WARN&&Promise.race([w,new Promise(function(k,T){return setTimeout(function(){return T("#SLOW_TIMEOUT")},5e3)})]).catch(function(k){if(k!=="#SLOW_TIMEOUT")throw k;console.warn("async parser handler taking longer than 5000 ms")})},M.prototype.parse=function(w,k){var T,D=this._activeBuffer.x,j=this._activeBuffer.y,W=0,V=this._parseStack.paused;if(V){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,k))return this._logSlowResolvingAsync(T),T;D=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>y&&(W=this._parseStack.position+y)}if(this._logService.logLevel<=c.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof w=="string"?' "'+w+'"':""),typeof w=="string"?w.split("").map(function(A){return A.charCodeAt(0)}):w),this._parseBuffer.length<w.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(w.length,y))),V||this._dirtyRowService.clearRange(),w.length>y)for(var G=W;G<w.length;G+=y){var X=G+y<w.length?G+y:w.length,L=typeof w=="string"?this._stringDecoder.decode(w.substring(G,X),this._parseBuffer):this._utf8Decoder.decode(w.subarray(G,X),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,L))return this._preserveStack(D,j,L,G),this._logSlowResolvingAsync(T),T}else if(!V&&(L=typeof w=="string"?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer),T=this._parser.parse(this._parseBuffer,L)))return this._preserveStack(D,j,L,0),this._logSlowResolvingAsync(T),T;this._activeBuffer.x===D&&this._activeBuffer.y===j||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},M.prototype.print=function(w,k,T){var D,j,W=this._charsetService.charset,V=this._optionsService.options.screenReaderMode,G=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,A=this._curAttrData,R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-k>0&&R.getWidth(this._activeBuffer.x-1)===2&&R.setCellFromCodePoint(this._activeBuffer.x-1,0,1,A.fg,A.bg,A.extended);for(var F=k;F<T;++F){if(D=w[F],j=this._unicodeService.wcwidth(D),D<127&&W){var O=W[String.fromCharCode(D)];O&&(D=O.charCodeAt(0))}if(V&&this._onA11yChar.fire((0,l.stringFromCodePoint)(D)),j||!this._activeBuffer.x){if(this._activeBuffer.x+j-1>=G){if(X){for(;this._activeBuffer.x<G;)R.setCellFromCodePoint(this._activeBuffer.x++,0,1,A.fg,A.bg,A.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=G-1,j===2)continue}if(L&&(R.insertCells(this._activeBuffer.x,j,this._activeBuffer.getNullCell(A),A),R.getWidth(G-1)===2&&R.setCellFromCodePoint(G-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,A.fg,A.bg,A.extended)),R.setCellFromCodePoint(this._activeBuffer.x++,D,j,A.fg,A.bg,A.extended),j>0)for(;--j;)R.setCellFromCodePoint(this._activeBuffer.x++,0,0,A.fg,A.bg,A.extended)}else R.getWidth(this._activeBuffer.x-1)?R.addCodepointToCell(this._activeBuffer.x-1,D):R.addCodepointToCell(this._activeBuffer.x-2,D)}T-k>0&&(R.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<G&&T-k>0&&R.getWidth(this._activeBuffer.x)===0&&!R.hasContent(this._activeBuffer.x)&&R.setCellFromCodePoint(this._activeBuffer.x,0,1,A.fg,A.bg,A.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype.registerCsiHandler=function(w,k){var T=this;return w.final!=="t"||w.prefix||w.intermediates?this._parser.registerCsiHandler(w,k):this._parser.registerCsiHandler(w,function(D){return!S(D.params[0],T._optionsService.options.windowOptions)||k(D)})},M.prototype.registerDcsHandler=function(w,k){return this._parser.registerDcsHandler(w,new g.DcsHandler(k))},M.prototype.registerEscHandler=function(w,k){return this._parser.registerEscHandler(w,k)},M.prototype.registerOscHandler=function(w,k){return this._parser.registerOscHandler(w,new d.OscHandler(k))},M.prototype.bell=function(){return this._onRequestBell.fire(),!0},M.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},M.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},M.prototype.backspace=function(){var w;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((w=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||w===void 0?void 0:w.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},M.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var w=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-w),!0},M.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},M.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},M.prototype._restrictCursor=function(w){w===void 0&&(w=this._bufferService.cols-1),this._activeBuffer.x=Math.min(w,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype._setCursor=function(w,k){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=w,this._activeBuffer.y=this._activeBuffer.scrollTop+k):(this._activeBuffer.x=w,this._activeBuffer.y=k),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype._moveCursor=function(w,k){this._restrictCursor(),this._setCursor(this._activeBuffer.x+w,this._activeBuffer.y+k)},M.prototype.cursorUp=function(w){var k=this._activeBuffer.y-this._activeBuffer.scrollTop;return k>=0?this._moveCursor(0,-Math.min(k,w.params[0]||1)):this._moveCursor(0,-(w.params[0]||1)),!0},M.prototype.cursorDown=function(w){var k=this._activeBuffer.scrollBottom-this._activeBuffer.y;return k>=0?this._moveCursor(0,Math.min(k,w.params[0]||1)):this._moveCursor(0,w.params[0]||1),!0},M.prototype.cursorForward=function(w){return this._moveCursor(w.params[0]||1,0),!0},M.prototype.cursorBackward=function(w){return this._moveCursor(-(w.params[0]||1),0),!0},M.prototype.cursorNextLine=function(w){return this.cursorDown(w),this._activeBuffer.x=0,!0},M.prototype.cursorPrecedingLine=function(w){return this.cursorUp(w),this._activeBuffer.x=0,!0},M.prototype.cursorCharAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0},M.prototype.cursorPosition=function(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0},M.prototype.charPosAbsolute=function(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0},M.prototype.hPositionRelative=function(w){return this._moveCursor(w.params[0]||1,0),!0},M.prototype.linePosAbsolute=function(w){return this._setCursor(this._activeBuffer.x,(w.params[0]||1)-1),!0},M.prototype.vPositionRelative=function(w){return this._moveCursor(0,w.params[0]||1),!0},M.prototype.hVPosition=function(w){return this.cursorPosition(w),!0},M.prototype.tabClear=function(w){var k=w.params[0];return k===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:k===3&&(this._activeBuffer.tabs={}),!0},M.prototype.cursorForwardTab=function(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var k=w.params[0]||1;k--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},M.prototype.cursorBackwardTab=function(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var k=w.params[0]||1;k--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},M.prototype._eraseInBufferLine=function(w,k,T,D){D===void 0&&(D=!1);var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);j.replaceCells(k,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D&&(j.isWrapped=!1)},M.prototype._resetBufferLine=function(w){var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);k.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),k.isWrapped=!1},M.prototype.eraseInDisplay=function(w){var k;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(k=this._activeBuffer.y,this._dirtyRowService.markDirty(k),this._eraseInBufferLine(k++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);k<this._bufferService.rows;k++)this._resetBufferLine(k);this._dirtyRowService.markDirty(k);break;case 1:for(k=this._activeBuffer.y,this._dirtyRowService.markDirty(k),this._eraseInBufferLine(k,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(k+1).isWrapped=!1);k--;)this._resetBufferLine(k);this._dirtyRowService.markDirty(0);break;case 2:for(k=this._bufferService.rows,this._dirtyRowService.markDirty(k-1);k--;)this._resetBufferLine(k);this._dirtyRowService.markDirty(0);break;case 3:var T=this._activeBuffer.lines.length-this._bufferService.rows;T>0&&(this._activeBuffer.lines.trimStart(T),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-T,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-T,0),this._onScroll.fire(0))}return!0},M.prototype.eraseInLine=function(w){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},M.prototype.insertLines=function(w){this._restrictCursor();var k=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var T=this._activeBuffer.ybase+this._activeBuffer.y,D=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-D+1;k--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},M.prototype.deleteLines=function(w){this._restrictCursor();var k=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var T,D=this._activeBuffer.ybase+this._activeBuffer.y;for(T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,T=this._bufferService.rows-1+this._activeBuffer.ybase-T;k--;)this._activeBuffer.lines.splice(D,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},M.prototype.insertChars=function(w){this._restrictCursor();var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.insertCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.deleteChars=function(w){this._restrictCursor();var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.deleteCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.scrollUp=function(w){for(var k=w.params[0]||1;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollDown=function(w){for(var k=w.params[0]||1;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollLeft=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=w.params[0]||1,T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);D.deleteCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollRight=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=w.params[0]||1,T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);D.insertCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.insertColumns=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=w.params[0]||1,T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);D.insertCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.deleteColumns=function(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=w.params[0]||1,T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);D.deleteCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.eraseChars=function(w){this._restrictCursor();var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(w.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.repeatPrecedingCharacter=function(w){if(!this._parser.precedingCodepoint)return!0;for(var k=w.params[0]||1,T=new Uint32Array(k),D=0;D<k;++D)T[D]=this._parser.precedingCodepoint;return this.print(T,0,T.length),!0},M.prototype.sendDeviceAttributesPrimary=function(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0},M.prototype.sendDeviceAttributesSecondary=function(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0},M.prototype._is=function(w){return(this._optionsService.options.termName+"").indexOf(w)===0},M.prototype.setMode=function(w){for(var k=0;k<w.length;k++)w.params[k]===4&&(this._coreService.modes.insertMode=!0);return!0},M.prototype.setModePrivate=function(w){for(var k=0;k<w.length;k++)switch(w.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},M.prototype.resetMode=function(w){for(var k=0;k<w.length;k++)w.params[k]===4&&(this._coreService.modes.insertMode=!1);return!0},M.prototype.resetModePrivate=function(w){for(var k=0;k<w.length;k++)switch(w.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),w.params[k]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},M.prototype._updateAttrColor=function(w,k,T,D,j){return k===2?(w|=50331648,w&=-16777216,w|=s.AttributeData.fromColorRGB([T,D,j])):k===5&&(w&=-50331904,w|=33554432|255&T),w},M.prototype._extractColor=function(w,k,T){var D=[0,0,-1,0,0,0],j=0,W=0;do{if(D[W+j]=w.params[k+W],w.hasSubParams(k+W)){var V=w.getSubParams(k+W),G=0;do D[1]===5&&(j=1),D[W+G+1+j]=V[G];while(++G<V.length&&G+W+1+j<D.length);break}if(D[1]===5&&W+j>=2||D[1]===2&&W+j>=5)break;D[1]&&(j=1)}while(++W+k<w.length&&W+j<D.length);for(G=2;G<D.length;++G)D[G]===-1&&(D[G]=0);switch(D[0]){case 38:T.fg=this._updateAttrColor(T.fg,D[1],D[3],D[4],D[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,D[1],D[3],D[4],D[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,D[1],D[3],D[4],D[5])}return W},M.prototype._processUnderline=function(w,k){k.extended=k.extended.clone(),(!~w||w>5)&&(w=1),k.extended.underlineStyle=w,k.fg|=268435456,w===0&&(k.fg&=-268435457),k.updateExtended()},M.prototype.charAttributes=function(w){if(w.length===1&&w.params[0]===0)return this._curAttrData.fg=o.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=o.DEFAULT_ATTR_DATA.bg,!0;for(var k,T=w.length,D=this._curAttrData,j=0;j<T;j++)(k=w.params[j])>=30&&k<=37?(D.fg&=-50331904,D.fg|=16777216|k-30):k>=40&&k<=47?(D.bg&=-50331904,D.bg|=16777216|k-40):k>=90&&k<=97?(D.fg&=-50331904,D.fg|=16777224|k-90):k>=100&&k<=107?(D.bg&=-50331904,D.bg|=16777224|k-100):k===0?(D.fg=o.DEFAULT_ATTR_DATA.fg,D.bg=o.DEFAULT_ATTR_DATA.bg):k===1?D.fg|=134217728:k===3?D.bg|=67108864:k===4?(D.fg|=268435456,this._processUnderline(w.hasSubParams(j)?w.getSubParams(j)[0]:1,D)):k===5?D.fg|=536870912:k===7?D.fg|=67108864:k===8?D.fg|=1073741824:k===9?D.fg|=2147483648:k===2?D.bg|=134217728:k===21?this._processUnderline(2,D):k===22?(D.fg&=-134217729,D.bg&=-134217729):k===23?D.bg&=-67108865:k===24?D.fg&=-268435457:k===25?D.fg&=-536870913:k===27?D.fg&=-67108865:k===28?D.fg&=-1073741825:k===29?D.fg&=2147483647:k===39?(D.fg&=-67108864,D.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):k===49?(D.bg&=-67108864,D.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):k===38||k===48||k===58?j+=this._extractColor(w,j,D):k===59?(D.extended=D.extended.clone(),D.extended.underlineColor=-1,D.updateExtended()):k===100?(D.fg&=-67108864,D.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,D.bg&=-67108864,D.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",k);return!0},M.prototype.deviceStatus=function(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(h.C0.ESC+"[0n");break;case 6:var k=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(h.C0.ESC+"["+k+";"+T+"R")}return!0},M.prototype.deviceStatusPrivate=function(w){if(w.params[0]===6){var k=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(h.C0.ESC+"[?"+k+";"+T+"R")}return!0},M.prototype.softReset=function(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},M.prototype.setCursorStyle=function(w){var k=w.params[0]||1;switch(k){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var T=k%2==1;return this._optionsService.options.cursorBlink=T,!0},M.prototype.setScrollRegion=function(w){var k,T=w.params[0]||1;return(w.length<2||(k=w.params[1])>this._bufferService.rows||k===0)&&(k=this._bufferService.rows),k>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=k-1,this._setCursor(0,0)),!0},M.prototype.windowOptions=function(w){if(!S(w.params[0],this._optionsService.options.windowOptions))return!0;var k=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:k!==2&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(h.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:k!==0&&k!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),k!==0&&k!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:k!==0&&k!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),k!==0&&k!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},M.prototype.saveCursor=function(w){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},M.prototype.restoreCursor=function(w){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},M.prototype.setTitle=function(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0},M.prototype.setIconName=function(w){return this._iconName=w,!0},M.prototype.setOrReportIndexedColor=function(w){for(var k=[],T=w.split(";");T.length>1;){var D=T.shift(),j=T.shift();if(/^\d+$/.exec(D)){var W=parseInt(D);if(0<=W&&W<256)if(j==="?")k.push({type:0,index:W});else{var V=(0,b.parseColor)(j);V&&k.push({type:1,index:W,color:V})}}}return k.length&&this._onColor.fire(k),!0},M.prototype._setOrReportSpecialColor=function(w,k){for(var T=w.split(";"),D=0;D<T.length&&!(k>=this._specialColors.length);++D,++k)if(T[D]==="?")this._onColor.fire([{type:0,index:this._specialColors[k]}]);else{var j=(0,b.parseColor)(T[D]);j&&this._onColor.fire([{type:1,index:this._specialColors[k],color:j}])}return!0},M.prototype.setOrReportFgColor=function(w){return this._setOrReportSpecialColor(w,0)},M.prototype.setOrReportBgColor=function(w){return this._setOrReportSpecialColor(w,1)},M.prototype.setOrReportCursorColor=function(w){return this._setOrReportSpecialColor(w,2)},M.prototype.restoreIndexedColor=function(w){if(!w)return this._onColor.fire([{type:2}]),!0;for(var k=[],T=w.split(";"),D=0;D<T.length;++D)if(/^\d+$/.exec(T[D])){var j=parseInt(T[D]);0<=j&&j<256&&k.push({type:2,index:j})}return k.length&&this._onColor.fire(k),!0},M.prototype.restoreFgColor=function(w){return this._onColor.fire([{type:2,index:256}]),!0},M.prototype.restoreBgColor=function(w){return this._onColor.fire([{type:2,index:257}]),!0},M.prototype.restoreCursorColor=function(w){return this._onColor.fire([{type:2,index:258}]),!0},M.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},M.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},M.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},M.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0},M.prototype.selectCharset=function(w){return w.length!==2?(this.selectDefaultCharset(),!0):(w[0]==="/"||this._charsetService.setgCharset(C[w[0]],m.CHARSETS[w[1]]||m.DEFAULT_CHARSET),!0)},M.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},M.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},M.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var w=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,w,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},M.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},M.prototype.reset=function(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()},M.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},M.prototype.setgLevel=function(w){return this._charsetService.setgLevel(w),!0},M.prototype.screenAlignmentPattern=function(){var w=new r.CellData;w.content=1<<22|"E".charCodeAt(0),w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg,this._setCursor(0,0);for(var k=0;k<this._bufferService.rows;++k){var T=this._activeBuffer.ybase+this._activeBuffer.y+k,D=this._activeBuffer.lines.get(T);D&&(D.fill(w),D.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},M}(i.Disposable);a.InputHandler=E},844:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.Disposable=void 0;var v=function(){function _(){this._disposables=[],this._isDisposed=!1}return _.prototype.dispose=function(){this._isDisposed=!0;for(var f=0,h=this._disposables;f<h.length;f++)h[f].dispose();this._disposables.length=0},_.prototype.register=function(f){return this._disposables.push(f),f},_.prototype.unregister=function(f){var h=this._disposables.indexOf(f);h!==-1&&this._disposables.splice(h,1)},_}();function u(_){for(var f=0,h=_;f<h.length;f++)h[f].dispose();_.length=0}a.Disposable=v,a.disposeArray=u,a.getDisposeArrayDisposable=function(_){return{dispose:function(){return u(_)}}}},6114:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.isSafari=a.isFirefox=void 0;var v=typeof navigator=="undefined",u=v?"node":navigator.userAgent,_=v?"node":navigator.platform;a.isFirefox=u.includes("Firefox"),a.isSafari=/^((?!chrome|android).)*safari/i.test(u),a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),a.isIpad=_==="iPad",a.isIphone=_==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),a.isLinux=_.indexOf("Linux")>=0},8273:(I,a)=>{function v(u,_,f,h){if(f===void 0&&(f=0),h===void 0&&(h=u.length),f>=u.length)return u;f=(u.length+f)%u.length,h=h>=u.length?u.length:(u.length+h)%u.length;for(var m=f;m<h;++m)u[m]=_;return u}Object.defineProperty(a,"__esModule",{value:!0}),a.concat=a.fillFallback=a.fill=void 0,a.fill=function(u,_,f,h){return u.fill?u.fill(_,f,h):v(u,_,f,h)},a.fillFallback=v,a.concat=function(u,_){var f=new u.constructor(u.length+_.length);return f.set(u),f.set(_,u.length),f}},9282:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;var u=v(643);a.updateWindowsModeWrappedState=function(_){var f=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),h=f==null?void 0:f.get(_.cols-1),m=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);m&&h&&(m.isWrapped=h[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&h[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;var v=function(){function _(){this.fg=0,this.bg=0,this.extended=new u}return _.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},_.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},_.prototype.clone=function(){var f=new _;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},_.prototype.isInverse=function(){return 67108864&this.fg},_.prototype.isBold=function(){return 134217728&this.fg},_.prototype.isUnderline=function(){return 268435456&this.fg},_.prototype.isBlink=function(){return 536870912&this.fg},_.prototype.isInvisible=function(){return 1073741824&this.fg},_.prototype.isItalic=function(){return 67108864&this.bg},_.prototype.isDim=function(){return 134217728&this.bg},_.prototype.isStrikethrough=function(){return 2147483648&this.fg},_.prototype.getFgColorMode=function(){return 50331648&this.fg},_.prototype.getBgColorMode=function(){return 50331648&this.bg},_.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},_.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},_.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},_.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},_.prototype.isFgDefault=function(){return(50331648&this.fg)==0},_.prototype.isBgDefault=function(){return(50331648&this.bg)==0},_.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},_.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},_.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},_.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},_.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},_.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},_.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},_.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},_.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},_.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},_.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},_}();a.AttributeData=v;var u=function(){function _(f,h){f===void 0&&(f=0),h===void 0&&(h=-1),this.underlineStyle=f,this.underlineColor=h}return _.prototype.clone=function(){return new _(this.underlineStyle,this.underlineColor)},_.prototype.isEmpty=function(){return this.underlineStyle===0},_}();a.ExtendedAttrs=u},9092:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferStringIterator=a.Buffer=a.MAX_BUFFER_SIZE=void 0;var u=v(6349),_=v(8437),f=v(511),h=v(643),m=v(4634),p=v(4863),i=v(7116),n=v(3734);a.MAX_BUFFER_SIZE=4294967295;var l=function(){function t(e,r,s){this._hasScrollback=e,this._optionsService=r,this._bufferService=s,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=i.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(e,r){return new _.BufferLine(this._bufferService.cols,this.getNullCell(e),r)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.options.scrollback;return r>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:r},t.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=_.DEFAULT_ATTR_DATA);for(var r=this._rows;r--;)this.lines.push(this.getBlankLine(e))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(e,r){var s=this.getNullCell(_.DEFAULT_ATTR_DATA),c=this._getCorrectBufferLength(r);if(c>this.lines.maxLength&&(this.lines.maxLength=c),this.lines.length>0){if(this._cols<e)for(var d=0;d<this.lines.length;d++)this.lines.get(d).resize(e,s);var g=0;if(this._rows<r)for(var b=this._rows;b<r;b++)this.lines.length<r+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new _.BufferLine(e,s)):this.ybase>0&&this.lines.length<=this.ybase+this.y+g+1?(this.ybase--,g++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(e,s)));else for(b=this._rows;b>r;b--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(c<this.lines.maxLength){var C=this.lines.length-c;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=c}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),g&&(this.y+=g),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(d=0;d<this.lines.length;d++)this.lines.get(d).resize(e,s);this._cols=e,this._rows=r},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))},t.prototype._reflowLarger=function(e,r){var s=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(s.length>0){var c=(0,m.reflowLargerCreateNewLayout)(this.lines,s);(0,m.reflowLargerApplyNewLayout)(this.lines,c.layout),this._reflowLargerAdjustViewport(e,r,c.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(e,r,s){for(var c=this.getNullCell(_.DEFAULT_ATTR_DATA),d=s;d-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new _.BufferLine(e,c))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-s,0)},t.prototype._reflowSmaller=function(e,r){for(var s=this.getNullCell(_.DEFAULT_ATTR_DATA),c=[],d=0,g=this.lines.length-1;g>=0;g--){var b=this.lines.get(g);if(!(!b||!b.isWrapped&&b.getTrimmedLength()<=e)){for(var C=[b];b.isWrapped&&g>0;)b=this.lines.get(--g),C.unshift(b);var y=this.ybase+this.y;if(!(y>=g&&y<g+C.length)){var S,x=C[C.length-1].getTrimmedLength(),E=(0,m.reflowSmallerGetNewLineLengths)(C,this._cols,e),B=E.length-C.length;S=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);for(var M=[],w=0;w<B;w++){var k=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);M.push(k)}M.length>0&&(c.push({start:g+C.length+d,newLines:M}),d+=M.length),C.push.apply(C,M);var T=E.length-1,D=E[T];D===0&&(D=E[--T]);for(var j=C.length-B-1,W=x;j>=0;){var V=Math.min(W,D);if(C[T].copyCellsFrom(C[j],W-V,D-V,V,!0),(D-=V)==0&&(D=E[--T]),(W-=V)==0){j--;var G=Math.max(j,0);W=(0,m.getWrappedLineTrimmedLength)(C,G,this._cols)}}for(w=0;w<C.length;w++)E[w]<e&&C[w].setCell(E[w],s);for(var X=B-S;X-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+d)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+r-1)}}}if(c.length>0){var L=[],A=[];for(w=0;w<this.lines.length;w++)A.push(this.lines.get(w));var R=this.lines.length,F=R-1,O=0,U=c[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+d);var z=0;for(w=Math.min(this.lines.maxLength-1,R+d-1);w>=0;w--)if(U&&U.start>F+z){for(var ee=U.newLines.length-1;ee>=0;ee--)this.lines.set(w--,U.newLines[ee]);w++,L.push({index:F+1,amount:U.newLines.length}),z+=U.newLines.length,U=c[++O]}else this.lines.set(w,A[F--]);var re=0;for(w=L.length-1;w>=0;w--)L[w].index+=re,this.lines.onInsertEmitter.fire(L[w]),re+=L[w].amount;var oe=Math.max(0,R+d-this.lines.maxLength);oe>0&&this.lines.onTrimEmitter.fire(oe)}},t.prototype.stringIndexToBufferIndex=function(e,r,s){for(s===void 0&&(s=!1);r;){var c=this.lines.get(e);if(!c)return[-1,-1];for(var d=s?c.getTrimmedLength():c.length,g=0;g<d;++g)if(c.get(g)[h.CHAR_DATA_WIDTH_INDEX]&&(r-=c.get(g)[h.CHAR_DATA_CHAR_INDEX].length||1),r<0)return[e,g];e++}return[e,0]},t.prototype.translateBufferLineToString=function(e,r,s,c){s===void 0&&(s=0);var d=this.lines.get(e);return d?d.translateToString(r,s,c):""},t.prototype.getWrappedRangeForLine=function(e){for(var r=e,s=e;r>0&&this.lines.get(r).isWrapped;)r--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:r,last:s}},t.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},t.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.addMarker=function(e){var r=this,s=new p.Marker(e);return this.markers.push(s),s.register(this.lines.onTrim(function(c){s.line-=c,s.line<0&&s.dispose()})),s.register(this.lines.onInsert(function(c){s.line>=c.index&&(s.line+=c.amount)})),s.register(this.lines.onDelete(function(c){s.line>=c.index&&s.line<c.index+c.amount&&s.dispose(),s.line>c.index&&(s.line-=c.amount)})),s.register(s.onDispose(function(){return r._removeMarker(s)})),s},t.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},t.prototype.iterator=function(e,r,s,c,d){return new o(this,e,r,s,c,d)},t}();a.Buffer=l;var o=function(){function t(e,r,s,c,d,g){s===void 0&&(s=0),c===void 0&&(c=e.lines.length),d===void 0&&(d=0),g===void 0&&(g=0),this._buffer=e,this._trimRight=r,this._startIndex=s,this._endIndex=c,this._startOverscan=d,this._endOverscan=g,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var r="",s=e.first;s<=e.last;++s)r+=this._buffer.translateBufferLineToString(s,this._trimRight);return this._current=e.last+1,{range:e,content:r}},t}();a.BufferStringIterator=o},8437:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;var u=v(482),_=v(643),f=v(511),h=v(3734);a.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);var m=function(){function p(i,n,l){l===void 0&&(l=!1),this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*i);for(var o=n||f.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),t=0;t<i;++t)this.setCell(t,o);this.length=i}return p.prototype.get=function(i){var n=this._data[3*i+0],l=2097151&n;return[this._data[3*i+1],2097152&n?this._combined[i]:l?(0,u.stringFromCodePoint)(l):"",n>>22,2097152&n?this._combined[i].charCodeAt(this._combined[i].length-1):l]},p.prototype.set=function(i,n){this._data[3*i+1]=n[_.CHAR_DATA_ATTR_INDEX],n[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[i]=n[1],this._data[3*i+0]=2097152|i|n[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*i+0]=n[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|n[_.CHAR_DATA_WIDTH_INDEX]<<22},p.prototype.getWidth=function(i){return this._data[3*i+0]>>22},p.prototype.hasWidth=function(i){return 12582912&this._data[3*i+0]},p.prototype.getFg=function(i){return this._data[3*i+1]},p.prototype.getBg=function(i){return this._data[3*i+2]},p.prototype.hasContent=function(i){return 4194303&this._data[3*i+0]},p.prototype.getCodePoint=function(i){var n=this._data[3*i+0];return 2097152&n?this._combined[i].charCodeAt(this._combined[i].length-1):2097151&n},p.prototype.isCombined=function(i){return 2097152&this._data[3*i+0]},p.prototype.getString=function(i){var n=this._data[3*i+0];return 2097152&n?this._combined[i]:2097151&n?(0,u.stringFromCodePoint)(2097151&n):""},p.prototype.loadCell=function(i,n){var l=3*i;return n.content=this._data[l+0],n.fg=this._data[l+1],n.bg=this._data[l+2],2097152&n.content&&(n.combinedData=this._combined[i]),268435456&n.bg&&(n.extended=this._extendedAttrs[i]),n},p.prototype.setCell=function(i,n){2097152&n.content&&(this._combined[i]=n.combinedData),268435456&n.bg&&(this._extendedAttrs[i]=n.extended),this._data[3*i+0]=n.content,this._data[3*i+1]=n.fg,this._data[3*i+2]=n.bg},p.prototype.setCellFromCodePoint=function(i,n,l,o,t,e){268435456&t&&(this._extendedAttrs[i]=e),this._data[3*i+0]=n|l<<22,this._data[3*i+1]=o,this._data[3*i+2]=t},p.prototype.addCodepointToCell=function(i,n){var l=this._data[3*i+0];2097152&l?this._combined[i]+=(0,u.stringFromCodePoint)(n):(2097151&l?(this._combined[i]=(0,u.stringFromCodePoint)(2097151&l)+(0,u.stringFromCodePoint)(n),l&=-2097152,l|=2097152):l=n|1<<22,this._data[3*i+0]=l)},p.prototype.insertCells=function(i,n,l,o){if((i%=this.length)&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs),n<this.length-i){for(var t=new f.CellData,e=this.length-i-n-1;e>=0;--e)this.setCell(i+n+e,this.loadCell(i+e,t));for(e=0;e<n;++e)this.setCell(i+e,l)}else for(e=i;e<this.length;++e)this.setCell(e,l);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs)},p.prototype.deleteCells=function(i,n,l,o){if(i%=this.length,n<this.length-i){for(var t=new f.CellData,e=0;e<this.length-i-n;++e)this.setCell(i+e,this.loadCell(i+n+e,t));for(e=this.length-n;e<this.length;++e)this.setCell(e,l)}else for(e=i;e<this.length;++e)this.setCell(e,l);i&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs),this.getWidth(i)!==0||this.hasContent(i)||this.setCellFromCodePoint(i,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs)},p.prototype.replaceCells=function(i,n,l,o){for(i&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs);i<n&&i<this.length;)this.setCell(i++,l)},p.prototype.resize=function(i,n){if(i!==this.length){if(i>this.length){var l=new Uint32Array(3*i);this.length&&(3*i<this._data.length?l.set(this._data.subarray(0,3*i)):l.set(this._data)),this._data=l;for(var o=this.length;o<i;++o)this.setCell(o,n)}else if(i){(l=new Uint32Array(3*i)).set(this._data.subarray(0,3*i)),this._data=l;var t=Object.keys(this._combined);for(o=0;o<t.length;o++){var e=parseInt(t[o],10);e>=i&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=i}},p.prototype.fill=function(i){this._combined={},this._extendedAttrs={};for(var n=0;n<this.length;++n)this.setCell(n,i)},p.prototype.copyFrom=function(i){for(var n in this.length!==i.length?this._data=new Uint32Array(i._data):this._data.set(i._data),this.length=i.length,this._combined={},i._combined)this._combined[n]=i._combined[n];for(var n in this._extendedAttrs={},i._extendedAttrs)this._extendedAttrs[n]=i._extendedAttrs[n];this.isWrapped=i.isWrapped},p.prototype.clone=function(){var i=new p(0);for(var n in i._data=new Uint32Array(this._data),i.length=this.length,this._combined)i._combined[n]=this._combined[n];for(var n in this._extendedAttrs)i._extendedAttrs[n]=this._extendedAttrs[n];return i.isWrapped=this.isWrapped,i},p.prototype.getTrimmedLength=function(){for(var i=this.length-1;i>=0;--i)if(4194303&this._data[3*i+0])return i+(this._data[3*i+0]>>22);return 0},p.prototype.copyCellsFrom=function(i,n,l,o,t){var e=i._data;if(t)for(var r=o-1;r>=0;r--)for(var s=0;s<3;s++)this._data[3*(l+r)+s]=e[3*(n+r)+s];else for(r=0;r<o;r++)for(s=0;s<3;s++)this._data[3*(l+r)+s]=e[3*(n+r)+s];var c=Object.keys(i._combined);for(s=0;s<c.length;s++){var d=parseInt(c[s],10);d>=n&&(this._combined[d-n+l]=i._combined[d])}},p.prototype.translateToString=function(i,n,l){i===void 0&&(i=!1),n===void 0&&(n=0),l===void 0&&(l=this.length),i&&(l=Math.min(l,this.getTrimmedLength()));for(var o="";n<l;){var t=this._data[3*n+0],e=2097151&t;o+=2097152&t?this._combined[n]:e?(0,u.stringFromCodePoint)(e):_.WHITESPACE_CELL_CHAR,n+=t>>22||1}return o},p}();a.BufferLine=m},4841:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(v,u){if(v.start.y>v.end.y)throw new Error("Buffer range end ("+v.end.x+", "+v.end.y+") cannot be before start ("+v.start.x+", "+v.start.y+")");return u*(v.end.y-v.start.y)+(v.end.x-v.start.x+1)}},4634:(I,a)=>{function v(u,_,f){if(_===u.length-1)return u[_].getTrimmedLength();var h=!u[_].hasContent(f-1)&&u[_].getWidth(f-1)===1,m=u[_+1].getWidth(0)===2;return h&&m?f-1:f}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(u,_,f,h,m){for(var p=[],i=0;i<u.length-1;i++){var n=i,l=u.get(++n);if(l.isWrapped){for(var o=[u.get(i)];n<u.length&&l.isWrapped;)o.push(l),l=u.get(++n);if(h>=i&&h<n)i+=o.length-1;else{for(var t=0,e=v(o,t,_),r=1,s=0;r<o.length;){var c=v(o,r,_),d=c-s,g=f-e,b=Math.min(d,g);o[t].copyCellsFrom(o[r],s,e,b,!1),(e+=b)===f&&(t++,e=0),(s+=b)===c&&(r++,s=0),e===0&&t!==0&&o[t-1].getWidth(f-1)===2&&(o[t].copyCellsFrom(o[t-1],f-1,e++,1,!1),o[t-1].setCell(f-1,m))}o[t].replaceCells(e,f,m);for(var C=0,y=o.length-1;y>0&&(y>t||o[y].getTrimmedLength()===0);y--)C++;C>0&&(p.push(i+o.length-C),p.push(C)),i+=o.length-1}}}return p},a.reflowLargerCreateNewLayout=function(u,_){for(var f=[],h=0,m=_[h],p=0,i=0;i<u.length;i++)if(m===i){var n=_[++h];u.onDeleteEmitter.fire({index:i-p,amount:n}),i+=n-1,p+=n,m=_[++h]}else f.push(i);return{layout:f,countRemoved:p}},a.reflowLargerApplyNewLayout=function(u,_){for(var f=[],h=0;h<_.length;h++)f.push(u.get(_[h]));for(h=0;h<f.length;h++)u.set(h,f[h]);u.length=_.length},a.reflowSmallerGetNewLineLengths=function(u,_,f){for(var h=[],m=u.map(function(e,r){return v(u,r,_)}).reduce(function(e,r){return e+r}),p=0,i=0,n=0;n<m;){if(m-n<f){h.push(m-n);break}p+=f;var l=v(u,i,_);p>l&&(p-=l,i++);var o=u[i].getWidth(p-1)===2;o&&p--;var t=o?f-1:f;h.push(t),n+=t}return h},a.getWrappedLineTrimmedLength=v},5295:function(I,a,v){var u,_=this&&this.__extends||(u=function(p,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])},u(p,i)},function(p,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=p}u(p,i),p.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;var f=v(9092),h=v(8460),m=function(p){function i(n,l){var o=p.call(this)||this;return o._optionsService=n,o._bufferService=l,o._onBufferActivate=o.register(new h.EventEmitter),o.reset(),o}return _(i,p),Object.defineProperty(i.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(i.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),i.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},i.prototype.activateAltBuffer=function(n){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(n),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},i.prototype.resize=function(n,l){this._normal.resize(n,l),this._alt.resize(n,l)},i.prototype.setupTabStops=function(n){this._normal.setupTabStops(n),this._alt.setupTabStops(n)},i}(v(844).Disposable);a.BufferSet=m},511:function(I,a,v){var u,_=this&&this.__extends||(u=function(i,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(l[t]=o[t])},u(i,n)},function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function l(){this.constructor=i}u(i,n),i.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)});Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;var f=v(482),h=v(643),m=v(3734),p=function(i){function n(){var l=i!==null&&i.apply(this,arguments)||this;return l.content=0,l.fg=0,l.bg=0,l.extended=new m.ExtendedAttrs,l.combinedData="",l}return _(n,i),n.fromCharData=function(l){var o=new n;return o.setFromCharData(l),o},n.prototype.isCombined=function(){return 2097152&this.content},n.prototype.getWidth=function(){return this.content>>22},n.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""},n.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},n.prototype.setFromCharData=function(l){this.fg=l[h.CHAR_DATA_ATTR_INDEX],this.bg=0;var o=!1;if(l[h.CHAR_DATA_CHAR_INDEX].length>2)o=!0;else if(l[h.CHAR_DATA_CHAR_INDEX].length===2){var t=l[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){var e=l[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(t-55296)+e-56320+65536|l[h.CHAR_DATA_WIDTH_INDEX]<<22:o=!0}else o=!0}else this.content=l[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[h.CHAR_DATA_WIDTH_INDEX]<<22;o&&(this.combinedData=l[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|l[h.CHAR_DATA_WIDTH_INDEX]<<22)},n.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},n}(m.AttributeData);a.CellData=p},643:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=256,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:function(I,a,v){var u,_=this&&this.__extends||(u=function(m,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i[l]=n[l])},u(m,p)},function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function i(){this.constructor=m}u(m,p),m.prototype=p===null?Object.create(p):(i.prototype=p.prototype,new i)});Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;var f=v(8460),h=function(m){function p(i){var n=m.call(this)||this;return n.line=i,n._id=p._nextId++,n.isDisposed=!1,n._onDispose=new f.EventEmitter,n}return _(p,m),Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),p.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),m.prototype.dispose.call(this))},p._nextId=1,p}(v(844).Disposable);a.Marker=h},7116:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},a.CHARSETS.A={"#":"\xA3"},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},a.CHARSETS.C=a.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},a.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},a.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},a.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},a.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},a.CHARSETS.E=a.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},a.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},a.CHARSETS.H=a.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},a.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(I,a)=>{var v,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1=a.C0=void 0,(u=a.C0||(a.C0={})).NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F",(v=a.C1||(a.C1={})).PAD="\x80",v.HOP="\x81",v.BPH="\x82",v.NBH="\x83",v.IND="\x84",v.NEL="\x85",v.SSA="\x86",v.ESA="\x87",v.HTS="\x88",v.HTJ="\x89",v.VTS="\x8A",v.PLD="\x8B",v.PLU="\x8C",v.RI="\x8D",v.SS2="\x8E",v.SS3="\x8F",v.DCS="\x90",v.PU1="\x91",v.PU2="\x92",v.STS="\x93",v.CCH="\x94",v.MW="\x95",v.SPA="\x96",v.EPA="\x97",v.SOS="\x98",v.SGCI="\x99",v.SCI="\x9A",v.CSI="\x9B",v.ST="\x9C",v.OSC="\x9D",v.PM="\x9E",v.APC="\x9F"},7399:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;var u=v(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(f,h,m,p){var i={type:0,cancel:!1,key:void 0},n=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?i.key=h?u.C0.ESC+"OA":u.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?i.key=h?u.C0.ESC+"OD":u.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?i.key=h?u.C0.ESC+"OC":u.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(i.key=h?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(f.shiftKey){i.key=u.C0.BS;break}if(f.altKey){i.key=u.C0.ESC+u.C0.DEL;break}i.key=u.C0.DEL;break;case 9:if(f.shiftKey){i.key=u.C0.ESC+"[Z";break}i.key=u.C0.HT,i.cancel=!0;break;case 13:i.key=f.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,i.cancel=!0;break;case 27:i.key=u.C0.ESC,f.altKey&&(i.key=u.C0.ESC+u.C0.ESC),i.cancel=!0;break;case 37:if(f.metaKey)break;n?(i.key=u.C0.ESC+"[1;"+(n+1)+"D",i.key===u.C0.ESC+"[1;3D"&&(i.key=u.C0.ESC+(m?"b":"[1;5D"))):i.key=h?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(f.metaKey)break;n?(i.key=u.C0.ESC+"[1;"+(n+1)+"C",i.key===u.C0.ESC+"[1;3C"&&(i.key=u.C0.ESC+(m?"f":"[1;5C"))):i.key=h?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(f.metaKey)break;n?(i.key=u.C0.ESC+"[1;"+(n+1)+"A",m||i.key!==u.C0.ESC+"[1;3A"||(i.key=u.C0.ESC+"[1;5A")):i.key=h?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(f.metaKey)break;n?(i.key=u.C0.ESC+"[1;"+(n+1)+"B",m||i.key!==u.C0.ESC+"[1;3B"||(i.key=u.C0.ESC+"[1;5B")):i.key=h?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(i.key=u.C0.ESC+"[2~");break;case 46:i.key=n?u.C0.ESC+"[3;"+(n+1)+"~":u.C0.ESC+"[3~";break;case 36:i.key=n?u.C0.ESC+"[1;"+(n+1)+"H":h?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:i.key=n?u.C0.ESC+"[1;"+(n+1)+"F":h?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:f.shiftKey?i.type=2:i.key=u.C0.ESC+"[5~";break;case 34:f.shiftKey?i.type=3:i.key=u.C0.ESC+"[6~";break;case 112:i.key=n?u.C0.ESC+"[1;"+(n+1)+"P":u.C0.ESC+"OP";break;case 113:i.key=n?u.C0.ESC+"[1;"+(n+1)+"Q":u.C0.ESC+"OQ";break;case 114:i.key=n?u.C0.ESC+"[1;"+(n+1)+"R":u.C0.ESC+"OR";break;case 115:i.key=n?u.C0.ESC+"[1;"+(n+1)+"S":u.C0.ESC+"OS";break;case 116:i.key=n?u.C0.ESC+"[15;"+(n+1)+"~":u.C0.ESC+"[15~";break;case 117:i.key=n?u.C0.ESC+"[17;"+(n+1)+"~":u.C0.ESC+"[17~";break;case 118:i.key=n?u.C0.ESC+"[18;"+(n+1)+"~":u.C0.ESC+"[18~";break;case 119:i.key=n?u.C0.ESC+"[19;"+(n+1)+"~":u.C0.ESC+"[19~";break;case 120:i.key=n?u.C0.ESC+"[20;"+(n+1)+"~":u.C0.ESC+"[20~";break;case 121:i.key=n?u.C0.ESC+"[21;"+(n+1)+"~":u.C0.ESC+"[21~";break;case 122:i.key=n?u.C0.ESC+"[23;"+(n+1)+"~":u.C0.ESC+"[23~";break;case 123:i.key=n?u.C0.ESC+"[24;"+(n+1)+"~":u.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(m&&!p||!f.altKey||f.metaKey)!m||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?i.key=f.key:f.key&&f.ctrlKey&&f.key==="_"&&(i.key=u.C0.US):f.keyCode===65&&(i.type=1);else{var l=_[f.keyCode],o=l==null?void 0:l[f.shiftKey?1:0];if(o)i.key=u.C0.ESC+o;else if(f.keyCode>=65&&f.keyCode<=90){var t=f.ctrlKey?f.keyCode-64:f.keyCode+32;i.key=u.C0.ESC+String.fromCharCode(t)}}else f.keyCode>=65&&f.keyCode<=90?i.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?i.key=u.C0.NUL:f.keyCode>=51&&f.keyCode<=55?i.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?i.key=u.C0.DEL:f.keyCode===219?i.key=u.C0.ESC:f.keyCode===220?i.key=u.C0.FS:f.keyCode===221&&(i.key=u.C0.GS)}return i}},482:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(_){return _>65535?(_-=65536,String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):String.fromCharCode(_)},a.utf32ToString=function(_,f,h){f===void 0&&(f=0),h===void 0&&(h=_.length);for(var m="",p=f;p<h;++p){var i=_[p];i>65535?(i-=65536,m+=String.fromCharCode(55296+(i>>10))+String.fromCharCode(i%1024+56320)):m+=String.fromCharCode(i)}return m};var v=function(){function _(){this._interim=0}return _.prototype.clear=function(){this._interim=0},_.prototype.decode=function(f,h){var m=f.length;if(!m)return 0;var p=0,i=0;this._interim&&(56320<=(o=f.charCodeAt(i++))&&o<=57343?h[p++]=1024*(this._interim-55296)+o-56320+65536:(h[p++]=this._interim,h[p++]=o),this._interim=0);for(var n=i;n<m;++n){var l=f.charCodeAt(n);if(55296<=l&&l<=56319){if(++n>=m)return this._interim=l,p;var o;56320<=(o=f.charCodeAt(n))&&o<=57343?h[p++]=1024*(l-55296)+o-56320+65536:(h[p++]=l,h[p++]=o)}else l!==65279&&(h[p++]=l)}return p},_}();a.StringToUtf32=v;var u=function(){function _(){this.interim=new Uint8Array(3)}return _.prototype.clear=function(){this.interim.fill(0)},_.prototype.decode=function(f,h){var m=f.length;if(!m)return 0;var p,i,n,l,o=0,t=0,e=0;if(this.interim[0]){var r=!1,s=this.interim[0];s&=(224&s)==192?31:(240&s)==224?15:7;for(var c=0,d=void 0;(d=63&this.interim[++c])&&c<4;)s<<=6,s|=d;for(var g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-c;e<b;){if(e>=m)return 0;if((192&(d=f[e++]))!=128){e--,r=!0;break}this.interim[c++]=d,s<<=6,s|=63&d}r||(g===2?s<128?e--:h[o++]=s:g===3?s<2048||s>=55296&&s<=57343||s===65279||(h[o++]=s):s<65536||s>1114111||(h[o++]=s)),this.interim.fill(0)}for(var C=m-4,y=e;y<m;){for(;!(!(y<C)||128&(p=f[y])||128&(i=f[y+1])||128&(n=f[y+2])||128&(l=f[y+3]));)h[o++]=p,h[o++]=i,h[o++]=n,h[o++]=l,y+=4;if((p=f[y++])<128)h[o++]=p;else if((224&p)==192){if(y>=m)return this.interim[0]=p,o;if((192&(i=f[y++]))!=128){y--;continue}if((t=(31&p)<<6|63&i)<128){y--;continue}h[o++]=t}else if((240&p)==224){if(y>=m)return this.interim[0]=p,o;if((192&(i=f[y++]))!=128){y--;continue}if(y>=m)return this.interim[0]=p,this.interim[1]=i,o;if((192&(n=f[y++]))!=128){y--;continue}if((t=(15&p)<<12|(63&i)<<6|63&n)<2048||t>=55296&&t<=57343||t===65279)continue;h[o++]=t}else if((248&p)==240){if(y>=m)return this.interim[0]=p,o;if((192&(i=f[y++]))!=128){y--;continue}if(y>=m)return this.interim[0]=p,this.interim[1]=i,o;if((192&(n=f[y++]))!=128){y--;continue}if(y>=m)return this.interim[0]=p,this.interim[1]=i,this.interim[2]=n,o;if((192&(l=f[y++]))!=128){y--;continue}if((t=(7&p)<<18|(63&i)<<12|(63&n)<<6|63&l)<65536||t>1114111)continue;h[o++]=t}}return o},_}();a.Utf8ToUtf32=u},225:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;var u,_=v(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],m=function(){function p(){if(this.version="6",!u){u=new Uint8Array(65536),(0,_.fill)(u,1),u[0]=0,(0,_.fill)(u,0,1,32),(0,_.fill)(u,0,127,160),(0,_.fill)(u,2,4352,4448),u[9001]=2,u[9002]=2,(0,_.fill)(u,2,11904,42192),u[12351]=1,(0,_.fill)(u,2,44032,55204),(0,_.fill)(u,2,63744,64256),(0,_.fill)(u,2,65040,65050),(0,_.fill)(u,2,65072,65136),(0,_.fill)(u,2,65280,65377),(0,_.fill)(u,2,65504,65511);for(var i=0;i<f.length;++i)(0,_.fill)(u,0,f[i][0],f[i][1]+1)}}return p.prototype.wcwidth=function(i){return i<32?0:i<127?1:i<65536?u[i]:function(n,l){var o,t=0,e=l.length-1;if(n<l[0][0]||n>l[e][1])return!1;for(;e>=t;)if(n>l[o=t+e>>1][1])t=o+1;else{if(!(n<l[o][0]))return!0;e=o-1}return!1}(i,h)?0:i>=131072&&i<=196605||i>=196608&&i<=262141?2:1},p}();a.UnicodeV6=m},5981:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;var v=typeof queueMicrotask=="undefined"?function(_){Promise.resolve().then(_)}:queueMicrotask,u=function(){function _(f){this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return _.prototype.writeSync=function(f,h){if(h!==void 0&&this._syncCalls>h)this._syncCalls=0;else if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);var p=this._callbacks.shift();p&&p()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},_.prototype.write=function(f,h){var m=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return m._innerWrite()})),this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h)},_.prototype._innerWrite=function(f,h){var m=this;f===void 0&&(f=0),h===void 0&&(h=!0);for(var p=f||Date.now();this._writeBuffer.length>this._bufferOffset;){var i=this._writeBuffer[this._bufferOffset],n=this._action(i,h);if(n)return void n.catch(function(o){return v(function(){throw o}),Promise.resolve(!1)}).then(function(o){return Date.now()-p>=12?setTimeout(function(){return m._innerWrite(0,o)}):m._innerWrite(p,o)});var l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=i.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return m._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},_}();a.WriteBuffer=u},5941:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;var v=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function _(f,h){var m=f.toString(16),p=m.length<2?"0"+m:m;switch(h){case 4:return m[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}a.parseColor=function(f){if(f){var h=f.toLowerCase();if(h.indexOf("rgb:")===0){h=h.slice(4);var m=v.exec(h);if(m){var p=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/p*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/p*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/p*255)]}}else if(h.indexOf("#")===0&&(h=h.slice(1),u.exec(h)&&[3,6,9,12].includes(h.length))){for(var i=h.length/3,n=[0,0,0],l=0;l<3;++l){var o=parseInt(h.slice(i*l,i*l+i),16);n[l]=i===1?o<<4:i===2?o:i===3?o>>4:o>>8}return n}}},a.toRgbString=function(f,h){h===void 0&&(h=16);var m=f[0],p=f[1],i=f[2];return"rgb:"+_(m,h)+"/"+_(p,h)+"/"+_(i,h)}},5770:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;var u=v(482),_=v(8742),f=v(5770),h=[],m=function(){function n(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return n.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=h},n.prototype.registerHandler=function(l,o){this._handlers[l]===void 0&&(this._handlers[l]=[]);var t=this._handlers[l];return t.push(o),{dispose:function(){var e=t.indexOf(o);e!==-1&&t.splice(e,1)}}},n.prototype.clearHandler=function(l){this._handlers[l]&&delete this._handlers[l]},n.prototype.setHandlerFallback=function(l){this._handlerFb=l},n.prototype.reset=function(){if(this._active.length)for(var l=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;l>=0;--l)this._active[l].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0},n.prototype.hook=function(l,o){if(this.reset(),this._ident=l,this._active=this._handlers[l]||h,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].hook(o);else this._handlerFb(this._ident,"HOOK",o)},n.prototype.put=function(l,o,t){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(l,o,t);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(l,o,t))},n.prototype.unhook=function(l,o){if(o===void 0&&(o=!0),this._active.length){var t=!1,e=this._active.length-1,r=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,t=o,r=this._stack.fallThrough,this._stack.paused=!1),!r&&t===!1){for(;e>=0&&(t=this._active[e].unhook(l))!==!0;e--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,t;e--}for(;e>=0;e--)if((t=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",l);this._active=h,this._ident=0},n}();a.DcsParser=m;var p=new _.Params;p.addParam(0);var i=function(){function n(l){this._handler=l,this._data="",this._params=p,this._hitLimit=!1}return n.prototype.hook=function(l){this._params=l.length>1||l.params[0]?l.clone():p,this._data="",this._hitLimit=!1},n.prototype.put=function(l,o,t){this._hitLimit||(this._data+=(0,u.utf32ToString)(l,o,t),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},n.prototype.unhook=function(l){var o=this,t=!1;if(this._hitLimit)t=!1;else if(l&&(t=this._handler(this._data,this._params))instanceof Promise)return t.then(function(e){return o._params=p,o._data="",o._hitLimit=!1,e});return this._params=p,this._data="",this._hitLimit=!1,t},n}();a.DcsHandler=i},2015:function(I,a,v){var u,_=this&&this.__extends||(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])},u(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}u(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;var f=v(844),h=v(8273),m=v(8742),p=v(6242),i=v(6351),n=function(){function t(e){this.table=new Uint8Array(e)}return t.prototype.setDefault=function(e,r){(0,h.fill)(this.table,e<<4|r)},t.prototype.add=function(e,r,s,c){this.table[r<<8|e]=s<<4|c},t.prototype.addMany=function(e,r,s,c){for(var d=0;d<e.length;d++)this.table[r<<8|e[d]]=s<<4|c},t}();a.TransitionTable=n;var l=160;a.VT500_TRANSITION_TABLE=function(){var t=new n(4095),e=Array.apply(null,Array(256)).map(function(b,C){return C}),r=function(b,C){return e.slice(b,C)},s=r(32,127),c=r(0,24);c.push(25),c.push.apply(c,r(28,32));var d,g=r(0,14);for(d in t.setDefault(1,0),t.addMany(s,0,2,0),g)t.addMany([24,26,153,154],d,3,0),t.addMany(r(128,144),d,3,0),t.addMany(r(144,152),d,3,0),t.add(156,d,0,0),t.add(27,d,11,1),t.add(157,d,4,8),t.addMany([152,158,159],d,0,7),t.add(155,d,11,3),t.add(144,d,11,9);return t.addMany(c,0,3,0),t.addMany(c,1,3,1),t.add(127,1,0,1),t.addMany(c,8,0,8),t.addMany(c,3,3,3),t.add(127,3,0,3),t.addMany(c,4,3,4),t.add(127,4,0,4),t.addMany(c,6,3,6),t.addMany(c,5,3,5),t.add(127,5,0,5),t.addMany(c,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(r(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(c,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(r(64,127),3,7,0),t.addMany(r(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(r(48,60),4,8,4),t.addMany(r(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(r(32,64),6,0,6),t.add(127,6,0,6),t.addMany(r(64,127),6,0,0),t.addMany(r(32,48),3,9,5),t.addMany(r(32,48),5,9,5),t.addMany(r(48,64),5,0,6),t.addMany(r(64,127),5,7,0),t.addMany(r(32,48),4,9,5),t.addMany(r(32,48),1,9,2),t.addMany(r(32,48),2,9,2),t.addMany(r(48,127),2,10,0),t.addMany(r(48,80),1,10,0),t.addMany(r(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(r(96,127),1,10,0),t.add(80,1,11,9),t.addMany(c,9,0,9),t.add(127,9,0,9),t.addMany(r(28,32),9,0,9),t.addMany(r(32,48),9,9,12),t.addMany(r(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(c,11,0,11),t.addMany(r(32,128),11,0,11),t.addMany(r(28,32),11,0,11),t.addMany(c,10,0,10),t.add(127,10,0,10),t.addMany(r(28,32),10,0,10),t.addMany(r(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(r(32,48),10,9,12),t.addMany(c,12,0,12),t.add(127,12,0,12),t.addMany(r(28,32),12,0,12),t.addMany(r(32,48),12,9,12),t.addMany(r(48,64),12,0,11),t.addMany(r(64,127),12,12,13),t.addMany(r(64,127),10,12,13),t.addMany(r(64,127),9,12,13),t.addMany(c,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(l,0,2,0),t.add(l,8,5,8),t.add(l,6,0,6),t.add(l,11,0,11),t.add(l,13,13,13),t}();var o=function(t){function e(r){r===void 0&&(r=a.VT500_TRANSITION_TABLE);var s=t.call(this)||this;return s._transitions=r,s._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},s.initialState=0,s.currentState=s.initialState,s._params=new m.Params,s._params.addParam(0),s._collect=0,s.precedingCodepoint=0,s._printHandlerFb=function(c,d,g){},s._executeHandlerFb=function(c){},s._csiHandlerFb=function(c,d){},s._escHandlerFb=function(c){},s._errorHandlerFb=function(c){return c},s._printHandler=s._printHandlerFb,s._executeHandlers=Object.create(null),s._csiHandlers=Object.create(null),s._escHandlers=Object.create(null),s._oscParser=new p.OscParser,s._dcsParser=new i.DcsParser,s._errorHandler=s._errorHandlerFb,s.registerEscHandler({final:"\\"},function(){return!0}),s}return _(e,t),e.prototype._identifier=function(r,s){s===void 0&&(s=[64,126]);var c=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if((c=r.prefix.charCodeAt(0))&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var d=0;d<r.intermediates.length;++d){var g=r.intermediates.charCodeAt(d);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=g}}if(r.final.length!==1)throw new Error("final must be a single byte");var b=r.final.charCodeAt(0);if(s[0]>b||b>s[1])throw new Error("final must be in range "+s[0]+" .. "+s[1]);return(c<<=8)|b},e.prototype.identToString=function(r){for(var s=[];r;)s.push(String.fromCharCode(255&r)),r>>=8;return s.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(r){this._printHandler=r},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(r,s){var c=this._identifier(r,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);var d=this._escHandlers[c];return d.push(s),{dispose:function(){var g=d.indexOf(s);g!==-1&&d.splice(g,1)}}},e.prototype.clearEscHandler=function(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]},e.prototype.setEscHandlerFallback=function(r){this._escHandlerFb=r},e.prototype.setExecuteHandler=function(r,s){this._executeHandlers[r.charCodeAt(0)]=s},e.prototype.clearExecuteHandler=function(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(r){this._executeHandlerFb=r},e.prototype.registerCsiHandler=function(r,s){var c=this._identifier(r);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);var d=this._csiHandlers[c];return d.push(s),{dispose:function(){var g=d.indexOf(s);g!==-1&&d.splice(g,1)}}},e.prototype.clearCsiHandler=function(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]},e.prototype.setCsiHandlerFallback=function(r){this._csiHandlerFb=r},e.prototype.registerDcsHandler=function(r,s){return this._dcsParser.registerHandler(this._identifier(r),s)},e.prototype.clearDcsHandler=function(r){this._dcsParser.clearHandler(this._identifier(r))},e.prototype.setDcsHandlerFallback=function(r){this._dcsParser.setHandlerFallback(r)},e.prototype.registerOscHandler=function(r,s){return this._oscParser.registerHandler(r,s)},e.prototype.clearOscHandler=function(r){this._oscParser.clearHandler(r)},e.prototype.setOscHandlerFallback=function(r){this._oscParser.setHandlerFallback(r)},e.prototype.setErrorHandler=function(r){this._errorHandler=r},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(r,s,c,d,g){this._parseStack.state=r,this._parseStack.handlers=s,this._parseStack.handlerPos=c,this._parseStack.transition=d,this._parseStack.chunkPos=g},e.prototype.parse=function(r,s,c){var d,g=0,b=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var y=this._parseStack.handlers,S=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&S>-1){for(;S>=0&&(d=y[S](this._params))!==!0;S--)if(d instanceof Promise)return this._parseStack.handlerPos=S,d}this._parseStack.handlers=[];break;case 4:if(c===!1&&S>-1){for(;S>=0&&(d=y[S]())!==!0;S--)if(d instanceof Promise)return this._parseStack.handlerPos=S,d}this._parseStack.handlers=[];break;case 6:if(g=r[this._parseStack.chunkPos],d=this._dcsParser.unhook(g!==24&&g!==26,c))return d;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(g=r[this._parseStack.chunkPos],d=this._oscParser.end(g!==24&&g!==26,c))return d;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var x=C;x<s;++x){switch(g=r[x],(b=this._transitions.table[this.currentState<<8|(g<160?g:l)])>>4){case 2:for(var E=x+1;;++E){if(E>=s||(g=r[E])<32||g>126&&g<l){this._printHandler(r,x,E),x=E-1;break}if(++E>=s||(g=r[E])<32||g>126&&g<l){this._printHandler(r,x,E),x=E-1;break}if(++E>=s||(g=r[E])<32||g>126&&g<l){this._printHandler(r,x,E),x=E-1;break}if(++E>=s||(g=r[E])<32||g>126&&g<l){this._printHandler(r,x,E),x=E-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var B=(y=this._csiHandlers[this._collect<<8|g])?y.length-1:-1;B>=0&&(d=y[B](this._params))!==!0;B--)if(d instanceof Promise)return this._preserveStack(3,y,B,b,x),d;B<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingCodepoint=0;break;case 8:do switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}while(++x<s&&(g=r[x])>47&&g<60);x--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:for(var M=this._escHandlers[this._collect<<8|g],w=M?M.length-1:-1;w>=0&&(d=M[w]())!==!0;w--)if(d instanceof Promise)return this._preserveStack(4,M,w,b,x),d;w<0&&this._escHandlerFb(this._collect<<8|g),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(var k=x+1;;++k)if(k>=s||(g=r[k])===24||g===26||g===27||g>127&&g<l){this._dcsParser.put(r,x,k),x=k-1;break}break;case 14:if(d=this._dcsParser.unhook(g!==24&&g!==26))return this._preserveStack(6,[],0,b,x),d;g===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var T=x+1;;T++)if(T>=s||(g=r[T])<32||g>127&&g<l){this._oscParser.put(r,x,T),x=T-1;break}break;case 6:if(d=this._oscParser.end(g!==24&&g!==26))return this._preserveStack(5,[],0,b,x),d;g===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}},e}(f.Disposable);a.EscapeSequenceParser=o},6242:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;var u=v(5770),_=v(482),f=[],h=function(){function p(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return p.prototype.registerHandler=function(i,n){this._handlers[i]===void 0&&(this._handlers[i]=[]);var l=this._handlers[i];return l.push(n),{dispose:function(){var o=l.indexOf(n);o!==-1&&l.splice(o,1)}}},p.prototype.clearHandler=function(i){this._handlers[i]&&delete this._handlers[i]},p.prototype.setHandlerFallback=function(i){this._handlerFb=i},p.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},p.prototype.reset=function(){if(this._state===2)for(var i=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;i>=0;--i)this._active[i].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},p.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].start();else this._handlerFb(this._id,"START")},p.prototype._put=function(i,n,l){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(i,n,l);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(i,n,l))},p.prototype.start=function(){this.reset(),this._state=1},p.prototype.put=function(i,n,l){if(this._state!==3){if(this._state===1)for(;n<l;){var o=i[n++];if(o===59){this._state=2,this._start();break}if(o<48||57<o)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+o-48}this._state===2&&l-n>0&&this._put(i,n,l)}},p.prototype.end=function(i,n){if(n===void 0&&(n=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var l=!1,o=this._active.length-1,t=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,l=n,t=this._stack.fallThrough,this._stack.paused=!1),!t&&l===!1){for(;o>=0&&(l=this._active[o].end(i))!==!0;o--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,l;o--}for(;o>=0;o--)if((l=this._active[o].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,l}else this._handlerFb(this._id,"END",i);this._active=f,this._id=-1,this._state=0}},p}();a.OscParser=h;var m=function(){function p(i){this._handler=i,this._data="",this._hitLimit=!1}return p.prototype.start=function(){this._data="",this._hitLimit=!1},p.prototype.put=function(i,n,l){this._hitLimit||(this._data+=(0,_.utf32ToString)(i,n,l),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},p.prototype.end=function(i){var n=this,l=!1;if(this._hitLimit)l=!1;else if(i&&(l=this._handler(this._data))instanceof Promise)return l.then(function(o){return n._data="",n._hitLimit=!1,o});return this._data="",this._hitLimit=!1,l},p}();a.OscHandler=m},8742:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;var v=2147483647,u=function(){function _(f,h){if(f===void 0&&(f=32),h===void 0&&(h=32),this.maxLength=f,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return _.fromArray=function(f){var h=new _;if(!f.length)return h;for(var m=Array.isArray(f[0])?1:0;m<f.length;++m){var p=f[m];if(Array.isArray(p))for(var i=0;i<p.length;++i)h.addSubParam(p[i]);else h.addParam(p)}return h},_.prototype.clone=function(){var f=new _(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},_.prototype.toArray=function(){for(var f=[],h=0;h<this.length;++h){f.push(this.params[h]);var m=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];p-m>0&&f.push(Array.prototype.slice.call(this._subParams,m,p))}return f},_.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},_.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>v?v:f}},_.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>v?v:f,this._subParamsIdx[this.length-1]++}},_.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},_.prototype.getSubParams=function(f){var h=this._subParamsIdx[f]>>8,m=255&this._subParamsIdx[f];return m-h>0?this._subParams.subarray(h,m):null},_.prototype.getSubParamsAll=function(){for(var f={},h=0;h<this.length;++h){var m=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];p-m>0&&(f[h]=this._subParams.slice(m,p))}return f},_.prototype.addDigit=function(f){var h;if(!(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var m=this._digitIsSub?this._subParams:this.params,p=m[h-1];m[h-1]=~p?Math.min(10*p+f,v):f}},_}();a.Params=u},5741:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0;var v=function(){function u(){this._addons=[]}return u.prototype.dispose=function(){for(var _=this._addons.length-1;_>=0;_--)this._addons[_].instance.dispose()},u.prototype.loadAddon=function(_,f){var h=this,m={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(m),f.dispose=function(){return h._wrappedAddonDispose(m)},f.activate(_)},u.prototype._wrappedAddonDispose=function(_){if(!_.isDisposed){for(var f=-1,h=0;h<this._addons.length;h++)if(this._addons[h]===_){f=h;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");_.isDisposed=!0,_.dispose.apply(_.instance),this._addons.splice(f,1)}},u}();a.AddonManager=v},8771:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;var u=v(3785),_=v(511),f=function(){function h(m,p){this._buffer=m,this.type=p}return h.prototype.init=function(m){return this._buffer=m,this},Object.defineProperty(h.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),h.prototype.getLine=function(m){var p=this._buffer.lines.get(m);if(p)return new u.BufferLineApiView(p)},h.prototype.getNullCell=function(){return new _.CellData},h}();a.BufferApiView=f},3785:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;var u=v(511),_=function(){function f(h){this._line=h}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(h,m){if(!(h<0||h>=this._line.length))return m?(this._line.loadCell(h,m),m):this._line.loadCell(h,new u.CellData)},f.prototype.translateToString=function(h,m,p){return this._line.translateToString(h,m,p)},f}();a.BufferLineApiView=_},8285:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;var u=v(8771),_=v(8460),f=function(){function h(m){var p=this;this._core=m,this._onBufferChange=new _.EventEmitter,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return p._onBufferChange.fire(p.active)})}return Object.defineProperty(h.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),h}();a.BufferNamespaceApi=f},7975:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0;var v=function(){function u(_){this._core=_}return u.prototype.registerCsiHandler=function(_,f){return this._core.registerCsiHandler(_,function(h){return f(h.toArray())})},u.prototype.addCsiHandler=function(_,f){return this.registerCsiHandler(_,f)},u.prototype.registerDcsHandler=function(_,f){return this._core.registerDcsHandler(_,function(h,m){return f(h,m.toArray())})},u.prototype.addDcsHandler=function(_,f){return this.registerDcsHandler(_,f)},u.prototype.registerEscHandler=function(_,f){return this._core.registerEscHandler(_,f)},u.prototype.addEscHandler=function(_,f){return this.registerEscHandler(_,f)},u.prototype.registerOscHandler=function(_,f){return this._core.registerOscHandler(_,f)},u.prototype.addOscHandler=function(_,f){return this.registerOscHandler(_,f)},u}();a.ParserApi=v},7090:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0;var v=function(){function u(_){this._core=_}return u.prototype.register=function(_){this._core.unicodeService.register(_)},Object.defineProperty(u.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(_){this._core.unicodeService.activeVersion=_},enumerable:!1,configurable:!0}),u}();a.UnicodeApi=v},744:function(I,a,v){var u,_=this&&this.__extends||(u=function(o,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},u(o,t)},function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}u(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(o,t,e,r){var s,c=arguments.length,d=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,e,r);else for(var g=o.length-1;g>=0;g--)(s=o[g])&&(d=(c<3?s(d):c>3?s(t,e,d):s(t,e))||d);return c>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;var m=v(2585),p=v(5295),i=v(8460),n=v(844);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;var l=function(o){function t(e){var r=o.call(this)||this;return r._optionsService=e,r.isUserScrolling=!1,r._onResize=new i.EventEmitter,r._onScroll=new i.EventEmitter,r.cols=Math.max(e.options.cols||0,a.MINIMUM_COLS),r.rows=Math.max(e.options.rows||0,a.MINIMUM_ROWS),r.buffers=new p.BufferSet(e,r),r}return _(t,o),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){o.prototype.dispose.call(this),this.buffers.dispose()},t.prototype.resize=function(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:r})},t.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},t.prototype.scroll=function(e,r){r===void 0&&(r=!1);var s,c=this.buffer;(s=this._cachedBlankLine)&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=c.getBlankLine(e,r),this._cachedBlankLine=s),s.isWrapped=r;var d=c.ybase+c.scrollTop,g=c.ybase+c.scrollBottom;if(c.scrollTop===0){var b=c.lines.isFull;g===c.lines.length-1?b?c.lines.recycle().copyFrom(s):c.lines.push(s.clone()):c.lines.splice(g+1,0,s.clone()),b?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{var C=g-d+1;c.lines.shiftElements(d+1,C-1,-1),c.lines.set(g,s.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)},t.prototype.scrollLines=function(e,r,s){var c=this.buffer;if(e<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else e+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);var d=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+e,c.ybase),0),d!==c.ydisp&&(r||this._onScroll.fire(c.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var r=e-this.buffer.ydisp;r!==0&&this.scrollLines(r)},f([h(0,m.IOptionsService)],t)}(n.Disposable);a.BufferService=l},7994:(I,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0;var v=function(){function u(){this.glevel=0,this._charsets=[]}return u.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},u.prototype.setgLevel=function(_){this.glevel=_,this.charset=this._charsets[_]},u.prototype.setgCharset=function(_,f){this._charsets[_]=f,this.glevel===_&&(this.charset=f)},u}();a.CharsetService=v},1753:function(I,a,v){var u=this&&this.__decorate||function(o,t,e,r){var s,c=arguments.length,d=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,t,e,r);else for(var g=o.length-1;g>=0;g--)(s=o[g])&&(d=(c<3?s(d):c>3?s(t,e,d):s(t,e))||d);return c>3&&d&&Object.defineProperty(t,e,d),d},_=this&&this.__param||function(o,t){return function(e,r){t(e,r,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;var f=v(2585),h=v(8460),m={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(o){return o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)}},VT200:{events:19,restrict:function(o){return o.action!==32}},DRAG:{events:23,restrict:function(o){return o.action!==32||o.button!==3}},ANY:{events:31,restrict:function(o){return!0}}};function p(o,t){var e=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(e|=64,e|=o.action):(e|=3&o.button,4&o.button&&(e|=64),8&o.button&&(e|=128),o.action===32?e|=32:o.action!==0||t||(e|=3)),e}var i=String.fromCharCode,n={DEFAULT:function(o){var t=[p(o,!1)+32,o.col+32,o.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"[M"+i(t[0])+i(t[1])+i(t[2])},SGR:function(o){var t=o.action===0&&o.button!==4?"m":"M";return"[<"+p(o,!0)+";"+o.col+";"+o.row+t}},l=function(){function o(t,e){this._bufferService=t,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new h.EventEmitter,this._lastEvent=null;for(var r=0,s=Object.keys(m);r<s.length;r++){var c=s[r];this.addProtocol(c,m[c])}for(var d=0,g=Object.keys(n);d<g.length;d++){var b=g[d];this.addEncoding(b,n[b])}this.reset()}return o.prototype.addProtocol=function(t,e){this._protocols[t]=e},o.prototype.addEncoding=function(t,e){this._encodings[t]=e},Object.defineProperty(o.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw new Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw new Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(o.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),o.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,t))||!this._protocols[this._activeProtocol].restrict(t))return!1;var e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0},o.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},o.prototype._compareEvents=function(t,e){return t.col===e.col&&t.row===e.row&&t.button===e.button&&t.action===e.action&&t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift},u([_(0,f.IBufferService),_(1,f.ICoreService)],o)}();a.CoreMouseService=l},6975:function(I,a,v){var u,_=this&&this.__extends||(u=function(e,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])},u(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=e}u(e,r),e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}),f=this&&this.__decorate||function(e,r,s,c){var d,g=arguments.length,b=g<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,s):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,r,s,c);else for(var C=e.length-1;C>=0;C--)(d=e[C])&&(b=(g<3?d(b):g>3?d(r,s,b):d(r,s))||b);return g>3&&b&&Object.defineProperty(r,s,b),b},h=this&&this.__param||function(e,r){return function(s,c){r(s,c,e)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;var m=v(2585),p=v(8460),i=v(1439),n=v(844),l=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),t=function(e){function r(s,c,d,g){var b=e.call(this)||this;return b._bufferService=c,b._logService=d,b._optionsService=g,b.isCursorInitialized=!1,b.isCursorHidden=!1,b._onData=b.register(new p.EventEmitter),b._onUserInput=b.register(new p.EventEmitter),b._onBinary=b.register(new p.EventEmitter),b._scrollToBottom=s,b.register({dispose:function(){return b._scrollToBottom=void 0}}),b.modes=(0,i.clone)(l),b.decPrivateModes=(0,i.clone)(o),b}return _(r,e),Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.modes=(0,i.clone)(l),this.decPrivateModes=(0,i.clone)(o)},r.prototype.triggerDataEvent=function(s,c){if(c===void 0&&(c=!1),!this._optionsService.options.disableStdin){var d=this._bufferService.buffer;d.ybase!==d.ydisp&&this._scrollToBottom(),c&&this._onUserInput.fire(),this._logService.debug('sending data "'+s+'"',function(){return s.split("").map(function(g){return g.charCodeAt(0)})}),this._onData.fire(s)}},r.prototype.triggerBinaryEvent=function(s){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+s+'"',function(){return s.split("").map(function(c){return c.charCodeAt(0)})}),this._onBinary.fire(s))},f([h(1,m.IBufferService),h(2,m.ILogService),h(3,m.IOptionsService)],r)}(n.Disposable);a.CoreService=t},3730:function(I,a,v){var u=this&&this.__decorate||function(m,p,i,n){var l,o=arguments.length,t=o<3?p:n===null?n=Object.getOwnPropertyDescriptor(p,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(m,p,i,n);else for(var e=m.length-1;e>=0;e--)(l=m[e])&&(t=(o<3?l(t):o>3?l(p,i,t):l(p,i))||t);return o>3&&t&&Object.defineProperty(p,i,t),t},_=this&&this.__param||function(m,p){return function(i,n){p(i,n,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DirtyRowService=void 0;var f=v(2585),h=function(){function m(p){this._bufferService=p,this.clearRange()}return Object.defineProperty(m.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),m.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},m.prototype.markDirty=function(p){p<this._start?this._start=p:p>this._end&&(this._end=p)},m.prototype.markRangeDirty=function(p,i){if(p>i){var n=p;p=i,i=n}p<this._start&&(this._start=p),i>this._end&&(this._end=i)},m.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},u([_(0,f.IBufferService)],m)}();a.DirtyRowService=h},4348:function(I,a,v){var u=this&&this.__spreadArray||function(p,i,n){if(n||arguments.length===2)for(var l,o=0,t=i.length;o<t;o++)!l&&o in i||(l||(l=Array.prototype.slice.call(i,0,o)),l[o]=i[o]);return p.concat(l||Array.prototype.slice.call(i))};Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;var _=v(2585),f=v(8343),h=function(){function p(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];this._entries=new Map;for(var l=0,o=i;l<o.length;l++){var t=o[l],e=t[0],r=t[1];this.set(e,r)}}return p.prototype.set=function(i,n){var l=this._entries.get(i);return this._entries.set(i,n),l},p.prototype.forEach=function(i){this._entries.forEach(function(n,l){return i(l,n)})},p.prototype.has=function(i){return this._entries.has(i)},p.prototype.get=function(i){return this._entries.get(i)},p}();a.ServiceCollection=h;var m=function(){function p(){this._services=new h,this._services.set(_.IInstantiationService,this)}return p.prototype.setService=function(i,n){this._services.set(i,n)},p.prototype.getService=function(i){return this._services.get(i)},p.prototype.createInstance=function(i){for(var n=[],l=1;l<arguments.length;l++)n[l-1]=arguments[l];for(var o=(0,f.getServiceDependencies)(i).sort(function(g,b){return g.index-b.index}),t=[],e=0,r=o;e<r.length;e++){var s=r[e],c=this._services.get(s.id);if(!c)throw new Error("[createInstance] "+i.name+" depends on UNKNOWN service "+s.id+".");t.push(c)}var d=o.length>0?o[0].index:n.length;if(n.length!==d)throw new Error("[createInstance] First service dependency of "+i.name+" at position "+(d+1)+" conflicts with "+n.length+" static arguments");return new(i.bind.apply(i,u([void 0],u(u([],n,!0),t,!0),!1)))},p}();a.InstantiationService=m},7866:function(I,a,v){var u=this&&this.__decorate||function(i,n,l,o){var t,e=arguments.length,r=e<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,n,l,o);else for(var s=i.length-1;s>=0;s--)(t=i[s])&&(r=(e<3?t(r):e>3?t(n,l,r):t(n,l))||r);return e>3&&r&&Object.defineProperty(n,l,r),r},_=this&&this.__param||function(i,n){return function(l,o){n(l,o,i)}},f=this&&this.__spreadArray||function(i,n,l){if(l||arguments.length===2)for(var o,t=0,e=n.length;t<e;t++)!o&&t in n||(o||(o=Array.prototype.slice.call(n,0,t)),o[t]=n[t]);return i.concat(o||Array.prototype.slice.call(n))};Object.defineProperty(a,"__esModule",{value:!0}),a.LogService=void 0;var h=v(2585),m={debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF},p=function(){function i(n){var l=this;this._optionsService=n,this.logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(o){o==="logLevel"&&l._updateLogLevel()})}return i.prototype._updateLogLevel=function(){this.logLevel=m[this._optionsService.options.logLevel]},i.prototype._evalLazyOptionalParams=function(n){for(var l=0;l<n.length;l++)typeof n[l]=="function"&&(n[l]=n[l]())},i.prototype._log=function(n,l,o){this._evalLazyOptionalParams(o),n.call.apply(n,f([console,"xterm.js: "+l],o,!1))},i.prototype.debug=function(n){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];this.logLevel<=h.LogLevelEnum.DEBUG&&this._log(console.log,n,l)},i.prototype.info=function(n){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];this.logLevel<=h.LogLevelEnum.INFO&&this._log(console.info,n,l)},i.prototype.warn=function(n){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];this.logLevel<=h.LogLevelEnum.WARN&&this._log(console.warn,n,l)},i.prototype.error=function(n){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];this.logLevel<=h.LogLevelEnum.ERROR&&this._log(console.error,n,l)},u([_(0,h.IOptionsService)],i)}();a.LogService=p},7302:function(I,a,v){var u=this&&this.__assign||function(){return u=Object.assign||function(p){for(var i,n=1,l=arguments.length;n<l;n++)for(var o in i=arguments[n])Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o]);return p},u.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=a.DEFAULT_BELL_SOUND=void 0;var _=v(8460),f=v(6114);a.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:a.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var h=["normal","bold","100","200","300","400","500","600","700","800","900"],m=function(){function p(i){for(var n in this._onOptionChange=new _.EventEmitter,this._options=u({},a.DEFAULT_OPTIONS),i)if(n in this._options)try{var l=i[n];this._options[n]=this._sanitizeAndValidateOption(n,l)}catch(o){console.error(o)}this.options=this._setupOptions(this._options)}return Object.defineProperty(p.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),p.prototype._setupOptions=function(i){var n=this,l=u({},i),o=function(e){Object.defineProperty(l,e,{get:function(){if(!(e in a.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return n._options[e]},set:function(r){if(!(e in a.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');r=n._sanitizeAndValidateOption(e,r),n._options[e]!==r&&(n._options[e]=r,n._onOptionChange.fire(e))}})};for(var t in l)o(t);return l},p.prototype.setOption=function(i,n){this.options[i]=n},p.prototype._sanitizeAndValidateOption=function(i,n){switch(i){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":n||(n=a.DEFAULT_OPTIONS[i]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=h.includes(n)?n:a.DEFAULT_OPTIONS[i];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(i+" cannot be less than 1, value: "+n);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(i+" cannot be less than 0, value: "+n);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(i+" cannot be less than or equal to 0, value: "+n);case"rows":case"cols":if(!n&&n!==0)throw new Error(i+" must be numeric, value: "+n)}return n},p.prototype.getOption=function(i){return this.options[i]},p}();a.OptionsService=m},8343:(I,a)=>{function v(u,_,f){_.di$target===_?_.di$dependencies.push({id:u,index:f}):(_.di$dependencies=[{id:u,index:f}],_.di$target=_)}Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0,a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u.di$dependencies||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);var _=function(f,h,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");v(_,f,m)};return _.toString=function(){return u},a.serviceRegistry.set(u,_),_}},2585:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IUnicodeService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.IDirtyRowService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;var u,_=v(8343);a.IBufferService=(0,_.createDecorator)("BufferService"),a.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),a.ICoreService=(0,_.createDecorator)("CoreService"),a.ICharsetService=(0,_.createDecorator)("CharsetService"),a.IDirtyRowService=(0,_.createDecorator)("DirtyRowService"),a.IInstantiationService=(0,_.createDecorator)("InstantiationService"),(u=a.LogLevelEnum||(a.LogLevelEnum={}))[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF",a.ILogService=(0,_.createDecorator)("LogService"),a.IOptionsService=(0,_.createDecorator)("OptionsService"),a.IUnicodeService=(0,_.createDecorator)("UnicodeService")},1480:(I,a,v)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;var u=v(8460),_=v(225),f=function(){function h(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter;var m=new _.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}return Object.defineProperty(h.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._active},set:function(m){if(!this._providers[m])throw new Error('unknown Unicode version "'+m+'"');this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)},enumerable:!1,configurable:!0}),h.prototype.register=function(m){this._providers[m.version]=m},h.prototype.wcwidth=function(m){return this._activeProvider.wcwidth(m)},h.prototype.getStringCellWidth=function(m){for(var p=0,i=m.length,n=0;n<i;++n){var l=m.charCodeAt(n);if(55296<=l&&l<=56319){if(++n>=i)return p+this.wcwidth(l);var o=m.charCodeAt(n);56320<=o&&o<=57343?l=1024*(l-55296)+o-56320+65536:p+=this.wcwidth(o)}p+=this.wcwidth(l)}return p},h}();a.UnicodeService=f}},J={};function N(I){var a=J[I];if(a!==void 0)return a.exports;var v=J[I]={exports:{}};return Q[I].call(v.exports,v,v.exports,N),v.exports}var K={};return(()=>{var I=K;Object.defineProperty(I,"__esModule",{value:!0}),I.Terminal=void 0;var a=N(3236),v=N(9042),u=N(7975),_=N(7090),f=N(5741),h=N(8285),m=["cols","rows"],p=function(){function i(n){var l=this;this._core=new a.Terminal(n),this._addonManager=new f.AddonManager,this._publicOptions={};var o=function(r){Object.defineProperty(t._publicOptions,r,{get:function(){return l._core.options[r]},set:function(s){l._checkReadonlyOptions(r),l._core.options[r]=s}})},t=this;for(var e in this._core.options)o(e)}return i.prototype._checkReadonlyOptions=function(n){if(m.includes(n))throw new Error('Option "'+n+'" can only be set in the constructor')},i.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(i.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new u.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"unicode",{get:function(){return this._checkProposedApi(),new _.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new h.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modes",{get:function(){var n=this._core.coreService.decPrivateModes,l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:n.applicationCursorKeys,applicationKeypadMode:n.applicationKeypad,bracketedPasteMode:n.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:n.origin,reverseWraparoundMode:n.reverseWraparound,sendFocusMode:n.sendFocus,wraparoundMode:n.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._publicOptions},set:function(n){for(var l in n)this._publicOptions[l]=n[l]},enumerable:!1,configurable:!0}),i.prototype.blur=function(){this._core.blur()},i.prototype.focus=function(){this._core.focus()},i.prototype.resize=function(n,l){this._verifyIntegers(n,l),this._core.resize(n,l)},i.prototype.open=function(n){this._core.open(n)},i.prototype.attachCustomKeyEventHandler=function(n){this._core.attachCustomKeyEventHandler(n)},i.prototype.registerLinkMatcher=function(n,l,o){return this._checkProposedApi(),this._core.registerLinkMatcher(n,l,o)},i.prototype.deregisterLinkMatcher=function(n){this._checkProposedApi(),this._core.deregisterLinkMatcher(n)},i.prototype.registerLinkProvider=function(n){return this._checkProposedApi(),this._core.registerLinkProvider(n)},i.prototype.registerCharacterJoiner=function(n){return this._checkProposedApi(),this._core.registerCharacterJoiner(n)},i.prototype.deregisterCharacterJoiner=function(n){this._checkProposedApi(),this._core.deregisterCharacterJoiner(n)},i.prototype.registerMarker=function(n){return this._checkProposedApi(),this._verifyIntegers(n),this._core.addMarker(n)},i.prototype.addMarker=function(n){return this.registerMarker(n)},i.prototype.hasSelection=function(){return this._core.hasSelection()},i.prototype.select=function(n,l,o){this._verifyIntegers(n,l,o),this._core.select(n,l,o)},i.prototype.getSelection=function(){return this._core.getSelection()},i.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},i.prototype.clearSelection=function(){this._core.clearSelection()},i.prototype.selectAll=function(){this._core.selectAll()},i.prototype.selectLines=function(n,l){this._verifyIntegers(n,l),this._core.selectLines(n,l)},i.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},i.prototype.scrollLines=function(n){this._verifyIntegers(n),this._core.scrollLines(n)},i.prototype.scrollPages=function(n){this._verifyIntegers(n),this._core.scrollPages(n)},i.prototype.scrollToTop=function(){this._core.scrollToTop()},i.prototype.scrollToBottom=function(){this._core.scrollToBottom()},i.prototype.scrollToLine=function(n){this._verifyIntegers(n),this._core.scrollToLine(n)},i.prototype.clear=function(){this._core.clear()},i.prototype.write=function(n,l){this._core.write(n,l)},i.prototype.writeUtf8=function(n,l){this._core.write(n,l)},i.prototype.writeln=function(n,l){this._core.write(n),this._core.write(`\r
`,l)},i.prototype.paste=function(n){this._core.paste(n)},i.prototype.getOption=function(n){return this._core.optionsService.getOption(n)},i.prototype.setOption=function(n,l){this._checkReadonlyOptions(n),this._core.optionsService.setOption(n,l)},i.prototype.refresh=function(n,l){this._verifyIntegers(n,l),this._core.refresh(n,l)},i.prototype.reset=function(){this._core.reset()},i.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},i.prototype.loadAddon=function(n){return this._addonManager.loadAddon(this,n)},Object.defineProperty(i,"strings",{get:function(){return v},enumerable:!1,configurable:!0}),i.prototype._verifyIntegers=function(){for(var n=[],l=0;l<arguments.length;l++)n[l]=arguments[l];for(var o=0,t=n;o<t.length;o++){var e=t[o];if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}},i}();I.Terminal=p})(),K})()})})(yr);var mr={exports:{}};(function($,Y){(function(Q,J){$.exports=J()})(self,function(){return(()=>{var Q={775:(N,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.FitAddon=void 0;var I=function(){function a(){}return a.prototype.activate=function(v){this._terminal=v},a.prototype.dispose=function(){},a.prototype.fit=function(){var v=this.proposeDimensions();if(v&&this._terminal){var u=this._terminal._core;this._terminal.rows===v.rows&&this._terminal.cols===v.cols||(u._renderService.clear(),this._terminal.resize(v.cols,v.rows))}},a.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var v=this._terminal._core;if(v._renderService.dimensions.actualCellWidth!==0&&v._renderService.dimensions.actualCellHeight!==0){var u=window.getComputedStyle(this._terminal.element.parentElement),_=parseInt(u.getPropertyValue("height")),f=Math.max(0,parseInt(u.getPropertyValue("width"))),h=window.getComputedStyle(this._terminal.element),m=_-(parseInt(h.getPropertyValue("padding-top"))+parseInt(h.getPropertyValue("padding-bottom"))),p=f-(parseInt(h.getPropertyValue("padding-right"))+parseInt(h.getPropertyValue("padding-left")))-v.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(p/v._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(m/v._renderService.dimensions.actualCellHeight))}}}},a}();K.FitAddon=I}},J={};return function N(K){if(J[K])return J[K].exports;var I=J[K]={exports:{}};return Q[K](I,I.exports,N),I.exports}(775)})()})})(mr);var Sr={exports:{}};(function($,Y){(function(Q,J){$.exports=J()})(window,function(){return function(Q){var J={};function N(K){if(J[K])return J[K].exports;var I=J[K]={i:K,l:!1,exports:{}};return Q[K].call(I.exports,I,I.exports,N),I.l=!0,I.exports}return N.m=Q,N.c=J,N.d=function(K,I,a){N.o(K,I)||Object.defineProperty(K,I,{enumerable:!0,get:a})},N.r=function(K){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})},N.t=function(K,I){if(1&I&&(K=N(K)),8&I||4&I&&typeof K=="object"&&K&&K.__esModule)return K;var a=Object.create(null);if(N.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:K}),2&I&&typeof K!="string")for(var v in K)N.d(a,v,function(u){return K[u]}.bind(null,v));return a},N.n=function(K){var I=K&&K.__esModule?function(){return K.default}:function(){return K};return N.d(I,"a",I),I},N.o=function(K,I){return Object.prototype.hasOwnProperty.call(K,I)},N.p="",N(N.s=0)}([function(Q,J,N){Object.defineProperty(J,"__esModule",{value:!0}),J.WebLinksAddon=void 0;var K=N(1),I=new RegExp(`(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,6}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)`);function a(u,_){var f=window.open();f?(f.opener=null,f.location.href=_):console.warn("Opening link blocked as opener could not be cleared")}var v=function(){function u(_,f,h){_===void 0&&(_=a),f===void 0&&(f={}),h===void 0&&(h=!1),this._handler=_,this._options=f,this._useLinkProvider=h,this._options.matchIndex=1}return u.prototype.activate=function(_){this._terminal=_,this._useLinkProvider&&"registerLinkProvider"in this._terminal?this._linkProvider=this._terminal.registerLinkProvider(new K.WebLinkProvider(this._terminal,I,this._handler)):this._linkMatcherId=this._terminal.registerLinkMatcher(I,this._handler,this._options)},u.prototype.dispose=function(){var _;this._linkMatcherId!==void 0&&this._terminal!==void 0&&this._terminal.deregisterLinkMatcher(this._linkMatcherId),(_=this._linkProvider)===null||_===void 0||_.dispose()},u}();J.WebLinksAddon=v},function(Q,J,N){Object.defineProperty(J,"__esModule",{value:!0}),J.LinkComputer=J.WebLinkProvider=void 0;var K=function(){function a(v,u,_){this._terminal=v,this._regex=u,this._handler=_}return a.prototype.provideLinks=function(v,u){u(I.computeLink(v,this._regex,this._terminal,this._handler))},a}();J.WebLinkProvider=K;var I=function(){function a(){}return a.computeLink=function(v,u,_,f){for(var h,m=new RegExp(u.source,(u.flags||"")+"g"),p=a._translateBufferLineToStringWithWrap(v-1,!1,_),i=p[0],n=p[1],l=-1,o=[];(h=m.exec(i))!==null;){var t=h[1];if(!t){console.log("match found without corresponding matchIndex");break}if(l=i.indexOf(t,l+1),m.lastIndex=l+t.length,l<0)break;for(var e=l+t.length,r=n+1;e>_.cols;)e-=_.cols,r++;var s={start:{x:l+1,y:n+1},end:{x:e,y:r}};o.push({range:s,text:t,activate:f})}return o},a._translateBufferLineToStringWithWrap=function(v,u,_){var f,h,m="";do{if(!(i=_.buffer.active.getLine(v)))break;i.isWrapped&&v--,h=i.isWrapped}while(h);var p=v;do{var i,n=_.buffer.active.getLine(v+1);if(f=!!n&&n.isWrapped,!(i=_.buffer.active.getLine(v)))break;m+=i.translateToString(!f&&u).substring(0,_.cols),v++}while(f);return[m,p]},a}();J.LinkComputer=I}])})})(Sr);const Cr={foreground:"#2c3e50",background:"#fff",cursor:"rgba(0, 0, 0, .4)",selection:"rgba(0, 0, 0, 0.3)",black:"#000000",red:"#e83030",brightRed:"#e83030",green:"#42b983",brightGreen:"#42b983",brightYellow:"#ea6e00",yellow:"#ea6e00",magenta:"#e83030",brightMagenta:"#e83030",cyan:"#03c2e6",brightBlue:"#03c2e6",brightCyan:"#03c2e6",blue:"#03c2e6",white:"#d0d0d0",brightBlack:"#808080"};Ot(Ae({},Cr),{foreground:"#fff",background:"#1d2935",cursor:"rgba(255, 255, 255, .4)",selection:"rgba(255, 255, 255, 0.3)",magenta:"#e83030",brightMagenta:"#e83030"});const me=new yr.exports.Terminal({theme:Cr,cols:100,rows:100}),hr=new mr.exports.FitAddon,Xr=new Sr.exports.WebLinksAddon;me.loadAddon(hr);me.loadAddon(Xr);function Yr(){const $=ve.exports.useRef(null);return Kr("resize",()=>{hr.fit()},{target:window}),ve.exports.useEffect(()=>{$&&me.open($.current)},[]),Z.createElement("div",{className:"xterm-render",ref:$})}const br=($,Y=!0)=>{if($.indexOf(`
`)!==-1){$.split(`
`).forEach(Q=>br(Q));return}typeof $=="string"?me[Y?"writeln":"write"]($):me.writeln("")},wr=$=>{br($.text,$.type==="stdout")},Zr={idle:"\u7A7A\u95F2",error:"\u9519\u8BEF",terminated:"\u7EC8\u6B62",done:"\u5B8C\u6210",running:"\u8FD0\u884C\u4E2D",stderr:"\u9519\u8BEF"};var ii=()=>{const $=Br(),{socket:Y}=zr(),[Q,J]=ve.exports.useState(!1),[N,K]=ve.exports.useState(null),[I,a]=ve.exports.useState([]),[v,u]=ve.exports.useState([]);ve.exports.useEffect(()=>{Y.on("task_changed",n=>{if(J(!1),N&&n&&n.taskChanged){const{status:l}=n.taskChanged;K(Ot(Ae({},N),{status:l}));const o=v.findIndex(t=>t.id===n.taskChanged.id);o>-1&&(v[o]=Ot(Ae({},v[o]),{status:l}),u([...v]),a([...v]))}})},[N,v]),ve.exports.useEffect(()=>{Y.off("task_log_added"),Y.on("task_log_added",n=>{n.taskLogAdded&&N&&N.id===n.taskLogAdded.taskId?wr(n.taskLogAdded):console.error("not val.taskLogAdded")})},[N]),ve.exports.useEffect(()=>(Y.emit("get_tasks_list"),Y.on("get_tasks_list",n=>{if(Array.isArray(n)){n.sort(Vr("name")),u(n),a(n);const{pathname:l}=$.location,o=l.replace("/tasks/",""),e=n.find(r=>r.name===o)||n[0];K(Ae({},e)),Y.emit("get_task_logs",e.id)}}),Y.on("get_task_logs",(n,l)=>{me.clear(),Array.isArray(l)&&(l.forEach(o=>{n===o.taskId&&wr(o)}),setTimeout(()=>{hr.fit(),me.scrollToBottom()},88))}),()=>{Y.off("get_tasks_list"),Y.off("get_task_logs"),Y.off("task_log_added"),Y.off("task_changed")}),[]);const _=()=>{J(!0),Y.emit("run_tasks",N==null?void 0:N.id)},f=()=>{J(!0),Y.emit("stop_tasks",N==null?void 0:N.id)},h=()=>{me.clear(),Y.emit("clear_logs",N==null?void 0:N.id)},m=n=>{const{name:l,id:o}=n;$.push(`/tasks/${l}`),K(Ae({},n)),Y.emit("get_task_logs",o)},p=n=>{const{value:l}=n.target,o=v.filter(t=>t.name.indexOf(l)>-1);a(o)},i=ve.exports.useMemo(()=>Gr(I),[I]);return Z.createElement(Nr,{isMain:!0,title:"\u4EFB\u52A1",className:"task-container"},Z.createElement("div",{className:"task-list"},Z.createElement("div",{className:"search"},Z.createElement(Dr,{prefix:Z.createElement(Pr,null),allowClear:!0,onChange:p,placeholder:"\u641C\u7D22"})),Z.createElement("div",{className:"task-ul"},Object.keys(i).map(n=>{const l=i[n];return Z.createElement("div",{key:n},Z.createElement("div",{className:"task-group"},n.toUpperCase()),l&&Array.isArray(l)&&l.map(o=>{const{id:t,name:e,command:r,status:s}=o;return Z.createElement("div",{key:t,onClick:()=>m(o),className:`task-li ${N&&N.id===t?"active":""}`},Z.createElement("div",{className:"icon"},Z.createElement(Ir,{placement:"right",title:r,color:"blue"},(()=>s==="running"?Z.createElement(Hr,{className:"green"}):s==="error"?Z.createElement(Fr,{className:"red"}):s==="done"||s==="terminated"?Z.createElement(jr,{className:"green"}):Z.createElement(vr,null))())),Z.createElement("div",{className:"task-content"},Z.createElement("div",{className:"name"},e),Z.createElement("div",{className:"desc"},Z.createElement("span",{className:`color-${s}`},"[",Zr[s],"]"))))}))}))),Z.createElement("div",{className:"task-scroll"},Z.createElement("h3",null,Z.createElement(Wr,null)," ",N&&N.name),N&&N.id&&Z.createElement("div",{className:"handler"},(()=>N?N.status==="running"?Z.createElement(gr,{type:"primary",danger:!0,onClick:()=>f(),loading:Q,icon:Z.createElement(Ur,null)},"\u505C\u6B62"):Z.createElement(gr,{type:"primary",onClick:()=>_(),loading:Q,icon:Z.createElement(qr,null)},"\u8FD0\u884C"):null)(),Z.createElement("span",{className:"cur",style:{marginLeft:30},onClick:h},"\u6E05\u7A7A")),N&&N.id&&Z.createElement("div",{className:"terminal"},Z.createElement("p",null,Z.createElement(vr,null)," \u8F93\u51FA\uFF1A"),Z.createElement(Yr,null))))};export{ii as default};
